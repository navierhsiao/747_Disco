ARM GAS  /tmp/ccILjF3V.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"usbh_mtp.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.global	MTP_Class
  17              		.section	.rodata
  18              		.align	2
  19              	.LC0:
  20 0000 4D545000 		.ascii	"MTP\000"
  21              		.section	.data.MTP_Class,"aw"
  22              		.align	2
  25              	MTP_Class:
  26 0000 00000000 		.word	.LC0
  27 0004 06       		.byte	6
  28 0005 000000   		.space	3
  29 0008 00000000 		.word	USBH_MTP_InterfaceInit
  30 000c 00000000 		.word	USBH_MTP_InterfaceDeInit
  31 0010 00000000 		.word	USBH_MTP_ClassRequest
  32 0014 00000000 		.word	USBH_MTP_Process
  33 0018 00000000 		.word	USBH_MTP_SOFProcess
  34 001c 00000000 		.word	0
  35              		.section	.text.USBH_MTP_InterfaceInit,"ax",%progbits
  36              		.align	1
  37              		.arch armv7e-m
  38              		.syntax unified
  39              		.thumb
  40              		.thumb_func
  41              		.fpu fpv5-d16
  43              	USBH_MTP_InterfaceInit:
  44              	.LFB338:
  45              		.file 1 "./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c"
   1:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
   2:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   ******************************************************************************
   3:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @file    usbh_mtp.c
   4:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @author  MCD Application Team
   5:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief   This file is the MTP Layer Handlers for USB Host MTP class.
   6:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
   7:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @verbatim
   8:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
   9:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *          ===================================================================
  10:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *                                MTP Class  Description
  11:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *          ===================================================================
  12:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           This module manages the MTP class following the
  13:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           "Media Transfer Protocol (MTP) specification Version 1.11 April 6th, 2011".
  14:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           the implmentation is compatible with the PTP model as an extension
  15:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *           of the existing Picture Transfer Protocol defined by the ISO 15740 specification
ARM GAS  /tmp/ccILjF3V.s 			page 2


  16:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  17:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *  @endverbatim
  18:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  19:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   ******************************************************************************
  20:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @attention
  21:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  22:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * <h2><center>&copy; Copyright (c) 2015 STMicroelectronics.
  23:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * All rights reserved.</center></h2>
  24:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  25:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * This software component is licensed by ST under Ultimate Liberty license
  26:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * SLA0044, the "License"; You may not use this file except in compliance with
  27:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * the License. You may obtain a copy of the License at:
  28:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *                      www.st.com/SLA0044
  29:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *
  30:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   ******************************************************************************
  31:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
  32:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  33:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /* BSPDependencies
  34:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** - "stm32xxxxx_{eval}{discovery}.c"
  35:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** - "stm32xxxxx_{eval}{discovery}_io.c"
  36:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** - "stm32xxxxx_{eval}{discovery}_audio.c"
  37:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** - "stm32xxxxx_{eval}{discovery}_sd.c"
  38:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** - "stm32xxxxx_{eval}{discovery}_lcd.c"
  39:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** - "stm32xxxxx_{eval}{discovery}_sdram.c"
  40:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** EndBSPDependencies */
  41:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  42:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /* Includes ------------------------------------------------------------------*/
  43:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #include "usbh_mtp.h"
  44:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  45:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @addtogroup USBH_LIB
  46:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  47:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  48:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  49:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @addtogroup USBH_CLASS
  50:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  51:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  52:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  53:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @addtogroup USBH_MTP_CLASS
  54:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  55:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  56:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  57:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE
  58:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @brief    This file includes MTP Layer Handlers for USB Host MTP class.
  59:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  60:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  61:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  62:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_TypesDefinitions
  63:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  64:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  65:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  66:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  67:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  68:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  69:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  70:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Defines
  71:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  72:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
ARM GAS  /tmp/ccILjF3V.s 			page 3


  73:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  74:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  75:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  76:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  77:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  78:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Macros
  79:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  80:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  81:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  82:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  83:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  84:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  85:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  86:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Variables
  87:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  88:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  89:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
  90:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
  91:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  92:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  93:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  94:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_FunctionPrototypes
  95:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
  96:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
  97:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
  98:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_InterfaceInit(USBH_HandleTypeDef *phost);
  99:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_InterfaceDeInit(USBH_HandleTypeDef *phost);
 100:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Process(USBH_HandleTypeDef *phost);
 101:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_ClassRequest(USBH_HandleTypeDef *phost);
 102:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 103:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindCtlEndpoint(USBH_HandleTypeDef *phost);
 104:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataOutEndpoint(USBH_HandleTypeDef *phost);
 105:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataInEndpoint(USBH_HandleTypeDef *phost);
 106:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 107:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_SOFProcess(USBH_HandleTypeDef *phost);
 108:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Events(USBH_HandleTypeDef *phost);
 109:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 110:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static void MTP_DecodeEvent(USBH_HandleTypeDef *phost);
 111:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 112:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_ClassTypeDef  MTP_Class =
 113:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 114:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   "MTP",
 115:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USB_MTP_CLASS,
 116:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_InterfaceInit,
 117:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_InterfaceDeInit,
 118:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_ClassRequest,
 119:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_Process,
 120:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_SOFProcess,
 121:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   NULL,
 122:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** };
 123:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 124:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @}
 125:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
 126:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 127:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 128:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /** @defgroup USBH_MTP_CORE_Private_Functions
 129:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** * @{
ARM GAS  /tmp/ccILjF3V.s 			page 4


 130:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** */
 131:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 132:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 133:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_InterfaceInit
 134:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function init the MTP class.
 135:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 136:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 137:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 138:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_InterfaceInit(USBH_HandleTypeDef *phost)
 139:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
  46              		.loc 1 139 1
  47              		.cfi_startproc
  48              		@ args = 0, pretend = 0, frame = 16
  49              		@ frame_needed = 1, uses_anonymous_args = 0
  50 0000 B0B5     		push	{r4, r5, r7, lr}
  51              	.LCFI0:
  52              		.cfi_def_cfa_offset 16
  53              		.cfi_offset 4, -16
  54              		.cfi_offset 5, -12
  55              		.cfi_offset 7, -8
  56              		.cfi_offset 14, -4
  57 0002 88B0     		sub	sp, sp, #32
  58              	.LCFI1:
  59              		.cfi_def_cfa_offset 48
  60 0004 04AF     		add	r7, sp, #16
  61              	.LCFI2:
  62              		.cfi_def_cfa 7, 32
  63 0006 7860     		str	r0, [r7, #4]
 140:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status;
 141:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 142:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle;
 143:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 144:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   interface = USBH_FindInterface(phost, USB_MTP_CLASS, 1U, 1U);
  64              		.loc 1 144 15
  65 0008 0123     		movs	r3, #1
  66 000a 0122     		movs	r2, #1
  67 000c 0621     		movs	r1, #6
  68 000e 7868     		ldr	r0, [r7, #4]
  69 0010 FFF7FEFF 		bl	USBH_FindInterface
  70 0014 0346     		mov	r3, r0
  71 0016 FB73     		strb	r3, [r7, #15]
 145:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((interface == 0xFFU) || (interface >= USBH_MAX_NUM_INTERFACES)) /* No Valid Interface */
  72              		.loc 1 145 6
  73 0018 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  74 001a FF2B     		cmp	r3, #255
  75 001c 02D0     		beq	.L2
  76              		.loc 1 145 28 discriminator 1
  77 001e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  78 0020 012B     		cmp	r3, #1
  79 0022 01D9     		bls	.L3
  80              	.L2:
 146:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 147:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_DbgLog("Cannot Find the interface for Still Image Class.");
 148:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     return USBH_FAIL;
  81              		.loc 1 148 12
  82 0024 0223     		movs	r3, #2
  83 0026 9AE1     		b	.L4
ARM GAS  /tmp/ccILjF3V.s 			page 5


  84              	.L3:
 149:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 150:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 151:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_SelectInterface(phost, interface);
  85              		.loc 1 151 3
  86 0028 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  87 002a 1946     		mov	r1, r3
  88 002c 7868     		ldr	r0, [r7, #4]
  89 002e FFF7FEFF 		bl	USBH_SelectInterface
 152:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 153:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   status = USBH_SelectInterface(phost, interface);
  90              		.loc 1 153 12
  91 0032 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  92 0034 1946     		mov	r1, r3
  93 0036 7868     		ldr	r0, [r7, #4]
  94 0038 FFF7FEFF 		bl	USBH_SelectInterface
  95 003c 0346     		mov	r3, r0
  96 003e BB73     		strb	r3, [r7, #14]
 154:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 155:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (status != USBH_OK)
  97              		.loc 1 155 6
  98 0040 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
  99 0042 002B     		cmp	r3, #0
 100 0044 01D0     		beq	.L5
 156:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 157:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     return USBH_FAIL;
 101              		.loc 1 157 12
 102 0046 0223     		movs	r3, #2
 103 0048 89E1     		b	.L4
 104              	.L5:
 158:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 159:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 160:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   endpoint = MTP_FindCtlEndpoint(phost);
 105              		.loc 1 160 14
 106 004a 7868     		ldr	r0, [r7, #4]
 107 004c FFF7FEFF 		bl	MTP_FindCtlEndpoint
 108 0050 0346     		mov	r3, r0
 109 0052 7B73     		strb	r3, [r7, #13]
 161:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((endpoint == 0xFFU) || (endpoint >= USBH_MAX_NUM_ENDPOINTS))
 110              		.loc 1 161 6
 111 0054 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 112 0056 FF2B     		cmp	r3, #255
 113 0058 02D0     		beq	.L6
 114              		.loc 1 161 27 discriminator 1
 115 005a 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 116 005c 012B     		cmp	r3, #1
 117 005e 01D9     		bls	.L7
 118              	.L6:
 162:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 163:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_DbgLog("Invalid Control endpoint number");
 164:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     return USBH_FAIL;
 119              		.loc 1 164 12
 120 0060 0223     		movs	r3, #2
 121 0062 7CE1     		b	.L4
 122              	.L7:
 165:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 166:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
ARM GAS  /tmp/ccILjF3V.s 			page 6


 167:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   phost->pActiveClass->pData = (MTP_HandleTypeDef *)USBH_malloc(sizeof(MTP_HandleTypeDef));
 123              		.loc 1 167 8
 124 0064 7B68     		ldr	r3, [r7, #4]
 125 0066 D3F87C44 		ldr	r4, [r3, #1148]
 126              		.loc 1 167 53
 127 006a 42F2D010 		movw	r0, #8656
 128 006e FFF7FEFF 		bl	pvPortMalloc
 129 0072 0346     		mov	r3, r0
 130              		.loc 1 167 30
 131 0074 E361     		str	r3, [r4, #28]
 168:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 132              		.loc 1 168 42
 133 0076 7B68     		ldr	r3, [r7, #4]
 134 0078 D3F87C34 		ldr	r3, [r3, #1148]
 135              		.loc 1 168 14
 136 007c DB69     		ldr	r3, [r3, #28]
 137 007e BB60     		str	r3, [r7, #8]
 169:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 170:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle == NULL)
 138              		.loc 1 170 6
 139 0080 BB68     		ldr	r3, [r7, #8]
 140 0082 002B     		cmp	r3, #0
 141 0084 01D1     		bne	.L8
 171:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 172:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_DbgLog("Cannot allocate memory for MTP Handle");
 173:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     return USBH_FAIL;
 142              		.loc 1 173 12
 143 0086 0223     		movs	r3, #2
 144 0088 69E1     		b	.L4
 145              	.L8:
 174:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 175:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 176:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Initialize mtp handler */
 177:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_memset(MTP_Handle, 0, sizeof(MTP_HandleTypeDef));
 146              		.loc 1 177 3
 147 008a 42F2D012 		movw	r2, #8656
 148 008e 0021     		movs	r1, #0
 149 0090 B868     		ldr	r0, [r7, #8]
 150 0092 FFF7FEFF 		bl	memset
 178:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 179:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /*Collect the control endpoint address and length*/
 180:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->NotificationEp = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpoin
 151              		.loc 1 180 91
 152 0096 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 153 0098 797B     		ldrb	r1, [r7, #13]	@ zero_extendqisi2
 154 009a 7A68     		ldr	r2, [r7, #4]
 155 009c 0131     		adds	r1, r1, #1
 156 009e C900     		lsls	r1, r1, #3
 157 00a0 1A20     		movs	r0, #26
 158 00a2 00FB03F3 		mul	r3, r0, r3
 159 00a6 0B44     		add	r3, r3, r1
 160 00a8 1344     		add	r3, r3, r2
 161 00aa 03F24643 		addw	r3, r3, #1094
 162 00ae 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 163              		.loc 1 180 30
 164 00b0 BA68     		ldr	r2, [r7, #8]
 165 00b2 41F63153 		movw	r3, #7473
ARM GAS  /tmp/ccILjF3V.s 			page 7


 166 00b6 1344     		add	r3, r3, r2
 167 00b8 0A46     		mov	r2, r1
 168 00ba 1A70     		strb	r2, [r3]
 181:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->NotificationEpSize = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMax
 169              		.loc 1 181 95
 170 00bc FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 171 00be 797B     		ldrb	r1, [r7, #13]	@ zero_extendqisi2
 172 00c0 7A68     		ldr	r2, [r7, #4]
 173 00c2 0131     		adds	r1, r1, #1
 174 00c4 C900     		lsls	r1, r1, #3
 175 00c6 1A20     		movs	r0, #26
 176 00c8 00FB03F3 		mul	r3, r0, r3
 177 00cc 0B44     		add	r3, r3, r1
 178 00ce 1344     		add	r3, r3, r2
 179 00d0 03F58963 		add	r3, r3, #1096
 180 00d4 1988     		ldrh	r1, [r3]
 181              		.loc 1 181 34
 182 00d6 BA68     		ldr	r2, [r7, #8]
 183 00d8 41F63653 		movw	r3, #7478
 184 00dc 1344     		add	r3, r3, r2
 185 00de 0A46     		mov	r2, r1	@ movhi
 186 00e0 1A80     		strh	r2, [r3]	@ movhi
 182:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->NotificationPipe = USBH_AllocPipe(phost, MTP_Handle->NotificationEp);
 187              		.loc 1 182 34
 188 00e2 BA68     		ldr	r2, [r7, #8]
 189 00e4 41F63153 		movw	r3, #7473
 190 00e8 1344     		add	r3, r3, r2
 191 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 192 00ec 1946     		mov	r1, r3
 193 00ee 7868     		ldr	r0, [r7, #4]
 194 00f0 FFF7FEFF 		bl	USBH_AllocPipe
 195 00f4 0346     		mov	r3, r0
 196 00f6 1946     		mov	r1, r3
 197              		.loc 1 182 32
 198 00f8 BA68     		ldr	r2, [r7, #8]
 199 00fa 41F62E53 		movw	r3, #7470
 200 00fe 1344     		add	r3, r3, r2
 201 0100 0A46     		mov	r2, r1
 202 0102 1A70     		strb	r2, [r3]
 183:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->events.poll = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bInterval;
 203              		.loc 1 183 88
 204 0104 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 205 0106 797B     		ldrb	r1, [r7, #13]	@ zero_extendqisi2
 206 0108 7A68     		ldr	r2, [r7, #4]
 207 010a 0131     		adds	r1, r1, #1
 208 010c C900     		lsls	r1, r1, #3
 209 010e 1A20     		movs	r0, #26
 210 0110 00FB03F3 		mul	r3, r0, r3
 211 0114 0B44     		add	r3, r3, r1
 212 0116 1344     		add	r3, r3, r2
 213 0118 03F24A43 		addw	r3, r3, #1098
 214 011c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 215 011e 99B2     		uxth	r1, r3
 216              		.loc 1 183 27
 217 0120 BA68     		ldr	r2, [r7, #8]
 218 0122 41F64453 		movw	r3, #7492
 219 0126 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccILjF3V.s 			page 8


 220 0128 0A46     		mov	r2, r1	@ movhi
 221 012a 1A80     		strh	r2, [r3]	@ movhi
 184:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 185:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Open pipe for Notification endpoint */
 186:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_OpenPipe(phost, MTP_Handle->NotificationPipe,MTP_Handle->NotificationEp,
 222              		.loc 1 186 3
 223 012c BA68     		ldr	r2, [r7, #8]
 224 012e 41F62E53 		movw	r3, #7470
 225 0132 1344     		add	r3, r3, r2
 226 0134 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 227 0136 BA68     		ldr	r2, [r7, #8]
 228 0138 41F63153 		movw	r3, #7473
 229 013c 1344     		add	r3, r3, r2
 230 013e 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 231 0140 7B68     		ldr	r3, [r7, #4]
 232 0142 93F81C54 		ldrb	r5, [r3, #1052]	@ zero_extendqisi2
 233 0146 7B68     		ldr	r3, [r7, #4]
 234 0148 93F81D24 		ldrb	r2, [r3, #1053]	@ zero_extendqisi2
 235 014c B968     		ldr	r1, [r7, #8]
 236 014e 41F63653 		movw	r3, #7478
 237 0152 0B44     		add	r3, r3, r1
 238 0154 1B88     		ldrh	r3, [r3]
 239 0156 0293     		str	r3, [sp, #8]
 240 0158 0323     		movs	r3, #3
 241 015a 0193     		str	r3, [sp, #4]
 242 015c 0092     		str	r2, [sp]
 243 015e 2B46     		mov	r3, r5
 244 0160 2246     		mov	r2, r4
 245 0162 0146     		mov	r1, r0
 246 0164 7868     		ldr	r0, [r7, #4]
 247 0166 FFF7FEFF 		bl	USBH_OpenPipe
 187:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                 phost->device.address, phost->device.speed, USB_EP_TYPE_INTR,
 188:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                 MTP_Handle->NotificationEpSize);
 189:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 190:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_LL_SetToggle(phost, MTP_Handle->NotificationPipe, 0U);
 248              		.loc 1 190 3
 249 016a BA68     		ldr	r2, [r7, #8]
 250 016c 41F62E53 		movw	r3, #7470
 251 0170 1344     		add	r3, r3, r2
 252 0172 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 253 0174 0022     		movs	r2, #0
 254 0176 1946     		mov	r1, r3
 255 0178 7868     		ldr	r0, [r7, #4]
 256 017a FFF7FEFF 		bl	USBH_LL_SetToggle
 191:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 192:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   endpoint = MTP_FindDataInEndpoint(phost);
 257              		.loc 1 192 14
 258 017e 7868     		ldr	r0, [r7, #4]
 259 0180 FFF7FEFF 		bl	MTP_FindDataInEndpoint
 260 0184 0346     		mov	r3, r0
 261 0186 7B73     		strb	r3, [r7, #13]
 193:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((endpoint == 0xFFU) || (endpoint >= USBH_MAX_NUM_ENDPOINTS))
 262              		.loc 1 193 6
 263 0188 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 264 018a FF2B     		cmp	r3, #255
 265 018c 02D0     		beq	.L9
 266              		.loc 1 193 27 discriminator 1
ARM GAS  /tmp/ccILjF3V.s 			page 9


 267 018e 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 268 0190 012B     		cmp	r3, #1
 269 0192 01D9     		bls	.L10
 270              	.L9:
 194:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 195:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_DbgLog("Invalid Data IN endpoint number");
 196:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     return USBH_FAIL;
 271              		.loc 1 196 12
 272 0194 0223     		movs	r3, #2
 273 0196 E2E0     		b	.L4
 274              	.L10:
 197:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 198:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 199:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /*Collect the control endpoint address and length*/
 200:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->DataInEp = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddre
 275              		.loc 1 200 85
 276 0198 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 277 019a 797B     		ldrb	r1, [r7, #13]	@ zero_extendqisi2
 278 019c 7A68     		ldr	r2, [r7, #4]
 279 019e 0131     		adds	r1, r1, #1
 280 01a0 C900     		lsls	r1, r1, #3
 281 01a2 1A20     		movs	r0, #26
 282 01a4 00FB03F3 		mul	r3, r0, r3
 283 01a8 0B44     		add	r3, r3, r1
 284 01aa 1344     		add	r3, r3, r2
 285 01ac 03F24643 		addw	r3, r3, #1094
 286 01b0 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 287              		.loc 1 200 24
 288 01b2 BA68     		ldr	r2, [r7, #8]
 289 01b4 41F63053 		movw	r3, #7472
 290 01b8 1344     		add	r3, r3, r2
 291 01ba 0A46     		mov	r2, r1
 292 01bc 1A70     		strb	r2, [r3]
 201:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->DataInEpSize = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacket
 293              		.loc 1 201 89
 294 01be FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 295 01c0 797B     		ldrb	r1, [r7, #13]	@ zero_extendqisi2
 296 01c2 7A68     		ldr	r2, [r7, #4]
 297 01c4 0131     		adds	r1, r1, #1
 298 01c6 C900     		lsls	r1, r1, #3
 299 01c8 1A20     		movs	r0, #26
 300 01ca 00FB03F3 		mul	r3, r0, r3
 301 01ce 0B44     		add	r3, r3, r1
 302 01d0 1344     		add	r3, r3, r2
 303 01d2 03F58963 		add	r3, r3, #1096
 304 01d6 1988     		ldrh	r1, [r3]
 305              		.loc 1 201 28
 306 01d8 BA68     		ldr	r2, [r7, #8]
 307 01da 41F63453 		movw	r3, #7476
 308 01de 1344     		add	r3, r3, r2
 309 01e0 0A46     		mov	r2, r1	@ movhi
 310 01e2 1A80     		strh	r2, [r3]	@ movhi
 202:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->DataInPipe = USBH_AllocPipe(phost, MTP_Handle->DataInEp);
 311              		.loc 1 202 28
 312 01e4 BA68     		ldr	r2, [r7, #8]
 313 01e6 41F63053 		movw	r3, #7472
 314 01ea 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccILjF3V.s 			page 10


 315 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 316 01ee 1946     		mov	r1, r3
 317 01f0 7868     		ldr	r0, [r7, #4]
 318 01f2 FFF7FEFF 		bl	USBH_AllocPipe
 319 01f6 0346     		mov	r3, r0
 320 01f8 1946     		mov	r1, r3
 321              		.loc 1 202 26
 322 01fa BA68     		ldr	r2, [r7, #8]
 323 01fc 41F62C53 		movw	r3, #7468
 324 0200 1344     		add	r3, r3, r2
 325 0202 0A46     		mov	r2, r1
 326 0204 1A70     		strb	r2, [r3]
 203:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 204:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Open pipe for DATA IN endpoint */
 205:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_OpenPipe(phost, MTP_Handle->DataInPipe, MTP_Handle->DataInEp,
 327              		.loc 1 205 3
 328 0206 BA68     		ldr	r2, [r7, #8]
 329 0208 41F62C53 		movw	r3, #7468
 330 020c 1344     		add	r3, r3, r2
 331 020e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 332 0210 BA68     		ldr	r2, [r7, #8]
 333 0212 41F63053 		movw	r3, #7472
 334 0216 1344     		add	r3, r3, r2
 335 0218 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 336 021a 7B68     		ldr	r3, [r7, #4]
 337 021c 93F81C54 		ldrb	r5, [r3, #1052]	@ zero_extendqisi2
 338 0220 7B68     		ldr	r3, [r7, #4]
 339 0222 93F81D24 		ldrb	r2, [r3, #1053]	@ zero_extendqisi2
 340 0226 B968     		ldr	r1, [r7, #8]
 341 0228 41F63453 		movw	r3, #7476
 342 022c 0B44     		add	r3, r3, r1
 343 022e 1B88     		ldrh	r3, [r3]
 344 0230 0293     		str	r3, [sp, #8]
 345 0232 0223     		movs	r3, #2
 346 0234 0193     		str	r3, [sp, #4]
 347 0236 0092     		str	r2, [sp]
 348 0238 2B46     		mov	r3, r5
 349 023a 2246     		mov	r2, r4
 350 023c 0146     		mov	r1, r0
 351 023e 7868     		ldr	r0, [r7, #4]
 352 0240 FFF7FEFF 		bl	USBH_OpenPipe
 206:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                 phost->device.address, phost->device.speed, USB_EP_TYPE_BULK,
 207:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                 MTP_Handle->DataInEpSize);
 208:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 209:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_LL_SetToggle(phost, MTP_Handle->DataInPipe, 0U);
 353              		.loc 1 209 3
 354 0244 BA68     		ldr	r2, [r7, #8]
 355 0246 41F62C53 		movw	r3, #7468
 356 024a 1344     		add	r3, r3, r2
 357 024c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 358 024e 0022     		movs	r2, #0
 359 0250 1946     		mov	r1, r3
 360 0252 7868     		ldr	r0, [r7, #4]
 361 0254 FFF7FEFF 		bl	USBH_LL_SetToggle
 210:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 211:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   endpoint = MTP_FindDataOutEndpoint(phost);
 362              		.loc 1 211 14
ARM GAS  /tmp/ccILjF3V.s 			page 11


 363 0258 7868     		ldr	r0, [r7, #4]
 364 025a FFF7FEFF 		bl	MTP_FindDataOutEndpoint
 365 025e 0346     		mov	r3, r0
 366 0260 7B73     		strb	r3, [r7, #13]
 212:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((endpoint == 0xFFU) || (endpoint >= USBH_MAX_NUM_ENDPOINTS))
 367              		.loc 1 212 6
 368 0262 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 369 0264 FF2B     		cmp	r3, #255
 370 0266 02D0     		beq	.L11
 371              		.loc 1 212 27 discriminator 1
 372 0268 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 373 026a 012B     		cmp	r3, #1
 374 026c 01D9     		bls	.L12
 375              	.L11:
 213:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 214:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_DbgLog("Invalid Data OUT endpoint number");
 215:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     return USBH_FAIL;
 376              		.loc 1 215 12
 377 026e 0223     		movs	r3, #2
 378 0270 75E0     		b	.L4
 379              	.L12:
 216:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 217:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 218:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /*Collect the DATA OUT endpoint address and length*/
 219:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->DataOutEp = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddr
 380              		.loc 1 219 86
 381 0272 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 382 0274 797B     		ldrb	r1, [r7, #13]	@ zero_extendqisi2
 383 0276 7A68     		ldr	r2, [r7, #4]
 384 0278 0131     		adds	r1, r1, #1
 385 027a C900     		lsls	r1, r1, #3
 386 027c 1A20     		movs	r0, #26
 387 027e 00FB03F3 		mul	r3, r0, r3
 388 0282 0B44     		add	r3, r3, r1
 389 0284 1344     		add	r3, r3, r2
 390 0286 03F24643 		addw	r3, r3, #1094
 391 028a 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 392              		.loc 1 219 25
 393 028c BA68     		ldr	r2, [r7, #8]
 394 028e 41F62F53 		movw	r3, #7471
 395 0292 1344     		add	r3, r3, r2
 396 0294 0A46     		mov	r2, r1
 397 0296 1A70     		strb	r2, [r3]
 220:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->DataOutEpSize = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacke
 398              		.loc 1 220 90
 399 0298 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 400 029a 797B     		ldrb	r1, [r7, #13]	@ zero_extendqisi2
 401 029c 7A68     		ldr	r2, [r7, #4]
 402 029e 0131     		adds	r1, r1, #1
 403 02a0 C900     		lsls	r1, r1, #3
 404 02a2 1A20     		movs	r0, #26
 405 02a4 00FB03F3 		mul	r3, r0, r3
 406 02a8 0B44     		add	r3, r3, r1
 407 02aa 1344     		add	r3, r3, r2
 408 02ac 03F58963 		add	r3, r3, #1096
 409 02b0 1988     		ldrh	r1, [r3]
 410              		.loc 1 220 29
ARM GAS  /tmp/ccILjF3V.s 			page 12


 411 02b2 BA68     		ldr	r2, [r7, #8]
 412 02b4 41F63253 		movw	r3, #7474
 413 02b8 1344     		add	r3, r3, r2
 414 02ba 0A46     		mov	r2, r1	@ movhi
 415 02bc 1A80     		strh	r2, [r3]	@ movhi
 221:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->DataOutPipe = USBH_AllocPipe(phost, MTP_Handle->DataOutEp);
 416              		.loc 1 221 29
 417 02be BA68     		ldr	r2, [r7, #8]
 418 02c0 41F62F53 		movw	r3, #7471
 419 02c4 1344     		add	r3, r3, r2
 420 02c6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 421 02c8 1946     		mov	r1, r3
 422 02ca 7868     		ldr	r0, [r7, #4]
 423 02cc FFF7FEFF 		bl	USBH_AllocPipe
 424 02d0 0346     		mov	r3, r0
 425 02d2 1946     		mov	r1, r3
 426              		.loc 1 221 27
 427 02d4 BA68     		ldr	r2, [r7, #8]
 428 02d6 41F62D53 		movw	r3, #7469
 429 02da 1344     		add	r3, r3, r2
 430 02dc 0A46     		mov	r2, r1
 431 02de 1A70     		strb	r2, [r3]
 222:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 223:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Open pipe for DATA OUT endpoint */
 224:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_OpenPipe(phost, MTP_Handle->DataOutPipe, MTP_Handle->DataOutEp,
 432              		.loc 1 224 3
 433 02e0 BA68     		ldr	r2, [r7, #8]
 434 02e2 41F62D53 		movw	r3, #7469
 435 02e6 1344     		add	r3, r3, r2
 436 02e8 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 437 02ea BA68     		ldr	r2, [r7, #8]
 438 02ec 41F62F53 		movw	r3, #7471
 439 02f0 1344     		add	r3, r3, r2
 440 02f2 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 441 02f4 7B68     		ldr	r3, [r7, #4]
 442 02f6 93F81C54 		ldrb	r5, [r3, #1052]	@ zero_extendqisi2
 443 02fa 7B68     		ldr	r3, [r7, #4]
 444 02fc 93F81D24 		ldrb	r2, [r3, #1053]	@ zero_extendqisi2
 445 0300 B968     		ldr	r1, [r7, #8]
 446 0302 41F63253 		movw	r3, #7474
 447 0306 0B44     		add	r3, r3, r1
 448 0308 1B88     		ldrh	r3, [r3]
 449 030a 0293     		str	r3, [sp, #8]
 450 030c 0223     		movs	r3, #2
 451 030e 0193     		str	r3, [sp, #4]
 452 0310 0092     		str	r2, [sp]
 453 0312 2B46     		mov	r3, r5
 454 0314 2246     		mov	r2, r4
 455 0316 0146     		mov	r1, r0
 456 0318 7868     		ldr	r0, [r7, #4]
 457 031a FFF7FEFF 		bl	USBH_OpenPipe
 225:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                 phost->device.address, phost->device.speed, USB_EP_TYPE_BULK,
 226:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                 MTP_Handle->DataOutEpSize);
 227:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 228:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_LL_SetToggle(phost, MTP_Handle->DataOutPipe, 0U);
 458              		.loc 1 228 3
 459 031e BA68     		ldr	r2, [r7, #8]
ARM GAS  /tmp/ccILjF3V.s 			page 13


 460 0320 41F62D53 		movw	r3, #7469
 461 0324 1344     		add	r3, r3, r2
 462 0326 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 463 0328 0022     		movs	r2, #0
 464 032a 1946     		mov	r1, r3
 465 032c 7868     		ldr	r0, [r7, #4]
 466 032e FFF7FEFF 		bl	USBH_LL_SetToggle
 229:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 230:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->state = MTP_OPENSESSION;
 467              		.loc 1 230 21
 468 0332 BA68     		ldr	r2, [r7, #8]
 469 0334 41F63853 		movw	r3, #7480
 470 0338 1344     		add	r3, r3, r2
 471 033a 0222     		movs	r2, #2
 472 033c 1A70     		strb	r2, [r3]
 231:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->is_ready = 0U;
 473              		.loc 1 231 24
 474 033e BA68     		ldr	r2, [r7, #8]
 475 0340 42F2CC13 		movw	r3, #8652
 476 0344 1344     		add	r3, r3, r2
 477 0346 0022     		movs	r2, #0
 478 0348 1A60     		str	r2, [r3]
 232:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_Handle->events.state = MTP_EVENTS_INIT;
 479              		.loc 1 232 28
 480 034a BA68     		ldr	r2, [r7, #8]
 481 034c 41F63C53 		movw	r3, #7484
 482 0350 1344     		add	r3, r3, r2
 483 0352 0022     		movs	r2, #0
 484 0354 1A70     		strb	r2, [r3]
 233:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 234:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_PTP_Init(phost);
 485              		.loc 1 234 10
 486 0356 7868     		ldr	r0, [r7, #4]
 487 0358 FFF7FEFF 		bl	USBH_PTP_Init
 488 035c 0346     		mov	r3, r0
 489              	.L4:
 235:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 490              		.loc 1 235 1
 491 035e 1846     		mov	r0, r3
 492 0360 1037     		adds	r7, r7, #16
 493              	.LCFI3:
 494              		.cfi_def_cfa_offset 16
 495 0362 BD46     		mov	sp, r7
 496              	.LCFI4:
 497              		.cfi_def_cfa_register 13
 498              		@ sp needed
 499 0364 B0BD     		pop	{r4, r5, r7, pc}
 500              		.cfi_endproc
 501              	.LFE338:
 503              		.section	.text.MTP_FindCtlEndpoint,"ax",%progbits
 504              		.align	1
 505              		.syntax unified
 506              		.thumb
 507              		.thumb_func
 508              		.fpu fpv5-d16
 510              	MTP_FindCtlEndpoint:
 511              	.LFB339:
ARM GAS  /tmp/ccILjF3V.s 			page 14


 236:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 237:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 238:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  Find MTP Ctl interface
 239:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 240:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 241:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 242:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindCtlEndpoint(USBH_HandleTypeDef *phost)
 243:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 512              		.loc 1 243 1
 513              		.cfi_startproc
 514              		@ args = 0, pretend = 0, frame = 16
 515              		@ frame_needed = 1, uses_anonymous_args = 0
 516              		@ link register save eliminated.
 517 0000 80B4     		push	{r7}
 518              	.LCFI5:
 519              		.cfi_def_cfa_offset 4
 520              		.cfi_offset 7, -4
 521 0002 85B0     		sub	sp, sp, #20
 522              	.LCFI6:
 523              		.cfi_def_cfa_offset 24
 524 0004 00AF     		add	r7, sp, #0
 525              	.LCFI7:
 526              		.cfi_def_cfa_register 7
 527 0006 7860     		str	r0, [r7, #4]
 244:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 245:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 246:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   for (interface = 0U;  interface < USBH_MAX_NUM_INTERFACES ; interface ++)
 528              		.loc 1 246 18
 529 0008 0023     		movs	r3, #0
 530 000a FB73     		strb	r3, [r7, #15]
 531              		.loc 1 246 3
 532 000c 48E0     		b	.L14
 533              	.L20:
 247:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 248:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if (phost->device.CfgDesc.Itf_Desc[interface].bInterfaceClass == USB_MTP_CLASS)
 534              		.loc 1 248 50
 535 000e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 536 0010 7A68     		ldr	r2, [r7, #4]
 537 0012 1A21     		movs	r1, #26
 538 0014 01FB03F3 		mul	r3, r1, r3
 539 0018 1344     		add	r3, r3, r2
 540 001a 03F24743 		addw	r3, r3, #1095
 541 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 542              		.loc 1 248 8
 543 0020 062B     		cmp	r3, #6
 544 0022 3AD1     		bne	.L15
 249:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 250:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       for (endpoint = 0U;  endpoint < USBH_MAX_NUM_ENDPOINTS ; endpoint ++)
 545              		.loc 1 250 21
 546 0024 0023     		movs	r3, #0
 547 0026 BB73     		strb	r3, [r7, #14]
 548              		.loc 1 250 7
 549 0028 34E0     		b	.L16
 550              	.L19:
 251:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 252:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         if ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddress & 0x80U) 
 551              		.loc 1 252 73
ARM GAS  /tmp/ccILjF3V.s 			page 15


 552 002a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 553 002c B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 554 002e 7A68     		ldr	r2, [r7, #4]
 555 0030 0131     		adds	r1, r1, #1
 556 0032 C900     		lsls	r1, r1, #3
 557 0034 1A20     		movs	r0, #26
 558 0036 00FB03F3 		mul	r3, r0, r3
 559 003a 0B44     		add	r3, r3, r1
 560 003c 1344     		add	r3, r3, r2
 561 003e 03F24643 		addw	r3, r3, #1094
 562 0042 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 563              		.loc 1 252 13
 564 0044 5BB2     		sxtb	r3, r3
 565              		.loc 1 252 12
 566 0046 002B     		cmp	r3, #0
 567 0048 21DA     		bge	.L17
 253:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 568              		.loc 1 253 73 discriminator 1
 569 004a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 570 004c B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 571 004e 7A68     		ldr	r2, [r7, #4]
 572 0050 0131     		adds	r1, r1, #1
 573 0052 C900     		lsls	r1, r1, #3
 574 0054 1A20     		movs	r0, #26
 575 0056 00FB03F3 		mul	r3, r0, r3
 576 005a 0B44     		add	r3, r3, r1
 577 005c 1344     		add	r3, r3, r2
 578 005e 03F58963 		add	r3, r3, #1096
 579 0062 1B88     		ldrh	r3, [r3]
 252:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 580              		.loc 1 252 100 discriminator 1
 581 0064 002B     		cmp	r3, #0
 582 0066 12D0     		beq	.L17
 254:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bmAttributes & USBH_EP_IN
 583              		.loc 1 254 74
 584 0068 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 585 006a B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 586 006c 7A68     		ldr	r2, [r7, #4]
 587 006e 0131     		adds	r1, r1, #1
 588 0070 C900     		lsls	r1, r1, #3
 589 0072 1A20     		movs	r0, #26
 590 0074 00FB03F3 		mul	r3, r0, r3
 591 0078 0B44     		add	r3, r3, r1
 592 007a 1344     		add	r3, r3, r2
 593 007c 03F24743 		addw	r3, r3, #1095
 594 0080 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 595              		.loc 1 254 88
 596 0082 03F00303 		and	r3, r3, #3
 253:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 597              		.loc 1 253 95
 598 0086 032B     		cmp	r3, #3
 599 0088 01D1     		bne	.L17
 255:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 256:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           return endpoint;
 600              		.loc 1 256 18
 601 008a BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 602 008c 0CE0     		b	.L18
ARM GAS  /tmp/ccILjF3V.s 			page 16


 603              	.L17:
 250:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 604              		.loc 1 250 73 discriminator 2
 605 008e BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 606 0090 0133     		adds	r3, r3, #1
 607 0092 BB73     		strb	r3, [r7, #14]
 608              	.L16:
 250:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 609              		.loc 1 250 7 discriminator 1
 610 0094 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 611 0096 012B     		cmp	r3, #1
 612 0098 C7D9     		bls	.L19
 613              	.L15:
 246:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 614              		.loc 1 246 73 discriminator 2
 615 009a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 616 009c 0133     		adds	r3, r3, #1
 617 009e FB73     		strb	r3, [r7, #15]
 618              	.L14:
 246:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 619              		.loc 1 246 3 discriminator 1
 620 00a0 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 621 00a2 012B     		cmp	r3, #1
 622 00a4 B3D9     		bls	.L20
 257:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 258:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 259:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 260:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 261:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 262:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return 0xFFU; /* Invalid Endpoint */
 623              		.loc 1 262 10
 624 00a6 FF23     		movs	r3, #255
 625              	.L18:
 263:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 626              		.loc 1 263 1
 627 00a8 1846     		mov	r0, r3
 628 00aa 1437     		adds	r7, r7, #20
 629              	.LCFI8:
 630              		.cfi_def_cfa_offset 4
 631 00ac BD46     		mov	sp, r7
 632              	.LCFI9:
 633              		.cfi_def_cfa_register 13
 634              		@ sp needed
 635 00ae 5DF8047B 		ldr	r7, [sp], #4
 636              	.LCFI10:
 637              		.cfi_restore 7
 638              		.cfi_def_cfa_offset 0
 639 00b2 7047     		bx	lr
 640              		.cfi_endproc
 641              	.LFE339:
 643              		.section	.text.MTP_FindDataOutEndpoint,"ax",%progbits
 644              		.align	1
 645              		.syntax unified
 646              		.thumb
 647              		.thumb_func
 648              		.fpu fpv5-d16
 650              	MTP_FindDataOutEndpoint:
ARM GAS  /tmp/ccILjF3V.s 			page 17


 651              	.LFB340:
 264:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 265:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 266:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 267:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  Find MTP DATA OUT interface
 268:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 269:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 270:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 271:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataOutEndpoint(USBH_HandleTypeDef *phost)
 272:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 652              		.loc 1 272 1
 653              		.cfi_startproc
 654              		@ args = 0, pretend = 0, frame = 16
 655              		@ frame_needed = 1, uses_anonymous_args = 0
 656              		@ link register save eliminated.
 657 0000 80B4     		push	{r7}
 658              	.LCFI11:
 659              		.cfi_def_cfa_offset 4
 660              		.cfi_offset 7, -4
 661 0002 85B0     		sub	sp, sp, #20
 662              	.LCFI12:
 663              		.cfi_def_cfa_offset 24
 664 0004 00AF     		add	r7, sp, #0
 665              	.LCFI13:
 666              		.cfi_def_cfa_register 7
 667 0006 7860     		str	r0, [r7, #4]
 273:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 274:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 275:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   for (interface = 0U;  interface < USBH_MAX_NUM_INTERFACES ; interface ++)
 668              		.loc 1 275 18
 669 0008 0023     		movs	r3, #0
 670 000a FB73     		strb	r3, [r7, #15]
 671              		.loc 1 275 3
 672 000c 48E0     		b	.L22
 673              	.L28:
 276:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 277:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if (phost->device.CfgDesc.Itf_Desc[interface].bInterfaceClass == USB_MTP_CLASS)
 674              		.loc 1 277 50
 675 000e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 676 0010 7A68     		ldr	r2, [r7, #4]
 677 0012 1A21     		movs	r1, #26
 678 0014 01FB03F3 		mul	r3, r1, r3
 679 0018 1344     		add	r3, r3, r2
 680 001a 03F24743 		addw	r3, r3, #1095
 681 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 682              		.loc 1 277 8
 683 0020 062B     		cmp	r3, #6
 684 0022 3AD1     		bne	.L23
 278:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 279:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       for (endpoint = 0U;  endpoint < USBH_MAX_NUM_ENDPOINTS ; endpoint ++)
 685              		.loc 1 279 21
 686 0024 0023     		movs	r3, #0
 687 0026 BB73     		strb	r3, [r7, #14]
 688              		.loc 1 279 7
 689 0028 34E0     		b	.L24
 690              	.L27:
 280:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
ARM GAS  /tmp/ccILjF3V.s 			page 18


 281:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 282:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         if (((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddress & 0x80U)
 691              		.loc 1 282 74
 692 002a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 693 002c B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 694 002e 7A68     		ldr	r2, [r7, #4]
 695 0030 0131     		adds	r1, r1, #1
 696 0032 C900     		lsls	r1, r1, #3
 697 0034 1A20     		movs	r0, #26
 698 0036 00FB03F3 		mul	r3, r0, r3
 699 003a 0B44     		add	r3, r3, r1
 700 003c 1344     		add	r3, r3, r2
 701 003e 03F24643 		addw	r3, r3, #1094
 702 0042 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 703              		.loc 1 282 101
 704 0044 5BB2     		sxtb	r3, r3
 705              		.loc 1 282 12
 706 0046 002B     		cmp	r3, #0
 707 0048 21DB     		blt	.L25
 283:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 708              		.loc 1 283 73 discriminator 1
 709 004a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 710 004c B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 711 004e 7A68     		ldr	r2, [r7, #4]
 712 0050 0131     		adds	r1, r1, #1
 713 0052 C900     		lsls	r1, r1, #3
 714 0054 1A20     		movs	r0, #26
 715 0056 00FB03F3 		mul	r3, r0, r3
 716 005a 0B44     		add	r3, r3, r1
 717 005c 1344     		add	r3, r3, r2
 718 005e 03F58963 		add	r3, r3, #1096
 719 0062 1B88     		ldrh	r3, [r3]
 282:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 720              		.loc 1 282 108 discriminator 1
 721 0064 002B     		cmp	r3, #0
 722 0066 12D0     		beq	.L25
 284:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bmAttributes & USBH_EP_BU
 723              		.loc 1 284 74
 724 0068 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 725 006a B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 726 006c 7A68     		ldr	r2, [r7, #4]
 727 006e 0131     		adds	r1, r1, #1
 728 0070 C900     		lsls	r1, r1, #3
 729 0072 1A20     		movs	r0, #26
 730 0074 00FB03F3 		mul	r3, r0, r3
 731 0078 0B44     		add	r3, r3, r1
 732 007a 1344     		add	r3, r3, r2
 733 007c 03F24743 		addw	r3, r3, #1095
 734 0080 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 735              		.loc 1 284 88
 736 0082 03F00203 		and	r3, r3, #2
 283:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 737              		.loc 1 283 95
 738 0086 002B     		cmp	r3, #0
 739 0088 01D0     		beq	.L25
 285:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 286:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           return endpoint;
ARM GAS  /tmp/ccILjF3V.s 			page 19


 740              		.loc 1 286 18
 741 008a BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 742 008c 0CE0     		b	.L26
 743              	.L25:
 279:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 744              		.loc 1 279 73 discriminator 2
 745 008e BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 746 0090 0133     		adds	r3, r3, #1
 747 0092 BB73     		strb	r3, [r7, #14]
 748              	.L24:
 279:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 749              		.loc 1 279 7 discriminator 1
 750 0094 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 751 0096 012B     		cmp	r3, #1
 752 0098 C7D9     		bls	.L27
 753              	.L23:
 275:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 754              		.loc 1 275 73 discriminator 2
 755 009a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 756 009c 0133     		adds	r3, r3, #1
 757 009e FB73     		strb	r3, [r7, #15]
 758              	.L22:
 275:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 759              		.loc 1 275 3 discriminator 1
 760 00a0 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 761 00a2 012B     		cmp	r3, #1
 762 00a4 B3D9     		bls	.L28
 287:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 288:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 289:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 290:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 291:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 292:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return 0xFFU; /* Invalid Endpoint */
 763              		.loc 1 292 10
 764 00a6 FF23     		movs	r3, #255
 765              	.L26:
 293:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 766              		.loc 1 293 1
 767 00a8 1846     		mov	r0, r3
 768 00aa 1437     		adds	r7, r7, #20
 769              	.LCFI14:
 770              		.cfi_def_cfa_offset 4
 771 00ac BD46     		mov	sp, r7
 772              	.LCFI15:
 773              		.cfi_def_cfa_register 13
 774              		@ sp needed
 775 00ae 5DF8047B 		ldr	r7, [sp], #4
 776              	.LCFI16:
 777              		.cfi_restore 7
 778              		.cfi_def_cfa_offset 0
 779 00b2 7047     		bx	lr
 780              		.cfi_endproc
 781              	.LFE340:
 783              		.section	.text.MTP_FindDataInEndpoint,"ax",%progbits
 784              		.align	1
 785              		.syntax unified
 786              		.thumb
ARM GAS  /tmp/ccILjF3V.s 			page 20


 787              		.thumb_func
 788              		.fpu fpv5-d16
 790              	MTP_FindDataInEndpoint:
 791              	.LFB341:
 294:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 295:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 296:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  Find MTP DATA IN interface
 297:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 298:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 299:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 300:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static uint8_t MTP_FindDataInEndpoint(USBH_HandleTypeDef *phost)
 301:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 792              		.loc 1 301 1
 793              		.cfi_startproc
 794              		@ args = 0, pretend = 0, frame = 16
 795              		@ frame_needed = 1, uses_anonymous_args = 0
 796              		@ link register save eliminated.
 797 0000 80B4     		push	{r7}
 798              	.LCFI17:
 799              		.cfi_def_cfa_offset 4
 800              		.cfi_offset 7, -4
 801 0002 85B0     		sub	sp, sp, #20
 802              	.LCFI18:
 803              		.cfi_def_cfa_offset 24
 804 0004 00AF     		add	r7, sp, #0
 805              	.LCFI19:
 806              		.cfi_def_cfa_register 7
 807 0006 7860     		str	r0, [r7, #4]
 302:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint8_t interface, endpoint;
 303:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 304:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   for (interface = 0U;  interface < USBH_MAX_NUM_INTERFACES; interface ++)
 808              		.loc 1 304 18
 809 0008 0023     		movs	r3, #0
 810 000a FB73     		strb	r3, [r7, #15]
 811              		.loc 1 304 3
 812 000c 48E0     		b	.L30
 813              	.L36:
 305:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 306:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     if (phost->device.CfgDesc.Itf_Desc[interface].bInterfaceClass == USB_MTP_CLASS)
 814              		.loc 1 306 50
 815 000e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 816 0010 7A68     		ldr	r2, [r7, #4]
 817 0012 1A21     		movs	r1, #26
 818 0014 01FB03F3 		mul	r3, r1, r3
 819 0018 1344     		add	r3, r3, r2
 820 001a 03F24743 		addw	r3, r3, #1095
 821 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 822              		.loc 1 306 8
 823 0020 062B     		cmp	r3, #6
 824 0022 3AD1     		bne	.L31
 307:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 308:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       for (endpoint = 0U;  endpoint < USBH_MAX_NUM_ENDPOINTS; endpoint ++)
 825              		.loc 1 308 21
 826 0024 0023     		movs	r3, #0
 827 0026 BB73     		strb	r3, [r7, #14]
 828              		.loc 1 308 7
 829 0028 34E0     		b	.L32
ARM GAS  /tmp/ccILjF3V.s 			page 21


 830              	.L35:
 309:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 310:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 311:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         if ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bEndpointAddress & 0x80U) 
 831              		.loc 1 311 73
 832 002a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 833 002c B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 834 002e 7A68     		ldr	r2, [r7, #4]
 835 0030 0131     		adds	r1, r1, #1
 836 0032 C900     		lsls	r1, r1, #3
 837 0034 1A20     		movs	r0, #26
 838 0036 00FB03F3 		mul	r3, r0, r3
 839 003a 0B44     		add	r3, r3, r1
 840 003c 1344     		add	r3, r3, r2
 841 003e 03F24643 		addw	r3, r3, #1094
 842 0042 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 843              		.loc 1 311 13
 844 0044 5BB2     		sxtb	r3, r3
 845              		.loc 1 311 12
 846 0046 002B     		cmp	r3, #0
 847 0048 21DA     		bge	.L33
 312:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 848              		.loc 1 312 73 discriminator 1
 849 004a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 850 004c B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 851 004e 7A68     		ldr	r2, [r7, #4]
 852 0050 0131     		adds	r1, r1, #1
 853 0052 C900     		lsls	r1, r1, #3
 854 0054 1A20     		movs	r0, #26
 855 0056 00FB03F3 		mul	r3, r0, r3
 856 005a 0B44     		add	r3, r3, r1
 857 005c 1344     		add	r3, r3, r2
 858 005e 03F58963 		add	r3, r3, #1096
 859 0062 1B88     		ldrh	r3, [r3]
 311:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 860              		.loc 1 311 100 discriminator 1
 861 0064 002B     		cmp	r3, #0
 862 0066 12D0     		beq	.L33
 313:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             ((phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].bmAttributes & USBH_EP_BU
 863              		.loc 1 313 74
 864 0068 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 865 006a B97B     		ldrb	r1, [r7, #14]	@ zero_extendqisi2
 866 006c 7A68     		ldr	r2, [r7, #4]
 867 006e 0131     		adds	r1, r1, #1
 868 0070 C900     		lsls	r1, r1, #3
 869 0072 1A20     		movs	r0, #26
 870 0074 00FB03F3 		mul	r3, r0, r3
 871 0078 0B44     		add	r3, r3, r1
 872 007a 1344     		add	r3, r3, r2
 873 007c 03F24743 		addw	r3, r3, #1095
 874 0080 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 875              		.loc 1 313 88
 876 0082 03F00203 		and	r3, r3, #2
 312:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****             (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[endpoint].wMaxPacketSize > 0U) &&
 877              		.loc 1 312 95
 878 0086 002B     		cmp	r3, #0
 879 0088 01D0     		beq	.L33
ARM GAS  /tmp/ccILjF3V.s 			page 22


 314:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 315:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           return endpoint;
 880              		.loc 1 315 18
 881 008a BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 882 008c 0CE0     		b	.L34
 883              	.L33:
 308:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 884              		.loc 1 308 72 discriminator 2
 885 008e BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 886 0090 0133     		adds	r3, r3, #1
 887 0092 BB73     		strb	r3, [r7, #14]
 888              	.L32:
 308:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 889              		.loc 1 308 7 discriminator 1
 890 0094 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 891 0096 012B     		cmp	r3, #1
 892 0098 C7D9     		bls	.L35
 893              	.L31:
 304:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 894              		.loc 1 304 72 discriminator 2
 895 009a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 896 009c 0133     		adds	r3, r3, #1
 897 009e FB73     		strb	r3, [r7, #15]
 898              	.L30:
 304:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 899              		.loc 1 304 3 discriminator 1
 900 00a0 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 901 00a2 012B     		cmp	r3, #1
 902 00a4 B3D9     		bls	.L36
 316:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 317:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 318:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 319:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 320:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 321:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return 0xFFU; /* Invalid Endpoint */
 903              		.loc 1 321 10
 904 00a6 FF23     		movs	r3, #255
 905              	.L34:
 322:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 906              		.loc 1 322 1
 907 00a8 1846     		mov	r0, r3
 908 00aa 1437     		adds	r7, r7, #20
 909              	.LCFI20:
 910              		.cfi_def_cfa_offset 4
 911 00ac BD46     		mov	sp, r7
 912              	.LCFI21:
 913              		.cfi_def_cfa_register 13
 914              		@ sp needed
 915 00ae 5DF8047B 		ldr	r7, [sp], #4
 916              	.LCFI22:
 917              		.cfi_restore 7
 918              		.cfi_def_cfa_offset 0
 919 00b2 7047     		bx	lr
 920              		.cfi_endproc
 921              	.LFE341:
 923              		.section	.text.USBH_MTP_InterfaceDeInit,"ax",%progbits
 924              		.align	1
ARM GAS  /tmp/ccILjF3V.s 			page 23


 925              		.syntax unified
 926              		.thumb
 927              		.thumb_func
 928              		.fpu fpv5-d16
 930              	USBH_MTP_InterfaceDeInit:
 931              	.LFB342:
 323:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 324:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 325:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 326:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_InterfaceDeInit
 327:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function DeInit the Pipes used for the MTP class.
 328:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 329:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 330:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 331:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_InterfaceDeInit(USBH_HandleTypeDef *phost)
 332:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 932              		.loc 1 332 1
 933              		.cfi_startproc
 934              		@ args = 0, pretend = 0, frame = 16
 935              		@ frame_needed = 1, uses_anonymous_args = 0
 936 0000 80B5     		push	{r7, lr}
 937              	.LCFI23:
 938              		.cfi_def_cfa_offset 8
 939              		.cfi_offset 7, -8
 940              		.cfi_offset 14, -4
 941 0002 84B0     		sub	sp, sp, #16
 942              	.LCFI24:
 943              		.cfi_def_cfa_offset 24
 944 0004 00AF     		add	r7, sp, #0
 945              	.LCFI25:
 946              		.cfi_def_cfa_register 7
 947 0006 7860     		str	r0, [r7, #4]
 333:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 948              		.loc 1 333 61
 949 0008 7B68     		ldr	r3, [r7, #4]
 950 000a D3F87C34 		ldr	r3, [r3, #1148]
 951              		.loc 1 333 22
 952 000e DB69     		ldr	r3, [r3, #28]
 953 0010 FB60     		str	r3, [r7, #12]
 334:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 335:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->DataOutPipe != 0U)
 954              		.loc 1 335 17
 955 0012 FA68     		ldr	r2, [r7, #12]
 956 0014 41F62D53 		movw	r3, #7469
 957 0018 1344     		add	r3, r3, r2
 958 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 959              		.loc 1 335 6
 960 001c 002B     		cmp	r3, #0
 961 001e 17D0     		beq	.L38
 336:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 337:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_ClosePipe(phost, MTP_Handle->DataOutPipe);
 962              		.loc 1 337 5
 963 0020 FA68     		ldr	r2, [r7, #12]
 964 0022 41F62D53 		movw	r3, #7469
 965 0026 1344     		add	r3, r3, r2
 966 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 967 002a 1946     		mov	r1, r3
ARM GAS  /tmp/ccILjF3V.s 			page 24


 968 002c 7868     		ldr	r0, [r7, #4]
 969 002e FFF7FEFF 		bl	USBH_ClosePipe
 338:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe(phost, MTP_Handle->DataOutPipe);
 970              		.loc 1 338 5
 971 0032 FA68     		ldr	r2, [r7, #12]
 972 0034 41F62D53 		movw	r3, #7469
 973 0038 1344     		add	r3, r3, r2
 974 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 975 003c 1946     		mov	r1, r3
 976 003e 7868     		ldr	r0, [r7, #4]
 977 0040 FFF7FEFF 		bl	USBH_FreePipe
 339:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataOutPipe = 0U;     /* Reset the Channel as Free */
 978              		.loc 1 339 29
 979 0044 FA68     		ldr	r2, [r7, #12]
 980 0046 41F62D53 		movw	r3, #7469
 981 004a 1344     		add	r3, r3, r2
 982 004c 0022     		movs	r2, #0
 983 004e 1A70     		strb	r2, [r3]
 984              	.L38:
 340:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 341:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 342:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->DataInPipe != 0U)
 985              		.loc 1 342 17
 986 0050 FA68     		ldr	r2, [r7, #12]
 987 0052 41F62C53 		movw	r3, #7468
 988 0056 1344     		add	r3, r3, r2
 989 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 990              		.loc 1 342 6
 991 005a 002B     		cmp	r3, #0
 992 005c 17D0     		beq	.L39
 343:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 344:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_ClosePipe(phost, MTP_Handle->DataInPipe);
 993              		.loc 1 344 5
 994 005e FA68     		ldr	r2, [r7, #12]
 995 0060 41F62C53 		movw	r3, #7468
 996 0064 1344     		add	r3, r3, r2
 997 0066 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 998 0068 1946     		mov	r1, r3
 999 006a 7868     		ldr	r0, [r7, #4]
 1000 006c FFF7FEFF 		bl	USBH_ClosePipe
 345:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe(phost, MTP_Handle->DataInPipe);
 1001              		.loc 1 345 5
 1002 0070 FA68     		ldr	r2, [r7, #12]
 1003 0072 41F62C53 		movw	r3, #7468
 1004 0076 1344     		add	r3, r3, r2
 1005 0078 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1006 007a 1946     		mov	r1, r3
 1007 007c 7868     		ldr	r0, [r7, #4]
 1008 007e FFF7FEFF 		bl	USBH_FreePipe
 346:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->DataInPipe = 0U;     /* Reset the Channel as Free */
 1009              		.loc 1 346 28
 1010 0082 FA68     		ldr	r2, [r7, #12]
 1011 0084 41F62C53 		movw	r3, #7468
 1012 0088 1344     		add	r3, r3, r2
 1013 008a 0022     		movs	r2, #0
 1014 008c 1A70     		strb	r2, [r3]
 1015              	.L39:
ARM GAS  /tmp/ccILjF3V.s 			page 25


 347:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 348:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 349:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->NotificationPipe != 0U)
 1016              		.loc 1 349 17
 1017 008e FA68     		ldr	r2, [r7, #12]
 1018 0090 41F62E53 		movw	r3, #7470
 1019 0094 1344     		add	r3, r3, r2
 1020 0096 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1021              		.loc 1 349 6
 1022 0098 002B     		cmp	r3, #0
 1023 009a 17D0     		beq	.L40
 350:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 351:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_ClosePipe(phost, MTP_Handle->NotificationPipe);
 1024              		.loc 1 351 5
 1025 009c FA68     		ldr	r2, [r7, #12]
 1026 009e 41F62E53 		movw	r3, #7470
 1027 00a2 1344     		add	r3, r3, r2
 1028 00a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1029 00a6 1946     		mov	r1, r3
 1030 00a8 7868     		ldr	r0, [r7, #4]
 1031 00aa FFF7FEFF 		bl	USBH_ClosePipe
 352:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_FreePipe(phost, MTP_Handle->NotificationPipe);
 1032              		.loc 1 352 5
 1033 00ae FA68     		ldr	r2, [r7, #12]
 1034 00b0 41F62E53 		movw	r3, #7470
 1035 00b4 1344     		add	r3, r3, r2
 1036 00b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1037 00b8 1946     		mov	r1, r3
 1038 00ba 7868     		ldr	r0, [r7, #4]
 1039 00bc FFF7FEFF 		bl	USBH_FreePipe
 353:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->NotificationPipe = 0U;     /* Reset the Channel as Free */
 1040              		.loc 1 353 34
 1041 00c0 FA68     		ldr	r2, [r7, #12]
 1042 00c2 41F62E53 		movw	r3, #7470
 1043 00c6 1344     		add	r3, r3, r2
 1044 00c8 0022     		movs	r2, #0
 1045 00ca 1A70     		strb	r2, [r3]
 1046              	.L40:
 354:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 355:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 356:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (phost->pActiveClass->pData != NULL)
 1047              		.loc 1 356 12
 1048 00cc 7B68     		ldr	r3, [r7, #4]
 1049 00ce D3F87C34 		ldr	r3, [r3, #1148]
 1050              		.loc 1 356 26
 1051 00d2 DB69     		ldr	r3, [r3, #28]
 1052              		.loc 1 356 6
 1053 00d4 002B     		cmp	r3, #0
 1054 00d6 0BD0     		beq	.L41
 357:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 358:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     USBH_free(phost->pActiveClass->pData);
 1055              		.loc 1 358 20
 1056 00d8 7B68     		ldr	r3, [r7, #4]
 1057 00da D3F87C34 		ldr	r3, [r3, #1148]
 1058              		.loc 1 358 5
 1059 00de DB69     		ldr	r3, [r3, #28]
 1060 00e0 1846     		mov	r0, r3
ARM GAS  /tmp/ccILjF3V.s 			page 26


 1061 00e2 FFF7FEFF 		bl	vPortFree
 359:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     phost->pActiveClass->pData = 0U;
 1062              		.loc 1 359 10
 1063 00e6 7B68     		ldr	r3, [r7, #4]
 1064 00e8 D3F87C34 		ldr	r3, [r3, #1148]
 1065              		.loc 1 359 32
 1066 00ec 0022     		movs	r2, #0
 1067 00ee DA61     		str	r2, [r3, #28]
 1068              	.L41:
 360:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 361:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 362:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_OK;
 1069              		.loc 1 362 10
 1070 00f0 0023     		movs	r3, #0
 363:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1071              		.loc 1 363 1
 1072 00f2 1846     		mov	r0, r3
 1073 00f4 1037     		adds	r7, r7, #16
 1074              	.LCFI26:
 1075              		.cfi_def_cfa_offset 8
 1076 00f6 BD46     		mov	sp, r7
 1077              	.LCFI27:
 1078              		.cfi_def_cfa_register 13
 1079              		@ sp needed
 1080 00f8 80BD     		pop	{r7, pc}
 1081              		.cfi_endproc
 1082              	.LFE342:
 1084              		.section	.text.USBH_MTP_ClassRequest,"ax",%progbits
 1085              		.align	1
 1086              		.syntax unified
 1087              		.thumb
 1088              		.thumb_func
 1089              		.fpu fpv5-d16
 1091              	USBH_MTP_ClassRequest:
 1092              	.LFB343:
 364:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 365:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 366:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_ClassRequest
 367:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function is responsible for handling Standard requests
 368:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         for MTP class.
 369:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 370:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 371:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 372:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_ClassRequest(USBH_HandleTypeDef *phost)
 373:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1093              		.loc 1 373 1
 1094              		.cfi_startproc
 1095              		@ args = 0, pretend = 0, frame = 8
 1096              		@ frame_needed = 1, uses_anonymous_args = 0
 1097 0000 80B5     		push	{r7, lr}
 1098              	.LCFI28:
 1099              		.cfi_def_cfa_offset 8
 1100              		.cfi_offset 7, -8
 1101              		.cfi_offset 14, -4
 1102 0002 82B0     		sub	sp, sp, #8
 1103              	.LCFI29:
 1104              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccILjF3V.s 			page 27


 1105 0004 00AF     		add	r7, sp, #0
 1106              	.LCFI30:
 1107              		.cfi_def_cfa_register 7
 1108 0006 7860     		str	r0, [r7, #4]
 374:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1U)
 375:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   phost->os_msg = (uint32_t)USBH_STATE_CHANGED_EVENT;
 1109              		.loc 1 375 17
 1110 0008 7B68     		ldr	r3, [r7, #4]
 1111 000a 0522     		movs	r2, #5
 1112 000c C3F8E024 		str	r2, [r3, #1248]
 376:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (osCMSIS < 0x20000U)
 377:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 378:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #else
 379:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1113              		.loc 1 379 9
 1114 0010 7B68     		ldr	r3, [r7, #4]
 1115 0012 D3F8D804 		ldr	r0, [r3, #1240]
 1116              		.loc 1 379 44
 1117 0016 7B68     		ldr	r3, [r7, #4]
 1118 0018 03F59C61 		add	r1, r3, #1248
 1119              		.loc 1 379 9
 1120 001c 0023     		movs	r3, #0
 1121 001e 0022     		movs	r2, #0
 1122 0020 FFF7FEFF 		bl	osMessageQueuePut
 380:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 381:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #else
 382:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Prevent unused argument(s) compilation warning */
 383:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   UNUSED(phost);
 384:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 385:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 386:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_OK;
 1123              		.loc 1 386 10
 1124 0024 0023     		movs	r3, #0
 387:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1125              		.loc 1 387 1
 1126 0026 1846     		mov	r0, r3
 1127 0028 0837     		adds	r7, r7, #8
 1128              	.LCFI31:
 1129              		.cfi_def_cfa_offset 8
 1130 002a BD46     		mov	sp, r7
 1131              	.LCFI32:
 1132              		.cfi_def_cfa_register 13
 1133              		@ sp needed
 1134 002c 80BD     		pop	{r7, pc}
 1135              		.cfi_endproc
 1136              	.LFE343:
 1138              		.section	.text.USBH_MTP_Process,"ax",%progbits
 1139              		.align	1
 1140              		.syntax unified
 1141              		.thumb
 1142              		.thumb_func
 1143              		.fpu fpv5-d16
 1145              	USBH_MTP_Process:
 1146              	.LFB344:
 388:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 389:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 390:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
ARM GAS  /tmp/ccILjF3V.s 			page 28


 391:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_Process
 392:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function is for managing state machine for MTP data transfers
 393:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 394:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 395:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 396:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Process(USBH_HandleTypeDef *phost)
 397:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1147              		.loc 1 397 1
 1148              		.cfi_startproc
 1149              		@ args = 0, pretend = 0, frame = 24
 1150              		@ frame_needed = 1, uses_anonymous_args = 0
 1151 0000 80B5     		push	{r7, lr}
 1152              	.LCFI33:
 1153              		.cfi_def_cfa_offset 8
 1154              		.cfi_offset 7, -8
 1155              		.cfi_offset 14, -4
 1156 0002 86B0     		sub	sp, sp, #24
 1157              	.LCFI34:
 1158              		.cfi_def_cfa_offset 32
 1159 0004 00AF     		add	r7, sp, #0
 1160              	.LCFI35:
 1161              		.cfi_def_cfa_register 7
 1162 0006 7860     		str	r0, [r7, #4]
 398:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 1163              		.loc 1 398 22
 1164 0008 0123     		movs	r3, #1
 1165 000a FB75     		strb	r3, [r7, #23]
 399:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1166              		.loc 1 399 61
 1167 000c 7B68     		ldr	r3, [r7, #4]
 1168 000e D3F87C34 		ldr	r3, [r3, #1148]
 1169              		.loc 1 399 22
 1170 0012 DB69     		ldr	r3, [r3, #28]
 1171 0014 FB60     		str	r3, [r7, #12]
 400:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t idx = 0U;
 1172              		.loc 1 400 12
 1173 0016 0023     		movs	r3, #0
 1174 0018 3B61     		str	r3, [r7, #16]
 401:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 402:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   switch (MTP_Handle->state)
 1175              		.loc 1 402 21
 1176 001a FA68     		ldr	r2, [r7, #12]
 1177 001c 41F63853 		movw	r3, #7480
 1178 0020 1344     		add	r3, r3, r2
 1179 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1180 0024 052B     		cmp	r3, #5
 1181 0026 00F2FE80 		bhi	.L62
 1182 002a 01A2     		adr	r2, .L48
 1183 002c 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1184              		.p2align 2
 1185              	.L48:
 1186 0030 F9010000 		.word	.L52+1
 1187 0034 87000000 		.word	.L51+1
 1188 0038 49000000 		.word	.L50+1
 1189 003c 27020000 		.word	.L62+1
 1190 0040 C7000000 		.word	.L49+1
 1191 0044 2F010000 		.word	.L47+1
ARM GAS  /tmp/ccILjF3V.s 			page 29


 1192              		.p2align 1
 1193              	.L50:
 403:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 404:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case  MTP_OPENSESSION:
 405:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       status = USBH_PTP_OpenSession(phost, 1U);  /* Session '0' is not valid */
 1194              		.loc 1 405 16
 1195 0048 0121     		movs	r1, #1
 1196 004a 7868     		ldr	r0, [r7, #4]
 1197 004c FFF7FEFF 		bl	USBH_PTP_OpenSession
 1198 0050 0346     		mov	r3, r0
 1199 0052 FB75     		strb	r3, [r7, #23]
 406:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 407:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (status == USBH_OK)
 1200              		.loc 1 407 10
 1201 0054 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1202 0056 002B     		cmp	r3, #0
 1203 0058 40F0E780 		bne	.L63
 408:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 409:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_UsrLog("MTP Session #0 Opened");
 410:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->state = MTP_GETDEVICEINFO;
 1204              		.loc 1 410 27
 1205 005c FA68     		ldr	r2, [r7, #12]
 1206 005e 41F63853 		movw	r3, #7480
 1207 0062 1344     		add	r3, r3, r2
 1208 0064 0122     		movs	r2, #1
 1209 0066 1A70     		strb	r2, [r3]
 411:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 412:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1U)
 413:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         phost->os_msg = (uint32_t)USBH_STATE_CHANGED_EVENT;
 1210              		.loc 1 413 23
 1211 0068 7B68     		ldr	r3, [r7, #4]
 1212 006a 0522     		movs	r2, #5
 1213 006c C3F8E024 		str	r2, [r3, #1248]
 414:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (osCMSIS < 0x20000U)
 415:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 416:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #else
 417:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1214              		.loc 1 417 15
 1215 0070 7B68     		ldr	r3, [r7, #4]
 1216 0072 D3F8D804 		ldr	r0, [r3, #1240]
 1217              		.loc 1 417 50
 1218 0076 7B68     		ldr	r3, [r7, #4]
 1219 0078 03F59C61 		add	r1, r3, #1248
 1220              		.loc 1 417 15
 1221 007c 0023     		movs	r3, #0
 1222 007e 0022     		movs	r2, #0
 1223 0080 FFF7FEFF 		bl	osMessageQueuePut
 418:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 419:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 420:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 421:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 1224              		.loc 1 421 7
 1225 0084 D1E0     		b	.L63
 1226              	.L51:
 422:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 423:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case MTP_GETDEVICEINFO:
 424:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       status = USBH_PTP_GetDeviceInfo(phost, &(MTP_Handle->info.devinfo));
ARM GAS  /tmp/ccILjF3V.s 			page 30


 1227              		.loc 1 424 16
 1228 0086 FB68     		ldr	r3, [r7, #12]
 1229 0088 1946     		mov	r1, r3
 1230 008a 7868     		ldr	r0, [r7, #4]
 1231 008c FFF7FEFF 		bl	USBH_PTP_GetDeviceInfo
 1232 0090 0346     		mov	r3, r0
 1233 0092 FB75     		strb	r3, [r7, #23]
 425:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 426:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (status == USBH_OK)
 1234              		.loc 1 426 10
 1235 0094 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1236 0096 002B     		cmp	r3, #0
 1237 0098 40F0C980 		bne	.L64
 427:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 428:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog(">>>>> MTP Device Information");
 429:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Standard version : %x", MTP_Handle->info.devinfo.StandardVersion);
 430:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Vendor ExtID : %s", (MTP_Handle->info.devinfo.VendorExtensionID == 6) ? "MTP" 
 431:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Functional mode : %s", (MTP_Handle->info.devinfo.FunctionalMode == 0U) ? "Stan
 432:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Number of Supported Operation(s) : %d", MTP_Handle->info.devinfo.OperationsSup
 433:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Number of Supported Events(s) : %d", MTP_Handle->info.devinfo.EventsSupported_
 434:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Number of Supported Proprieties : %d", MTP_Handle->info.devinfo.DeviceProperti
 435:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Manufacturer : %s", MTP_Handle->info.devinfo.Manufacturer);
 436:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Model : %s", MTP_Handle->info.devinfo.Model);
 437:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Device version : %s", MTP_Handle->info.devinfo.DeviceVersion);
 438:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Serial number : %s", MTP_Handle->info.devinfo.SerialNumber);
 439:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 440:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->state = MTP_GETSTORAGEIDS;
 1238              		.loc 1 440 27
 1239 009c FA68     		ldr	r2, [r7, #12]
 1240 009e 41F63853 		movw	r3, #7480
 1241 00a2 1344     		add	r3, r3, r2
 1242 00a4 0422     		movs	r2, #4
 1243 00a6 1A70     		strb	r2, [r3]
 441:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 442:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1U)
 443:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         phost->os_msg = (uint32_t)USBH_STATE_CHANGED_EVENT;
 1244              		.loc 1 443 23
 1245 00a8 7B68     		ldr	r3, [r7, #4]
 1246 00aa 0522     		movs	r2, #5
 1247 00ac C3F8E024 		str	r2, [r3, #1248]
 444:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (osCMSIS < 0x20000U)
 445:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 446:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #else
 447:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1248              		.loc 1 447 15
 1249 00b0 7B68     		ldr	r3, [r7, #4]
 1250 00b2 D3F8D804 		ldr	r0, [r3, #1240]
 1251              		.loc 1 447 50
 1252 00b6 7B68     		ldr	r3, [r7, #4]
 1253 00b8 03F59C61 		add	r1, r3, #1248
 1254              		.loc 1 447 15
 1255 00bc 0023     		movs	r3, #0
 1256 00be 0022     		movs	r2, #0
 1257 00c0 FFF7FEFF 		bl	osMessageQueuePut
 448:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 449:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 450:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
ARM GAS  /tmp/ccILjF3V.s 			page 31


 451:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 1258              		.loc 1 451 7
 1259 00c4 B3E0     		b	.L64
 1260              	.L49:
 452:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 453:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case MTP_GETSTORAGEIDS:
 454:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       status = USBH_PTP_GetStorageIds(phost, &(MTP_Handle->info.storids));
 1261              		.loc 1 454 16
 1262 00c6 FB68     		ldr	r3, [r7, #12]
 1263 00c8 03F60413 		addw	r3, r3, #2308
 1264 00cc 1946     		mov	r1, r3
 1265 00ce 7868     		ldr	r0, [r7, #4]
 1266 00d0 FFF7FEFF 		bl	USBH_PTP_GetStorageIds
 1267 00d4 0346     		mov	r3, r0
 1268 00d6 FB75     		strb	r3, [r7, #23]
 455:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 456:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (status == USBH_OK)
 1269              		.loc 1 456 10
 1270 00d8 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1271 00da 002B     		cmp	r3, #0
 1272 00dc 40F0A980 		bne	.L65
 457:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 458:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_DbgLog("Number of storage ID items : %d", MTP_Handle->info.storids.n);
 459:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         for (idx  = 0U; idx < MTP_Handle->info.storids.n; idx ++)
 1273              		.loc 1 459 19
 1274 00e0 0023     		movs	r3, #0
 1275 00e2 3B61     		str	r3, [r7, #16]
 1276              		.loc 1 459 9
 1277 00e4 02E0     		b	.L57
 1278              	.L58:
 1279              		.loc 1 459 63 discriminator 3
 1280 00e6 3B69     		ldr	r3, [r7, #16]
 1281 00e8 0133     		adds	r3, r3, #1
 1282 00ea 3B61     		str	r3, [r7, #16]
 1283              	.L57:
 1284              		.loc 1 459 55 discriminator 1
 1285 00ec FB68     		ldr	r3, [r7, #12]
 1286 00ee D3F80439 		ldr	r3, [r3, #2308]
 1287              		.loc 1 459 9 discriminator 1
 1288 00f2 3A69     		ldr	r2, [r7, #16]
 1289 00f4 9A42     		cmp	r2, r3
 1290 00f6 F6D3     		bcc	.L58
 460:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 461:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           USBH_DbgLog("storage#%d ID : %x", idx, MTP_Handle->info.storids.Storage[idx]);
 462:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 463:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 464:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->current_storage_unit = 0U;
 1291              		.loc 1 464 42
 1292 00f8 FA68     		ldr	r2, [r7, #12]
 1293 00fa 42F2C813 		movw	r3, #8648
 1294 00fe 1344     		add	r3, r3, r2
 1295 0100 0022     		movs	r2, #0
 1296 0102 1A60     		str	r2, [r3]
 465:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->state = MTP_GETSTORAGEINFO;
 1297              		.loc 1 465 27
 1298 0104 FA68     		ldr	r2, [r7, #12]
 1299 0106 41F63853 		movw	r3, #7480
ARM GAS  /tmp/ccILjF3V.s 			page 32


 1300 010a 1344     		add	r3, r3, r2
 1301 010c 0522     		movs	r2, #5
 1302 010e 1A70     		strb	r2, [r3]
 466:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 467:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1U)
 468:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         phost->os_msg = (uint32_t)USBH_STATE_CHANGED_EVENT;
 1303              		.loc 1 468 23
 1304 0110 7B68     		ldr	r3, [r7, #4]
 1305 0112 0522     		movs	r2, #5
 1306 0114 C3F8E024 		str	r2, [r3, #1248]
 469:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (osCMSIS < 0x20000U)
 470:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 471:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #else
 472:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1307              		.loc 1 472 15
 1308 0118 7B68     		ldr	r3, [r7, #4]
 1309 011a D3F8D804 		ldr	r0, [r3, #1240]
 1310              		.loc 1 472 50
 1311 011e 7B68     		ldr	r3, [r7, #4]
 1312 0120 03F59C61 		add	r1, r3, #1248
 1313              		.loc 1 472 15
 1314 0124 0023     		movs	r3, #0
 1315 0126 0022     		movs	r2, #0
 1316 0128 FFF7FEFF 		bl	osMessageQueuePut
 473:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 474:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 475:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 476:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 1317              		.loc 1 476 7
 1318 012c 81E0     		b	.L65
 1319              	.L47:
 477:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 478:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case MTP_GETSTORAGEINFO:
 479:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       status = USBH_PTP_GetStorageInfo(phost,
 480:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                        MTP_Handle->info.storids.Storage[MTP_Handle->current_storage
 1320              		.loc 1 480 83
 1321 012e FA68     		ldr	r2, [r7, #12]
 1322 0130 42F2C813 		movw	r3, #8648
 1323 0134 1344     		add	r3, r3, r2
 1324 0136 1B68     		ldr	r3, [r3]
 479:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                        MTP_Handle->info.storids.Storage[MTP_Handle->current_storage
 1325              		.loc 1 479 16
 1326 0138 FA68     		ldr	r2, [r7, #12]
 1327 013a 03F51073 		add	r3, r3, #576
 1328 013e 9B00     		lsls	r3, r3, #2
 1329 0140 1344     		add	r3, r3, r2
 1330 0142 9968     		ldr	r1, [r3, #8]
 481:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                        &((MTP_Handle->info.storinfo)[MTP_Handle->current_storage_un
 1331              		.loc 1 481 80
 1332 0144 FA68     		ldr	r2, [r7, #12]
 1333 0146 42F2C813 		movw	r3, #8648
 1334 014a 1344     		add	r3, r3, r2
 1335 014c 1A68     		ldr	r2, [r3]
 479:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                        MTP_Handle->info.storids.Storage[MTP_Handle->current_storage
 1336              		.loc 1 479 16
 1337 014e 1346     		mov	r3, r2
 1338 0150 1B01     		lsls	r3, r3, #4
ARM GAS  /tmp/ccILjF3V.s 			page 33


 1339 0152 1344     		add	r3, r3, r2
 1340 0154 5B01     		lsls	r3, r3, #5
 1341 0156 03F51263 		add	r3, r3, #2336
 1342 015a FA68     		ldr	r2, [r7, #12]
 1343 015c 1344     		add	r3, r3, r2
 1344 015e 1A46     		mov	r2, r3
 1345 0160 7868     		ldr	r0, [r7, #4]
 1346 0162 FFF7FEFF 		bl	USBH_PTP_GetStorageInfo
 1347 0166 0346     		mov	r3, r0
 1348 0168 FB75     		strb	r3, [r7, #23]
 482:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 483:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (status == USBH_OK)
 1349              		.loc 1 483 10
 1350 016a FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1351 016c 002B     		cmp	r3, #0
 1352 016e 62D1     		bne	.L66
 484:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 485:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_UsrLog("Volume#%lu: %s   [%s]", MTP_Handle->current_storage_unit,
 486:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->info.storinfo[MTP_Handle->current_storage_unit].StorageDescription,
 487:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                     MTP_Handle->info.storinfo[MTP_Handle->current_storage_unit].VolumeLabel);
 488:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         if (++MTP_Handle->current_storage_unit >= MTP_Handle->info.storids.n)
 1353              		.loc 1 488 25
 1354 0170 FA68     		ldr	r2, [r7, #12]
 1355 0172 42F2C813 		movw	r3, #8648
 1356 0176 1344     		add	r3, r3, r2
 1357 0178 1B68     		ldr	r3, [r3]
 1358              		.loc 1 488 13
 1359 017a 5A1C     		adds	r2, r3, #1
 1360              		.loc 1 488 12
 1361 017c F968     		ldr	r1, [r7, #12]
 1362 017e 42F2C813 		movw	r3, #8648
 1363 0182 0B44     		add	r3, r3, r1
 1364 0184 1A60     		str	r2, [r3]
 1365              		.loc 1 488 25
 1366 0186 FA68     		ldr	r2, [r7, #12]
 1367 0188 42F2C813 		movw	r3, #8648
 1368 018c 1344     		add	r3, r3, r2
 1369 018e 1A68     		ldr	r2, [r3]
 1370              		.loc 1 488 75
 1371 0190 FB68     		ldr	r3, [r7, #12]
 1372 0192 D3F80439 		ldr	r3, [r3, #2308]
 1373              		.loc 1 488 12
 1374 0196 9A42     		cmp	r2, r3
 1375 0198 1FD3     		bcc	.L60
 489:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         {
 490:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           MTP_Handle->state = MTP_IDLE;
 1376              		.loc 1 490 29
 1377 019a FA68     		ldr	r2, [r7, #12]
 1378 019c 41F63853 		movw	r3, #7480
 1379 01a0 1344     		add	r3, r3, r2
 1380 01a2 0022     		movs	r2, #0
 1381 01a4 1A70     		strb	r2, [r3]
 491:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           MTP_Handle->is_ready = 1U;
 1382              		.loc 1 491 32
 1383 01a6 FA68     		ldr	r2, [r7, #12]
 1384 01a8 42F2CC13 		movw	r3, #8652
 1385 01ac 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccILjF3V.s 			page 34


 1386 01ae 0122     		movs	r2, #1
 1387 01b0 1A60     		str	r2, [r3]
 492:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           MTP_Handle->current_storage_unit = 0U;
 1388              		.loc 1 492 44
 1389 01b2 FA68     		ldr	r2, [r7, #12]
 1390 01b4 42F2C813 		movw	r3, #8648
 1391 01b8 1344     		add	r3, r3, r2
 1392 01ba 0022     		movs	r2, #0
 1393 01bc 1A60     		str	r2, [r3]
 493:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           MTP_Handle->params.CurrentStorageId = MTP_Handle->info.storids.Storage[0];
 1394              		.loc 1 493 81
 1395 01be FB68     		ldr	r3, [r7, #12]
 1396 01c0 D3F80829 		ldr	r2, [r3, #2312]
 1397              		.loc 1 493 47
 1398 01c4 F968     		ldr	r1, [r7, #12]
 1399 01c6 41F61853 		movw	r3, #7448
 1400 01ca 0B44     		add	r3, r3, r1
 1401 01cc 1A60     		str	r2, [r3]
 494:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 495:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           USBH_UsrLog("MTP Class initialized.");
 496:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           USBH_UsrLog("%s is default storage unit", MTP_Handle->info.storinfo[0].StorageDescription
 497:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****           phost->pUser(phost, HOST_USER_CLASS_ACTIVE);
 1402              		.loc 1 497 16
 1403 01ce 7B68     		ldr	r3, [r7, #4]
 1404 01d0 D3F8D434 		ldr	r3, [r3, #1236]
 1405              		.loc 1 497 11
 1406 01d4 0221     		movs	r1, #2
 1407 01d6 7868     		ldr	r0, [r7, #4]
 1408 01d8 9847     		blx	r3
 1409              	.LVL0:
 1410              	.L60:
 498:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         }
 499:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 500:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1U)
 501:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         phost->os_msg = (uint32_t)USBH_STATE_CHANGED_EVENT;
 1411              		.loc 1 501 23
 1412 01da 7B68     		ldr	r3, [r7, #4]
 1413 01dc 0522     		movs	r2, #5
 1414 01de C3F8E024 		str	r2, [r3, #1248]
 502:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (osCMSIS < 0x20000U)
 503:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 504:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #else
 505:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1415              		.loc 1 505 15
 1416 01e2 7B68     		ldr	r3, [r7, #4]
 1417 01e4 D3F8D804 		ldr	r0, [r3, #1240]
 1418              		.loc 1 505 50
 1419 01e8 7B68     		ldr	r3, [r7, #4]
 1420 01ea 03F59C61 		add	r1, r3, #1248
 1421              		.loc 1 505 15
 1422 01ee 0023     		movs	r3, #0
 1423 01f0 0022     		movs	r2, #0
 1424 01f2 FFF7FEFF 		bl	osMessageQueuePut
 506:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 507:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 508:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 509:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
ARM GAS  /tmp/ccILjF3V.s 			page 35


 1425              		.loc 1 509 7
 1426 01f6 1EE0     		b	.L66
 1427              	.L52:
 510:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 511:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case  MTP_IDLE:
 512:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_MTP_Events(phost);
 1428              		.loc 1 512 7
 1429 01f8 7868     		ldr	r0, [r7, #4]
 1430 01fa FFF7FEFF 		bl	USBH_MTP_Events
 513:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 514:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (USBH_USE_OS == 1U)
 515:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       osDelay(10U);
 1431              		.loc 1 515 7
 1432 01fe 0A20     		movs	r0, #10
 1433 0200 FFF7FEFF 		bl	osDelay
 516:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       phost->os_msg = (uint32_t)USBH_STATE_CHANGED_EVENT;
 1434              		.loc 1 516 21
 1435 0204 7B68     		ldr	r3, [r7, #4]
 1436 0206 0522     		movs	r2, #5
 1437 0208 C3F8E024 		str	r2, [r3, #1248]
 517:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #if (osCMSIS < 0x20000U)
 518:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 519:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #else
 520:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1438              		.loc 1 520 13
 1439 020c 7B68     		ldr	r3, [r7, #4]
 1440 020e D3F8D804 		ldr	r0, [r3, #1240]
 1441              		.loc 1 520 48
 1442 0212 7B68     		ldr	r3, [r7, #4]
 1443 0214 03F59C61 		add	r1, r3, #1248
 1444              		.loc 1 520 13
 1445 0218 0023     		movs	r3, #0
 1446 021a 0022     		movs	r2, #0
 1447 021c FFF7FEFF 		bl	osMessageQueuePut
 521:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 522:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** #endif
 523:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 524:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       status = USBH_OK;
 1448              		.loc 1 524 14
 1449 0220 0023     		movs	r3, #0
 1450 0222 FB75     		strb	r3, [r7, #23]
 525:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 1451              		.loc 1 525 7
 1452 0224 08E0     		b	.L54
 1453              	.L62:
 526:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 527:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     default:
 528:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 1454              		.loc 1 528 7
 1455 0226 00BF     		nop
 1456 0228 06E0     		b	.L54
 1457              	.L63:
 421:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 1458              		.loc 1 421 7
 1459 022a 00BF     		nop
 1460 022c 04E0     		b	.L54
 1461              	.L64:
ARM GAS  /tmp/ccILjF3V.s 			page 36


 451:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 1462              		.loc 1 451 7
 1463 022e 00BF     		nop
 1464 0230 02E0     		b	.L54
 1465              	.L65:
 476:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 1466              		.loc 1 476 7
 1467 0232 00BF     		nop
 1468 0234 00E0     		b	.L54
 1469              	.L66:
 509:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 1470              		.loc 1 509 7
 1471 0236 00BF     		nop
 1472              	.L54:
 529:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 530:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 531:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 1473              		.loc 1 531 10
 1474 0238 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 532:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1475              		.loc 1 532 1
 1476 023a 1846     		mov	r0, r3
 1477 023c 1837     		adds	r7, r7, #24
 1478              	.LCFI36:
 1479              		.cfi_def_cfa_offset 8
 1480 023e BD46     		mov	sp, r7
 1481              	.LCFI37:
 1482              		.cfi_def_cfa_register 13
 1483              		@ sp needed
 1484 0240 80BD     		pop	{r7, pc}
 1485              		.cfi_endproc
 1486              	.LFE344:
 1488 0242 00BF     		.section	.text.USBH_MTP_SOFProcess,"ax",%progbits
 1489              		.align	1
 1490              		.syntax unified
 1491              		.thumb
 1492              		.thumb_func
 1493              		.fpu fpv5-d16
 1495              	USBH_MTP_SOFProcess:
 1496              	.LFB345:
 533:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 534:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 535:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_SOFProcess
 536:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         The function is for managing SOF callback
 537:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 538:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 539:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 540:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_SOFProcess(USBH_HandleTypeDef *phost)
 541:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1497              		.loc 1 541 1
 1498              		.cfi_startproc
 1499              		@ args = 0, pretend = 0, frame = 8
 1500              		@ frame_needed = 1, uses_anonymous_args = 0
 1501              		@ link register save eliminated.
 1502 0000 80B4     		push	{r7}
 1503              	.LCFI38:
 1504              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccILjF3V.s 			page 37


 1505              		.cfi_offset 7, -4
 1506 0002 83B0     		sub	sp, sp, #12
 1507              	.LCFI39:
 1508              		.cfi_def_cfa_offset 16
 1509 0004 00AF     		add	r7, sp, #0
 1510              	.LCFI40:
 1511              		.cfi_def_cfa_register 7
 1512 0006 7860     		str	r0, [r7, #4]
 542:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Prevent unused argument(s) compilation warning */
 543:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   UNUSED(phost);
 544:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 545:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return USBH_OK;
 1513              		.loc 1 545 10
 1514 0008 0023     		movs	r3, #0
 546:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1515              		.loc 1 546 1
 1516 000a 1846     		mov	r0, r3
 1517 000c 0C37     		adds	r7, r7, #12
 1518              	.LCFI41:
 1519              		.cfi_def_cfa_offset 4
 1520 000e BD46     		mov	sp, r7
 1521              	.LCFI42:
 1522              		.cfi_def_cfa_register 13
 1523              		@ sp needed
 1524 0010 5DF8047B 		ldr	r7, [sp], #4
 1525              	.LCFI43:
 1526              		.cfi_restore 7
 1527              		.cfi_def_cfa_offset 0
 1528 0014 7047     		bx	lr
 1529              		.cfi_endproc
 1530              	.LFE345:
 1532              		.section	.text.USBH_MTP_IsReady,"ax",%progbits
 1533              		.align	1
 1534              		.global	USBH_MTP_IsReady
 1535              		.syntax unified
 1536              		.thumb
 1537              		.thumb_func
 1538              		.fpu fpv5-d16
 1540              	USBH_MTP_IsReady:
 1541              	.LFB346:
 547:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 548:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 549:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_IsReady
 550:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Select the storage Unit to be used
 551:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 552:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 553:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 554:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** uint8_t USBH_MTP_IsReady(USBH_HandleTypeDef *phost)
 555:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1542              		.loc 1 555 1
 1543              		.cfi_startproc
 1544              		@ args = 0, pretend = 0, frame = 16
 1545              		@ frame_needed = 1, uses_anonymous_args = 0
 1546              		@ link register save eliminated.
 1547 0000 80B4     		push	{r7}
 1548              	.LCFI44:
 1549              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccILjF3V.s 			page 38


 1550              		.cfi_offset 7, -4
 1551 0002 85B0     		sub	sp, sp, #20
 1552              	.LCFI45:
 1553              		.cfi_def_cfa_offset 24
 1554 0004 00AF     		add	r7, sp, #0
 1555              	.LCFI46:
 1556              		.cfi_def_cfa_register 7
 1557 0006 7860     		str	r0, [r7, #4]
 556:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1558              		.loc 1 556 61
 1559 0008 7B68     		ldr	r3, [r7, #4]
 1560 000a D3F87C34 		ldr	r3, [r3, #1148]
 1561              		.loc 1 556 22
 1562 000e DB69     		ldr	r3, [r3, #28]
 1563 0010 FB60     		str	r3, [r7, #12]
 557:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 558:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return ((uint8_t)MTP_Handle->is_ready);
 1564              		.loc 1 558 30
 1565 0012 FA68     		ldr	r2, [r7, #12]
 1566 0014 42F2CC13 		movw	r3, #8652
 1567 0018 1344     		add	r3, r3, r2
 1568 001a 1B68     		ldr	r3, [r3]
 1569              		.loc 1 558 11
 1570 001c DBB2     		uxtb	r3, r3
 559:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1571              		.loc 1 559 1
 1572 001e 1846     		mov	r0, r3
 1573 0020 1437     		adds	r7, r7, #20
 1574              	.LCFI47:
 1575              		.cfi_def_cfa_offset 4
 1576 0022 BD46     		mov	sp, r7
 1577              	.LCFI48:
 1578              		.cfi_def_cfa_register 13
 1579              		@ sp needed
 1580 0024 5DF8047B 		ldr	r7, [sp], #4
 1581              	.LCFI49:
 1582              		.cfi_restore 7
 1583              		.cfi_def_cfa_offset 0
 1584 0028 7047     		bx	lr
 1585              		.cfi_endproc
 1586              	.LFE346:
 1588              		.section	.text.USBH_MTP_GetNumStorage,"ax",%progbits
 1589              		.align	1
 1590              		.global	USBH_MTP_GetNumStorage
 1591              		.syntax unified
 1592              		.thumb
 1593              		.thumb_func
 1594              		.fpu fpv5-d16
 1596              	USBH_MTP_GetNumStorage:
 1597              	.LFB347:
 560:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 561:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 562:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetNumStorage
 563:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Select the storage Unit to be used
 564:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 565:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 566:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
ARM GAS  /tmp/ccILjF3V.s 			page 39


 567:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetNumStorage(USBH_HandleTypeDef *phost, uint8_t *storage_num)
 568:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1598              		.loc 1 568 1
 1599              		.cfi_startproc
 1600              		@ args = 0, pretend = 0, frame = 16
 1601              		@ frame_needed = 1, uses_anonymous_args = 0
 1602              		@ link register save eliminated.
 1603 0000 80B4     		push	{r7}
 1604              	.LCFI50:
 1605              		.cfi_def_cfa_offset 4
 1606              		.cfi_offset 7, -4
 1607 0002 85B0     		sub	sp, sp, #20
 1608              	.LCFI51:
 1609              		.cfi_def_cfa_offset 24
 1610 0004 00AF     		add	r7, sp, #0
 1611              	.LCFI52:
 1612              		.cfi_def_cfa_register 7
 1613 0006 7860     		str	r0, [r7, #4]
 1614 0008 3960     		str	r1, [r7]
 569:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 1615              		.loc 1 569 22
 1616 000a 0223     		movs	r3, #2
 1617 000c FB73     		strb	r3, [r7, #15]
 570:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1618              		.loc 1 570 61
 1619 000e 7B68     		ldr	r3, [r7, #4]
 1620 0010 D3F87C34 		ldr	r3, [r3, #1148]
 1621              		.loc 1 570 22
 1622 0014 DB69     		ldr	r3, [r3, #28]
 1623 0016 BB60     		str	r3, [r7, #8]
 571:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 572:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready > 0U)
 1624              		.loc 1 572 17
 1625 0018 BA68     		ldr	r2, [r7, #8]
 1626 001a 42F2CC13 		movw	r3, #8652
 1627 001e 1344     		add	r3, r3, r2
 1628 0020 1B68     		ldr	r3, [r3]
 1629              		.loc 1 572 6
 1630 0022 002B     		cmp	r3, #0
 1631 0024 07D0     		beq	.L72
 573:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 574:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     *storage_num = (uint8_t)MTP_Handle->info.storids.n;
 1632              		.loc 1 574 53
 1633 0026 BB68     		ldr	r3, [r7, #8]
 1634 0028 D3F80439 		ldr	r3, [r3, #2308]
 1635              		.loc 1 574 20
 1636 002c DAB2     		uxtb	r2, r3
 1637              		.loc 1 574 18
 1638 002e 3B68     		ldr	r3, [r7]
 1639 0030 1A70     		strb	r2, [r3]
 575:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status  = USBH_OK;
 1640              		.loc 1 575 13
 1641 0032 0023     		movs	r3, #0
 1642 0034 FB73     		strb	r3, [r7, #15]
 1643              	.L72:
 576:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 577:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
ARM GAS  /tmp/ccILjF3V.s 			page 40


 578:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 1644              		.loc 1 578 10
 1645 0036 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 579:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1646              		.loc 1 579 1
 1647 0038 1846     		mov	r0, r3
 1648 003a 1437     		adds	r7, r7, #20
 1649              	.LCFI53:
 1650              		.cfi_def_cfa_offset 4
 1651 003c BD46     		mov	sp, r7
 1652              	.LCFI54:
 1653              		.cfi_def_cfa_register 13
 1654              		@ sp needed
 1655 003e 5DF8047B 		ldr	r7, [sp], #4
 1656              	.LCFI55:
 1657              		.cfi_restore 7
 1658              		.cfi_def_cfa_offset 0
 1659 0042 7047     		bx	lr
 1660              		.cfi_endproc
 1661              	.LFE347:
 1663              		.section	.text.USBH_MTP_SelectStorage,"ax",%progbits
 1664              		.align	1
 1665              		.global	USBH_MTP_SelectStorage
 1666              		.syntax unified
 1667              		.thumb
 1668              		.thumb_func
 1669              		.fpu fpv5-d16
 1671              	USBH_MTP_SelectStorage:
 1672              	.LFB348:
 580:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 581:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 582:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_SelectStorage
 583:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Select the storage Unit to be used
 584:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 585:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 586:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 587:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_SelectStorage(USBH_HandleTypeDef *phost, uint8_t storage_idx)
 588:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1673              		.loc 1 588 1
 1674              		.cfi_startproc
 1675              		@ args = 0, pretend = 0, frame = 16
 1676              		@ frame_needed = 1, uses_anonymous_args = 0
 1677              		@ link register save eliminated.
 1678 0000 80B4     		push	{r7}
 1679              	.LCFI56:
 1680              		.cfi_def_cfa_offset 4
 1681              		.cfi_offset 7, -4
 1682 0002 85B0     		sub	sp, sp, #20
 1683              	.LCFI57:
 1684              		.cfi_def_cfa_offset 24
 1685 0004 00AF     		add	r7, sp, #0
 1686              	.LCFI58:
 1687              		.cfi_def_cfa_register 7
 1688 0006 7860     		str	r0, [r7, #4]
 1689 0008 0B46     		mov	r3, r1
 1690 000a FB70     		strb	r3, [r7, #3]
 589:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
ARM GAS  /tmp/ccILjF3V.s 			page 41


 1691              		.loc 1 589 22
 1692 000c 0223     		movs	r3, #2
 1693 000e FB73     		strb	r3, [r7, #15]
 590:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1694              		.loc 1 590 61
 1695 0010 7B68     		ldr	r3, [r7, #4]
 1696 0012 D3F87C34 		ldr	r3, [r3, #1148]
 1697              		.loc 1 590 22
 1698 0016 DB69     		ldr	r3, [r3, #28]
 1699 0018 BB60     		str	r3, [r7, #8]
 591:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 592:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 1700              		.loc 1 592 20
 1701 001a FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 1702              		.loc 1 592 46
 1703 001c BB68     		ldr	r3, [r7, #8]
 1704 001e D3F80439 		ldr	r3, [r3, #2308]
 1705              		.loc 1 592 6
 1706 0022 9A42     		cmp	r2, r3
 1707 0024 14D2     		bcs	.L75
 1708              		.loc 1 592 64 discriminator 1
 1709 0026 BA68     		ldr	r2, [r7, #8]
 1710 0028 42F2CC13 		movw	r3, #8652
 1711 002c 1344     		add	r3, r3, r2
 1712 002e 1B68     		ldr	r3, [r3]
 1713              		.loc 1 592 50 discriminator 1
 1714 0030 002B     		cmp	r3, #0
 1715 0032 0DD0     		beq	.L75
 593:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 594:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     MTP_Handle->params.CurrentStorageId = MTP_Handle->info.storids.Storage[storage_idx];
 1716              		.loc 1 594 75
 1717 0034 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1718 0036 BA68     		ldr	r2, [r7, #8]
 1719 0038 03F51073 		add	r3, r3, #576
 1720 003c 9B00     		lsls	r3, r3, #2
 1721 003e 1344     		add	r3, r3, r2
 1722 0040 9A68     		ldr	r2, [r3, #8]
 1723              		.loc 1 594 41
 1724 0042 B968     		ldr	r1, [r7, #8]
 1725 0044 41F61853 		movw	r3, #7448
 1726 0048 0B44     		add	r3, r3, r1
 1727 004a 1A60     		str	r2, [r3]
 595:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status  = USBH_OK;
 1728              		.loc 1 595 13
 1729 004c 0023     		movs	r3, #0
 1730 004e FB73     		strb	r3, [r7, #15]
 1731              	.L75:
 596:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 597:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 598:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 1732              		.loc 1 598 10
 1733 0050 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 599:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1734              		.loc 1 599 1
 1735 0052 1846     		mov	r0, r3
 1736 0054 1437     		adds	r7, r7, #20
 1737              	.LCFI59:
ARM GAS  /tmp/ccILjF3V.s 			page 42


 1738              		.cfi_def_cfa_offset 4
 1739 0056 BD46     		mov	sp, r7
 1740              	.LCFI60:
 1741              		.cfi_def_cfa_register 13
 1742              		@ sp needed
 1743 0058 5DF8047B 		ldr	r7, [sp], #4
 1744              	.LCFI61:
 1745              		.cfi_restore 7
 1746              		.cfi_def_cfa_offset 0
 1747 005c 7047     		bx	lr
 1748              		.cfi_endproc
 1749              	.LFE348:
 1751              		.section	.text.USBH_MTP_GetStorageInfo,"ax",%progbits
 1752              		.align	1
 1753              		.global	USBH_MTP_GetStorageInfo
 1754              		.syntax unified
 1755              		.thumb
 1756              		.thumb_func
 1757              		.fpu fpv5-d16
 1759              	USBH_MTP_GetStorageInfo:
 1760              	.LFB349:
 600:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 601:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 602:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetStorageInfo
 603:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Get the storage Unit info
 604:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 605:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 606:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 607:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetStorageInfo(USBH_HandleTypeDef *phost, uint8_t storage_idx, MTP_Stor
 608:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1761              		.loc 1 608 1
 1762              		.cfi_startproc
 1763              		@ args = 0, pretend = 0, frame = 24
 1764              		@ frame_needed = 1, uses_anonymous_args = 0
 1765 0000 80B5     		push	{r7, lr}
 1766              	.LCFI62:
 1767              		.cfi_def_cfa_offset 8
 1768              		.cfi_offset 7, -8
 1769              		.cfi_offset 14, -4
 1770 0002 86B0     		sub	sp, sp, #24
 1771              	.LCFI63:
 1772              		.cfi_def_cfa_offset 32
 1773 0004 00AF     		add	r7, sp, #0
 1774              	.LCFI64:
 1775              		.cfi_def_cfa_register 7
 1776 0006 F860     		str	r0, [r7, #12]
 1777 0008 0B46     		mov	r3, r1
 1778 000a 7A60     		str	r2, [r7, #4]
 1779 000c FB72     		strb	r3, [r7, #11]
 609:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 1780              		.loc 1 609 22
 1781 000e 0223     		movs	r3, #2
 1782 0010 FB75     		strb	r3, [r7, #23]
 610:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1783              		.loc 1 610 61
 1784 0012 FB68     		ldr	r3, [r7, #12]
 1785 0014 D3F87C34 		ldr	r3, [r3, #1148]
ARM GAS  /tmp/ccILjF3V.s 			page 43


 1786              		.loc 1 610 22
 1787 0018 DB69     		ldr	r3, [r3, #28]
 1788 001a 3B61     		str	r3, [r7, #16]
 611:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 612:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 1789              		.loc 1 612 20
 1790 001c FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 1791              		.loc 1 612 46
 1792 001e 3B69     		ldr	r3, [r7, #16]
 1793 0020 D3F80439 		ldr	r3, [r3, #2308]
 1794              		.loc 1 612 6
 1795 0024 9A42     		cmp	r2, r3
 1796 0026 18D2     		bcs	.L78
 1797              		.loc 1 612 64 discriminator 1
 1798 0028 3A69     		ldr	r2, [r7, #16]
 1799 002a 42F2CC13 		movw	r3, #8652
 1800 002e 1344     		add	r3, r3, r2
 1801 0030 1B68     		ldr	r3, [r3]
 1802              		.loc 1 612 50 discriminator 1
 1803 0032 002B     		cmp	r3, #0
 1804 0034 11D0     		beq	.L78
 613:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 614:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     *info = MTP_Handle->info.storinfo[storage_idx];
 1805              		.loc 1 614 38
 1806 0036 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 1807              		.loc 1 614 11
 1808 0038 7868     		ldr	r0, [r7, #4]
 1809 003a 3969     		ldr	r1, [r7, #16]
 1810 003c 1346     		mov	r3, r2
 1811 003e 1B01     		lsls	r3, r3, #4
 1812 0040 1344     		add	r3, r3, r2
 1813 0042 5B01     		lsls	r3, r3, #5
 1814 0044 0B44     		add	r3, r3, r1
 1815 0046 03F51263 		add	r3, r3, #2336
 1816 004a 1946     		mov	r1, r3
 1817 004c 4FF40873 		mov	r3, #544
 1818 0050 1A46     		mov	r2, r3
 1819 0052 FFF7FEFF 		bl	memcpy
 615:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     status  = USBH_OK;
 1820              		.loc 1 615 13
 1821 0056 0023     		movs	r3, #0
 1822 0058 FB75     		strb	r3, [r7, #23]
 1823              	.L78:
 616:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 617:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 1824              		.loc 1 617 10
 1825 005a FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 618:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1826              		.loc 1 618 1
 1827 005c 1846     		mov	r0, r3
 1828 005e 1837     		adds	r7, r7, #24
 1829              	.LCFI65:
 1830              		.cfi_def_cfa_offset 8
 1831 0060 BD46     		mov	sp, r7
 1832              	.LCFI66:
 1833              		.cfi_def_cfa_register 13
 1834              		@ sp needed
ARM GAS  /tmp/ccILjF3V.s 			page 44


 1835 0062 80BD     		pop	{r7, pc}
 1836              		.cfi_endproc
 1837              	.LFE349:
 1839              		.section	.text.USBH_MTP_GetNumObjects,"ax",%progbits
 1840              		.align	1
 1841              		.global	USBH_MTP_GetNumObjects
 1842              		.syntax unified
 1843              		.thumb
 1844              		.thumb_func
 1845              		.fpu fpv5-d16
 1847              	USBH_MTP_GetNumObjects:
 1848              	.LFB350:
 619:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 620:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 621:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetStorageInfo
 622:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Get the storage Unit info
 623:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 624:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 625:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 626:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetNumObjects(USBH_HandleTypeDef *phost,
 627:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           uint32_t storage_idx,
 628:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           uint32_t objectformatcode,
 629:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           uint32_t associationOH,
 630:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           uint32_t *numobs)
 631:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1849              		.loc 1 631 1
 1850              		.cfi_startproc
 1851              		@ args = 4, pretend = 0, frame = 32
 1852              		@ frame_needed = 1, uses_anonymous_args = 0
 1853 0000 80B5     		push	{r7, lr}
 1854              	.LCFI67:
 1855              		.cfi_def_cfa_offset 8
 1856              		.cfi_offset 7, -8
 1857              		.cfi_offset 14, -4
 1858 0002 8AB0     		sub	sp, sp, #40
 1859              	.LCFI68:
 1860              		.cfi_def_cfa_offset 48
 1861 0004 02AF     		add	r7, sp, #8
 1862              	.LCFI69:
 1863              		.cfi_def_cfa 7, 40
 1864 0006 F860     		str	r0, [r7, #12]
 1865 0008 B960     		str	r1, [r7, #8]
 1866 000a 7A60     		str	r2, [r7, #4]
 1867 000c 3B60     		str	r3, [r7]
 632:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 1868              		.loc 1 632 22
 1869 000e 0223     		movs	r3, #2
 1870 0010 FB77     		strb	r3, [r7, #31]
 633:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1871              		.loc 1 633 61
 1872 0012 FB68     		ldr	r3, [r7, #12]
 1873 0014 D3F87C34 		ldr	r3, [r3, #1148]
 1874              		.loc 1 633 22
 1875 0018 DB69     		ldr	r3, [r3, #28]
 1876 001a BB61     		str	r3, [r7, #24]
 634:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1877              		.loc 1 634 12
ARM GAS  /tmp/ccILjF3V.s 			page 45


 1878 001c FB68     		ldr	r3, [r7, #12]
 1879 001e D3F8C434 		ldr	r3, [r3, #1220]
 1880 0022 7B61     		str	r3, [r7, #20]
 635:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 1881              		.loc 1 635 46
 1882 0024 BB69     		ldr	r3, [r7, #24]
 1883 0026 D3F80439 		ldr	r3, [r3, #2308]
 1884              		.loc 1 635 6
 1885 002a BA68     		ldr	r2, [r7, #8]
 1886 002c 9A42     		cmp	r2, r3
 1887 002e 2BD2     		bcs	.L81
 1888              		.loc 1 635 64 discriminator 1
 1889 0030 BA69     		ldr	r2, [r7, #24]
 1890 0032 42F2CC13 		movw	r3, #8652
 1891 0036 1344     		add	r3, r3, r2
 1892 0038 1B68     		ldr	r3, [r3]
 1893              		.loc 1 635 50 discriminator 1
 1894 003a 002B     		cmp	r3, #0
 1895 003c 24D0     		beq	.L81
 636:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 637:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetNumObjects(phost,
 1896              		.loc 1 637 11
 1897 003e 10E0     		b	.L82
 1898              	.L85:
 638:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                             MTP_Handle->info.storids.Storage[storage_idx],
 639:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                             objectformatcode,
 640:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                             associationOH,
 641:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                             numobs)) == USBH_BUSY)
 642:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 643:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >   5000U) || (phost->device.is_connected == 0U))
 1899              		.loc 1 643 18
 1900 0040 FB68     		ldr	r3, [r7, #12]
 1901 0042 D3F8C424 		ldr	r2, [r3, #1220]
 1902              		.loc 1 643 26
 1903 0046 7B69     		ldr	r3, [r7, #20]
 1904 0048 D31A     		subs	r3, r2, r3
 1905              		.loc 1 643 10
 1906 004a 41F28832 		movw	r2, #5000
 1907 004e 9342     		cmp	r3, r2
 1908 0050 05D8     		bhi	.L83
 1909              		.loc 1 643 65 discriminator 1
 1910 0052 FB68     		ldr	r3, [r7, #12]
 1911 0054 93F82034 		ldrb	r3, [r3, #1056]
 1912 0058 DBB2     		uxtb	r3, r3
 1913              		.loc 1 643 48 discriminator 1
 1914 005a 002B     		cmp	r3, #0
 1915 005c 01D1     		bne	.L82
 1916              	.L83:
 644:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 645:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 1917              		.loc 1 645 16
 1918 005e 0223     		movs	r3, #2
 1919 0060 13E0     		b	.L84
 1920              	.L82:
 637:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                             MTP_Handle->info.storids.Storage[storage_idx],
 1921              		.loc 1 637 22
 1922 0062 BA69     		ldr	r2, [r7, #24]
ARM GAS  /tmp/ccILjF3V.s 			page 46


 1923 0064 BB68     		ldr	r3, [r7, #8]
 1924 0066 03F51073 		add	r3, r3, #576
 1925 006a 9B00     		lsls	r3, r3, #2
 1926 006c 1344     		add	r3, r3, r2
 1927 006e 9968     		ldr	r1, [r3, #8]
 1928 0070 BB6A     		ldr	r3, [r7, #40]
 1929 0072 0093     		str	r3, [sp]
 1930 0074 3B68     		ldr	r3, [r7]
 1931 0076 7A68     		ldr	r2, [r7, #4]
 1932 0078 F868     		ldr	r0, [r7, #12]
 1933 007a FFF7FEFF 		bl	USBH_PTP_GetNumObjects
 1934 007e 0346     		mov	r3, r0
 1935 0080 FB77     		strb	r3, [r7, #31]
 637:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                             MTP_Handle->info.storids.Storage[storage_idx],
 1936              		.loc 1 637 11
 1937 0082 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 1938 0084 012B     		cmp	r3, #1
 1939 0086 DBD0     		beq	.L85
 1940              	.L81:
 646:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 647:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 648:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 649:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 1941              		.loc 1 649 10
 1942 0088 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 1943              	.L84:
 650:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 1944              		.loc 1 650 1
 1945 008a 1846     		mov	r0, r3
 1946 008c 2037     		adds	r7, r7, #32
 1947              	.LCFI70:
 1948              		.cfi_def_cfa_offset 8
 1949 008e BD46     		mov	sp, r7
 1950              	.LCFI71:
 1951              		.cfi_def_cfa_register 13
 1952              		@ sp needed
 1953 0090 80BD     		pop	{r7, pc}
 1954              		.cfi_endproc
 1955              	.LFE350:
 1957              		.section	.text.USBH_MTP_GetObjectHandles,"ax",%progbits
 1958              		.align	1
 1959              		.global	USBH_MTP_GetObjectHandles
 1960              		.syntax unified
 1961              		.thumb
 1962              		.thumb_func
 1963              		.fpu fpv5-d16
 1965              	USBH_MTP_GetObjectHandles:
 1966              	.LFB351:
 651:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 652:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 653:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 654:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetStorageInfo
 655:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Get the storage Unit info
 656:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 657:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 658:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 659:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectHandles(USBH_HandleTypeDef *phost,
ARM GAS  /tmp/ccILjF3V.s 			page 47


 660:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint32_t storage_idx,
 661:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint32_t objectformatcode,
 662:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint32_t associationOH,
 663:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              PTP_ObjectHandlesTypedef *objecthandles)
 664:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 1967              		.loc 1 664 1
 1968              		.cfi_startproc
 1969              		@ args = 4, pretend = 0, frame = 32
 1970              		@ frame_needed = 1, uses_anonymous_args = 0
 1971 0000 80B5     		push	{r7, lr}
 1972              	.LCFI72:
 1973              		.cfi_def_cfa_offset 8
 1974              		.cfi_offset 7, -8
 1975              		.cfi_offset 14, -4
 1976 0002 8AB0     		sub	sp, sp, #40
 1977              	.LCFI73:
 1978              		.cfi_def_cfa_offset 48
 1979 0004 02AF     		add	r7, sp, #8
 1980              	.LCFI74:
 1981              		.cfi_def_cfa 7, 40
 1982 0006 F860     		str	r0, [r7, #12]
 1983 0008 B960     		str	r1, [r7, #8]
 1984 000a 7A60     		str	r2, [r7, #4]
 1985 000c 3B60     		str	r3, [r7]
 665:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 1986              		.loc 1 665 22
 1987 000e 0223     		movs	r3, #2
 1988 0010 FB77     		strb	r3, [r7, #31]
 666:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 1989              		.loc 1 666 61
 1990 0012 FB68     		ldr	r3, [r7, #12]
 1991 0014 D3F87C34 		ldr	r3, [r3, #1148]
 1992              		.loc 1 666 22
 1993 0018 DB69     		ldr	r3, [r3, #28]
 1994 001a BB61     		str	r3, [r7, #24]
 667:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 1995              		.loc 1 667 12
 1996 001c FB68     		ldr	r3, [r7, #12]
 1997 001e D3F8C434 		ldr	r3, [r3, #1220]
 1998 0022 7B61     		str	r3, [r7, #20]
 668:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 669:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if ((storage_idx < MTP_Handle->info.storids.n) && (MTP_Handle->is_ready))
 1999              		.loc 1 669 46
 2000 0024 BB69     		ldr	r3, [r7, #24]
 2001 0026 D3F80439 		ldr	r3, [r3, #2308]
 2002              		.loc 1 669 6
 2003 002a BA68     		ldr	r2, [r7, #8]
 2004 002c 9A42     		cmp	r2, r3
 2005 002e 2BD2     		bcs	.L87
 2006              		.loc 1 669 64 discriminator 1
 2007 0030 BA69     		ldr	r2, [r7, #24]
 2008 0032 42F2CC13 		movw	r3, #8652
 2009 0036 1344     		add	r3, r3, r2
 2010 0038 1B68     		ldr	r3, [r3]
 2011              		.loc 1 669 50 discriminator 1
 2012 003a 002B     		cmp	r3, #0
 2013 003c 24D0     		beq	.L87
ARM GAS  /tmp/ccILjF3V.s 			page 48


 670:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 671:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectHandles(phost,
 2014              		.loc 1 671 11
 2015 003e 10E0     		b	.L88
 2016              	.L91:
 672:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                MTP_Handle->info.storids.Storage[storage_idx],
 673:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                objectformatcode,
 674:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                associationOH,
 675:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                objecthandles)) == USBH_BUSY)
 676:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 677:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2017              		.loc 1 677 18
 2018 0040 FB68     		ldr	r3, [r7, #12]
 2019 0042 D3F8C424 		ldr	r2, [r3, #1220]
 2020              		.loc 1 677 26
 2021 0046 7B69     		ldr	r3, [r7, #20]
 2022 0048 D31A     		subs	r3, r2, r3
 2023              		.loc 1 677 10
 2024 004a 41F28832 		movw	r2, #5000
 2025 004e 9342     		cmp	r3, r2
 2026 0050 05D8     		bhi	.L89
 2027              		.loc 1 677 64 discriminator 1
 2028 0052 FB68     		ldr	r3, [r7, #12]
 2029 0054 93F82034 		ldrb	r3, [r3, #1056]
 2030 0058 DBB2     		uxtb	r3, r3
 2031              		.loc 1 677 47 discriminator 1
 2032 005a 002B     		cmp	r3, #0
 2033 005c 01D1     		bne	.L88
 2034              	.L89:
 678:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 679:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2035              		.loc 1 679 16
 2036 005e 0223     		movs	r3, #2
 2037 0060 13E0     		b	.L90
 2038              	.L88:
 671:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                MTP_Handle->info.storids.Storage[storage_idx],
 2039              		.loc 1 671 22
 2040 0062 BA69     		ldr	r2, [r7, #24]
 2041 0064 BB68     		ldr	r3, [r7, #8]
 2042 0066 03F51073 		add	r3, r3, #576
 2043 006a 9B00     		lsls	r3, r3, #2
 2044 006c 1344     		add	r3, r3, r2
 2045 006e 9968     		ldr	r1, [r3, #8]
 2046 0070 BB6A     		ldr	r3, [r7, #40]
 2047 0072 0093     		str	r3, [sp]
 2048 0074 3B68     		ldr	r3, [r7]
 2049 0076 7A68     		ldr	r2, [r7, #4]
 2050 0078 F868     		ldr	r0, [r7, #12]
 2051 007a FFF7FEFF 		bl	USBH_PTP_GetObjectHandles
 2052 007e 0346     		mov	r3, r0
 2053 0080 FB77     		strb	r3, [r7, #31]
 671:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                MTP_Handle->info.storids.Storage[storage_idx],
 2054              		.loc 1 671 11
 2055 0082 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2056 0084 012B     		cmp	r3, #1
 2057 0086 DBD0     		beq	.L91
 2058              	.L87:
ARM GAS  /tmp/ccILjF3V.s 			page 49


 680:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 681:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 682:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 683:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2059              		.loc 1 683 10
 2060 0088 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2061              	.L90:
 684:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2062              		.loc 1 684 1
 2063 008a 1846     		mov	r0, r3
 2064 008c 2037     		adds	r7, r7, #32
 2065              	.LCFI75:
 2066              		.cfi_def_cfa_offset 8
 2067 008e BD46     		mov	sp, r7
 2068              	.LCFI76:
 2069              		.cfi_def_cfa_register 13
 2070              		@ sp needed
 2071 0090 80BD     		pop	{r7, pc}
 2072              		.cfi_endproc
 2073              	.LFE351:
 2075              		.section	.text.USBH_MTP_GetObjectInfo,"ax",%progbits
 2076              		.align	1
 2077              		.global	USBH_MTP_GetObjectInfo
 2078              		.syntax unified
 2079              		.thumb
 2080              		.thumb_func
 2081              		.fpu fpv5-d16
 2083              	USBH_MTP_GetObjectInfo:
 2084              	.LFB352:
 685:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 686:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 687:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_PTP_GetObjectInfo
 688:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets objert info
 689:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 690:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 691:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 692:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 693:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectInfo(USBH_HandleTypeDef *phost,
 694:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           uint32_t handle,
 695:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                           PTP_ObjectInfoTypedef *objectinfo)
 696:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2085              		.loc 1 696 1
 2086              		.cfi_startproc
 2087              		@ args = 0, pretend = 0, frame = 32
 2088              		@ frame_needed = 1, uses_anonymous_args = 0
 2089 0000 80B5     		push	{r7, lr}
 2090              	.LCFI77:
 2091              		.cfi_def_cfa_offset 8
 2092              		.cfi_offset 7, -8
 2093              		.cfi_offset 14, -4
 2094 0002 88B0     		sub	sp, sp, #32
 2095              	.LCFI78:
 2096              		.cfi_def_cfa_offset 40
 2097 0004 00AF     		add	r7, sp, #0
 2098              	.LCFI79:
 2099              		.cfi_def_cfa_register 7
 2100 0006 F860     		str	r0, [r7, #12]
ARM GAS  /tmp/ccILjF3V.s 			page 50


 2101 0008 B960     		str	r1, [r7, #8]
 2102 000a 7A60     		str	r2, [r7, #4]
 697:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2103              		.loc 1 697 22
 2104 000c 0223     		movs	r3, #2
 2105 000e FB77     		strb	r3, [r7, #31]
 698:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2106              		.loc 1 698 61
 2107 0010 FB68     		ldr	r3, [r7, #12]
 2108 0012 D3F87C34 		ldr	r3, [r3, #1148]
 2109              		.loc 1 698 22
 2110 0016 DB69     		ldr	r3, [r3, #28]
 2111 0018 BB61     		str	r3, [r7, #24]
 699:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2112              		.loc 1 699 12
 2113 001a FB68     		ldr	r3, [r7, #12]
 2114 001c D3F8C434 		ldr	r3, [r3, #1220]
 2115 0020 7B61     		str	r3, [r7, #20]
 700:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 701:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2116              		.loc 1 701 17
 2117 0022 BA69     		ldr	r2, [r7, #24]
 2118 0024 42F2CC13 		movw	r3, #8652
 2119 0028 1344     		add	r3, r3, r2
 2120 002a 1B68     		ldr	r3, [r3]
 2121              		.loc 1 701 6
 2122 002c 002B     		cmp	r3, #0
 2123 002e 1BD0     		beq	.L93
 702:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 703:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectInfo(phost, handle, objectinfo)) == USBH_BUSY)
 2124              		.loc 1 703 11
 2125 0030 10E0     		b	.L94
 2126              	.L97:
 704:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 705:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2127              		.loc 1 705 18
 2128 0032 FB68     		ldr	r3, [r7, #12]
 2129 0034 D3F8C424 		ldr	r2, [r3, #1220]
 2130              		.loc 1 705 26
 2131 0038 7B69     		ldr	r3, [r7, #20]
 2132 003a D31A     		subs	r3, r2, r3
 2133              		.loc 1 705 10
 2134 003c 41F28832 		movw	r2, #5000
 2135 0040 9342     		cmp	r3, r2
 2136 0042 05D8     		bhi	.L95
 2137              		.loc 1 705 64 discriminator 1
 2138 0044 FB68     		ldr	r3, [r7, #12]
 2139 0046 93F82034 		ldrb	r3, [r3, #1056]
 2140 004a DBB2     		uxtb	r3, r3
 2141              		.loc 1 705 47 discriminator 1
 2142 004c 002B     		cmp	r3, #0
 2143 004e 01D1     		bne	.L94
 2144              	.L95:
 706:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 707:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2145              		.loc 1 707 16
 2146 0050 0223     		movs	r3, #2
ARM GAS  /tmp/ccILjF3V.s 			page 51


 2147 0052 0AE0     		b	.L96
 2148              	.L94:
 703:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2149              		.loc 1 703 22
 2150 0054 7A68     		ldr	r2, [r7, #4]
 2151 0056 B968     		ldr	r1, [r7, #8]
 2152 0058 F868     		ldr	r0, [r7, #12]
 2153 005a FFF7FEFF 		bl	USBH_PTP_GetObjectInfo
 2154 005e 0346     		mov	r3, r0
 2155 0060 FB77     		strb	r3, [r7, #31]
 703:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2156              		.loc 1 703 11
 2157 0062 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2158 0064 012B     		cmp	r3, #1
 2159 0066 E4D0     		beq	.L97
 2160              	.L93:
 708:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 709:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 710:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 711:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 712:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2161              		.loc 1 712 10
 2162 0068 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2163              	.L96:
 713:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2164              		.loc 1 713 1
 2165 006a 1846     		mov	r0, r3
 2166 006c 2037     		adds	r7, r7, #32
 2167              	.LCFI80:
 2168              		.cfi_def_cfa_offset 8
 2169 006e BD46     		mov	sp, r7
 2170              	.LCFI81:
 2171              		.cfi_def_cfa_register 13
 2172              		@ sp needed
 2173 0070 80BD     		pop	{r7, pc}
 2174              		.cfi_endproc
 2175              	.LFE352:
 2177              		.section	.text.USBH_MTP_DeleteObject,"ax",%progbits
 2178              		.align	1
 2179              		.global	USBH_MTP_DeleteObject
 2180              		.syntax unified
 2181              		.thumb
 2182              		.thumb_func
 2183              		.fpu fpv5-d16
 2185              	USBH_MTP_DeleteObject:
 2186              	.LFB353:
 714:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 715:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_DeleteObject
 716:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Delete an object.
 717:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 718:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  handle : Object Handle
 719:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 720:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 721:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_DeleteObject(USBH_HandleTypeDef *phost,
 722:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                          uint32_t handle,
 723:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                          uint32_t objectformatcode)
 724:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
ARM GAS  /tmp/ccILjF3V.s 			page 52


 2187              		.loc 1 724 1
 2188              		.cfi_startproc
 2189              		@ args = 0, pretend = 0, frame = 32
 2190              		@ frame_needed = 1, uses_anonymous_args = 0
 2191 0000 80B5     		push	{r7, lr}
 2192              	.LCFI82:
 2193              		.cfi_def_cfa_offset 8
 2194              		.cfi_offset 7, -8
 2195              		.cfi_offset 14, -4
 2196 0002 88B0     		sub	sp, sp, #32
 2197              	.LCFI83:
 2198              		.cfi_def_cfa_offset 40
 2199 0004 00AF     		add	r7, sp, #0
 2200              	.LCFI84:
 2201              		.cfi_def_cfa_register 7
 2202 0006 F860     		str	r0, [r7, #12]
 2203 0008 B960     		str	r1, [r7, #8]
 2204 000a 7A60     		str	r2, [r7, #4]
 725:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2205              		.loc 1 725 22
 2206 000c 0223     		movs	r3, #2
 2207 000e FB77     		strb	r3, [r7, #31]
 726:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2208              		.loc 1 726 61
 2209 0010 FB68     		ldr	r3, [r7, #12]
 2210 0012 D3F87C34 		ldr	r3, [r3, #1148]
 2211              		.loc 1 726 22
 2212 0016 DB69     		ldr	r3, [r3, #28]
 2213 0018 BB61     		str	r3, [r7, #24]
 727:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2214              		.loc 1 727 12
 2215 001a FB68     		ldr	r3, [r7, #12]
 2216 001c D3F8C434 		ldr	r3, [r3, #1220]
 2217 0020 7B61     		str	r3, [r7, #20]
 728:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 729:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2218              		.loc 1 729 17
 2219 0022 BA69     		ldr	r2, [r7, #24]
 2220 0024 42F2CC13 		movw	r3, #8652
 2221 0028 1344     		add	r3, r3, r2
 2222 002a 1B68     		ldr	r3, [r3]
 2223              		.loc 1 729 6
 2224 002c 002B     		cmp	r3, #0
 2225 002e 1BD0     		beq	.L99
 730:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 731:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_DeleteObject(phost, handle, objectformatcode)) == USBH_BUSY)
 2226              		.loc 1 731 11
 2227 0030 10E0     		b	.L100
 2228              	.L103:
 732:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 733:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2229              		.loc 1 733 18
 2230 0032 FB68     		ldr	r3, [r7, #12]
 2231 0034 D3F8C424 		ldr	r2, [r3, #1220]
 2232              		.loc 1 733 26
 2233 0038 7B69     		ldr	r3, [r7, #20]
 2234 003a D31A     		subs	r3, r2, r3
ARM GAS  /tmp/ccILjF3V.s 			page 53


 2235              		.loc 1 733 10
 2236 003c 41F28832 		movw	r2, #5000
 2237 0040 9342     		cmp	r3, r2
 2238 0042 05D8     		bhi	.L101
 2239              		.loc 1 733 64 discriminator 1
 2240 0044 FB68     		ldr	r3, [r7, #12]
 2241 0046 93F82034 		ldrb	r3, [r3, #1056]
 2242 004a DBB2     		uxtb	r3, r3
 2243              		.loc 1 733 47 discriminator 1
 2244 004c 002B     		cmp	r3, #0
 2245 004e 01D1     		bne	.L100
 2246              	.L101:
 734:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 735:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2247              		.loc 1 735 16
 2248 0050 0223     		movs	r3, #2
 2249 0052 0AE0     		b	.L102
 2250              	.L100:
 731:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2251              		.loc 1 731 22
 2252 0054 7A68     		ldr	r2, [r7, #4]
 2253 0056 B968     		ldr	r1, [r7, #8]
 2254 0058 F868     		ldr	r0, [r7, #12]
 2255 005a FFF7FEFF 		bl	USBH_PTP_DeleteObject
 2256 005e 0346     		mov	r3, r0
 2257 0060 FB77     		strb	r3, [r7, #31]
 731:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2258              		.loc 1 731 11
 2259 0062 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2260 0064 012B     		cmp	r3, #1
 2261 0066 E4D0     		beq	.L103
 2262              	.L99:
 736:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 737:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 738:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 739:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 740:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2263              		.loc 1 740 10
 2264 0068 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2265              	.L102:
 741:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2266              		.loc 1 741 1
 2267 006a 1846     		mov	r0, r3
 2268 006c 2037     		adds	r7, r7, #32
 2269              	.LCFI85:
 2270              		.cfi_def_cfa_offset 8
 2271 006e BD46     		mov	sp, r7
 2272              	.LCFI86:
 2273              		.cfi_def_cfa_register 13
 2274              		@ sp needed
 2275 0070 80BD     		pop	{r7, pc}
 2276              		.cfi_endproc
 2277              	.LFE353:
 2279              		.section	.text.USBH_MTP_GetObject,"ax",%progbits
 2280              		.align	1
 2281              		.global	USBH_MTP_GetObject
 2282              		.syntax unified
ARM GAS  /tmp/ccILjF3V.s 			page 54


 2283              		.thumb
 2284              		.thumb_func
 2285              		.fpu fpv5-d16
 2287              	USBH_MTP_GetObject:
 2288              	.LFB354:
 742:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 743:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 744:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObject
 745:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object
 746:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 747:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 748:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 749:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 750:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObject(USBH_HandleTypeDef *phost,
 751:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                       uint32_t handle,
 752:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                       uint8_t *object)
 753:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2289              		.loc 1 753 1
 2290              		.cfi_startproc
 2291              		@ args = 0, pretend = 0, frame = 32
 2292              		@ frame_needed = 1, uses_anonymous_args = 0
 2293 0000 80B5     		push	{r7, lr}
 2294              	.LCFI87:
 2295              		.cfi_def_cfa_offset 8
 2296              		.cfi_offset 7, -8
 2297              		.cfi_offset 14, -4
 2298 0002 88B0     		sub	sp, sp, #32
 2299              	.LCFI88:
 2300              		.cfi_def_cfa_offset 40
 2301 0004 00AF     		add	r7, sp, #0
 2302              	.LCFI89:
 2303              		.cfi_def_cfa_register 7
 2304 0006 F860     		str	r0, [r7, #12]
 2305 0008 B960     		str	r1, [r7, #8]
 2306 000a 7A60     		str	r2, [r7, #4]
 754:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2307              		.loc 1 754 22
 2308 000c 0223     		movs	r3, #2
 2309 000e FB77     		strb	r3, [r7, #31]
 755:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2310              		.loc 1 755 61
 2311 0010 FB68     		ldr	r3, [r7, #12]
 2312 0012 D3F87C34 		ldr	r3, [r3, #1148]
 2313              		.loc 1 755 22
 2314 0016 DB69     		ldr	r3, [r3, #28]
 2315 0018 BB61     		str	r3, [r7, #24]
 756:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2316              		.loc 1 756 12
 2317 001a FB68     		ldr	r3, [r7, #12]
 2318 001c D3F8C434 		ldr	r3, [r3, #1220]
 2319 0020 7B61     		str	r3, [r7, #20]
 757:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 758:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2320              		.loc 1 758 17
 2321 0022 BA69     		ldr	r2, [r7, #24]
 2322 0024 42F2CC13 		movw	r3, #8652
 2323 0028 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccILjF3V.s 			page 55


 2324 002a 1B68     		ldr	r3, [r3]
 2325              		.loc 1 758 6
 2326 002c 002B     		cmp	r3, #0
 2327 002e 1BD0     		beq	.L105
 759:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 760:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObject(phost, handle, object)) == USBH_BUSY)
 2328              		.loc 1 760 11
 2329 0030 10E0     		b	.L106
 2330              	.L109:
 761:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 762:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2331              		.loc 1 762 18
 2332 0032 FB68     		ldr	r3, [r7, #12]
 2333 0034 D3F8C424 		ldr	r2, [r3, #1220]
 2334              		.loc 1 762 26
 2335 0038 7B69     		ldr	r3, [r7, #20]
 2336 003a D31A     		subs	r3, r2, r3
 2337              		.loc 1 762 10
 2338 003c 41F28832 		movw	r2, #5000
 2339 0040 9342     		cmp	r3, r2
 2340 0042 05D8     		bhi	.L107
 2341              		.loc 1 762 64 discriminator 1
 2342 0044 FB68     		ldr	r3, [r7, #12]
 2343 0046 93F82034 		ldrb	r3, [r3, #1056]
 2344 004a DBB2     		uxtb	r3, r3
 2345              		.loc 1 762 47 discriminator 1
 2346 004c 002B     		cmp	r3, #0
 2347 004e 01D1     		bne	.L106
 2348              	.L107:
 763:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 764:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2349              		.loc 1 764 16
 2350 0050 0223     		movs	r3, #2
 2351 0052 0AE0     		b	.L108
 2352              	.L106:
 760:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2353              		.loc 1 760 22
 2354 0054 7A68     		ldr	r2, [r7, #4]
 2355 0056 B968     		ldr	r1, [r7, #8]
 2356 0058 F868     		ldr	r0, [r7, #12]
 2357 005a FFF7FEFF 		bl	USBH_PTP_GetObject
 2358 005e 0346     		mov	r3, r0
 2359 0060 FB77     		strb	r3, [r7, #31]
 760:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2360              		.loc 1 760 11
 2361 0062 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2362 0064 012B     		cmp	r3, #1
 2363 0066 E4D0     		beq	.L109
 2364              	.L105:
 765:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 766:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 767:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 768:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2365              		.loc 1 768 10
 2366 0068 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2367              	.L108:
 769:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
ARM GAS  /tmp/ccILjF3V.s 			page 56


 2368              		.loc 1 769 1
 2369 006a 1846     		mov	r0, r3
 2370 006c 2037     		adds	r7, r7, #32
 2371              	.LCFI90:
 2372              		.cfi_def_cfa_offset 8
 2373 006e BD46     		mov	sp, r7
 2374              	.LCFI91:
 2375              		.cfi_def_cfa_register 13
 2376              		@ sp needed
 2377 0070 80BD     		pop	{r7, pc}
 2378              		.cfi_endproc
 2379              	.LFE354:
 2381              		.section	.text.USBH_MTP_GetPartialObject,"ax",%progbits
 2382              		.align	1
 2383              		.global	USBH_MTP_GetPartialObject
 2384              		.syntax unified
 2385              		.thumb
 2386              		.thumb_func
 2387              		.fpu fpv5-d16
 2389              	USBH_MTP_GetPartialObject:
 2390              	.LFB355:
 770:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 771:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 772:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetPartialObject
 773:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object
 774:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 775:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 776:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 777:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 778:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetPartialObject(USBH_HandleTypeDef *phost,
 779:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint32_t handle,
 780:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint32_t offset,
 781:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint32_t maxbytes,
 782:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint8_t *object,
 783:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                              uint32_t *len)
 784:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2391              		.loc 1 784 1
 2392              		.cfi_startproc
 2393              		@ args = 8, pretend = 0, frame = 32
 2394              		@ frame_needed = 1, uses_anonymous_args = 0
 2395 0000 80B5     		push	{r7, lr}
 2396              	.LCFI92:
 2397              		.cfi_def_cfa_offset 8
 2398              		.cfi_offset 7, -8
 2399              		.cfi_offset 14, -4
 2400 0002 8AB0     		sub	sp, sp, #40
 2401              	.LCFI93:
 2402              		.cfi_def_cfa_offset 48
 2403 0004 02AF     		add	r7, sp, #8
 2404              	.LCFI94:
 2405              		.cfi_def_cfa 7, 40
 2406 0006 F860     		str	r0, [r7, #12]
 2407 0008 B960     		str	r1, [r7, #8]
 2408 000a 7A60     		str	r2, [r7, #4]
 2409 000c 3B60     		str	r3, [r7]
 785:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2410              		.loc 1 785 22
ARM GAS  /tmp/ccILjF3V.s 			page 57


 2411 000e 0223     		movs	r3, #2
 2412 0010 FB77     		strb	r3, [r7, #31]
 786:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2413              		.loc 1 786 61
 2414 0012 FB68     		ldr	r3, [r7, #12]
 2415 0014 D3F87C34 		ldr	r3, [r3, #1148]
 2416              		.loc 1 786 22
 2417 0018 DB69     		ldr	r3, [r3, #28]
 2418 001a BB61     		str	r3, [r7, #24]
 787:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2419              		.loc 1 787 12
 2420 001c FB68     		ldr	r3, [r7, #12]
 2421 001e D3F8C434 		ldr	r3, [r3, #1220]
 2422 0022 7B61     		str	r3, [r7, #20]
 788:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 789:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2423              		.loc 1 789 17
 2424 0024 BA69     		ldr	r2, [r7, #24]
 2425 0026 42F2CC13 		movw	r3, #8652
 2426 002a 1344     		add	r3, r3, r2
 2427 002c 1B68     		ldr	r3, [r3]
 2428              		.loc 1 789 6
 2429 002e 002B     		cmp	r3, #0
 2430 0030 20D0     		beq	.L111
 790:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 791:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetPartialObject(phost, handle, offset, maxbytes,
 2431              		.loc 1 791 11
 2432 0032 10E0     		b	.L112
 2433              	.L115:
 792:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                object, len)) == USBH_BUSY)
 793:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 794:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2434              		.loc 1 794 18
 2435 0034 FB68     		ldr	r3, [r7, #12]
 2436 0036 D3F8C424 		ldr	r2, [r3, #1220]
 2437              		.loc 1 794 26
 2438 003a 7B69     		ldr	r3, [r7, #20]
 2439 003c D31A     		subs	r3, r2, r3
 2440              		.loc 1 794 10
 2441 003e 41F28832 		movw	r2, #5000
 2442 0042 9342     		cmp	r3, r2
 2443 0044 05D8     		bhi	.L113
 2444              		.loc 1 794 64 discriminator 1
 2445 0046 FB68     		ldr	r3, [r7, #12]
 2446 0048 93F82034 		ldrb	r3, [r3, #1056]
 2447 004c DBB2     		uxtb	r3, r3
 2448              		.loc 1 794 47 discriminator 1
 2449 004e 002B     		cmp	r3, #0
 2450 0050 01D1     		bne	.L112
 2451              	.L113:
 795:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 796:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2452              		.loc 1 796 16
 2453 0052 0223     		movs	r3, #2
 2454 0054 0FE0     		b	.L114
 2455              	.L112:
 791:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                object, len)) == USBH_BUSY)
ARM GAS  /tmp/ccILjF3V.s 			page 58


 2456              		.loc 1 791 22
 2457 0056 FB6A     		ldr	r3, [r7, #44]
 2458 0058 0193     		str	r3, [sp, #4]
 2459 005a BB6A     		ldr	r3, [r7, #40]
 2460 005c 0093     		str	r3, [sp]
 2461 005e 3B68     		ldr	r3, [r7]
 2462 0060 7A68     		ldr	r2, [r7, #4]
 2463 0062 B968     		ldr	r1, [r7, #8]
 2464 0064 F868     		ldr	r0, [r7, #12]
 2465 0066 FFF7FEFF 		bl	USBH_PTP_GetPartialObject
 2466 006a 0346     		mov	r3, r0
 2467 006c FB77     		strb	r3, [r7, #31]
 791:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                object, len)) == USBH_BUSY)
 2468              		.loc 1 791 11
 2469 006e FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2470 0070 012B     		cmp	r3, #1
 2471 0072 DFD0     		beq	.L115
 2472              	.L111:
 797:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 798:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 799:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 800:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 801:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2473              		.loc 1 801 10
 2474 0074 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2475              	.L114:
 802:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2476              		.loc 1 802 1
 2477 0076 1846     		mov	r0, r3
 2478 0078 2037     		adds	r7, r7, #32
 2479              	.LCFI95:
 2480              		.cfi_def_cfa_offset 8
 2481 007a BD46     		mov	sp, r7
 2482              	.LCFI96:
 2483              		.cfi_def_cfa_register 13
 2484              		@ sp needed
 2485 007c 80BD     		pop	{r7, pc}
 2486              		.cfi_endproc
 2487              	.LFE355:
 2489              		.section	.text.USBH_MTP_GetObjectPropsSupported,"ax",%progbits
 2490              		.align	1
 2491              		.global	USBH_MTP_GetObjectPropsSupported
 2492              		.syntax unified
 2493              		.thumb
 2494              		.thumb_func
 2495              		.fpu fpv5-d16
 2497              	USBH_MTP_GetObjectPropsSupported:
 2498              	.LFB356:
 803:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 804:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 805:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObjectPropsSupported
 806:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
 807:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 808:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 809:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 810:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 811:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectPropsSupported(USBH_HandleTypeDef *phost,
ARM GAS  /tmp/ccILjF3V.s 			page 59


 812:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                     uint16_t ofc,
 813:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                     uint32_t *propnum,
 814:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                     uint16_t *props)
 815:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2499              		.loc 1 815 1
 2500              		.cfi_startproc
 2501              		@ args = 0, pretend = 0, frame = 32
 2502              		@ frame_needed = 1, uses_anonymous_args = 0
 2503 0000 80B5     		push	{r7, lr}
 2504              	.LCFI97:
 2505              		.cfi_def_cfa_offset 8
 2506              		.cfi_offset 7, -8
 2507              		.cfi_offset 14, -4
 2508 0002 88B0     		sub	sp, sp, #32
 2509              	.LCFI98:
 2510              		.cfi_def_cfa_offset 40
 2511 0004 00AF     		add	r7, sp, #0
 2512              	.LCFI99:
 2513              		.cfi_def_cfa_register 7
 2514 0006 F860     		str	r0, [r7, #12]
 2515 0008 7A60     		str	r2, [r7, #4]
 2516 000a 3B60     		str	r3, [r7]
 2517 000c 0B46     		mov	r3, r1	@ movhi
 2518 000e 7B81     		strh	r3, [r7, #10]	@ movhi
 816:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2519              		.loc 1 816 22
 2520 0010 0223     		movs	r3, #2
 2521 0012 FB77     		strb	r3, [r7, #31]
 817:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2522              		.loc 1 817 61
 2523 0014 FB68     		ldr	r3, [r7, #12]
 2524 0016 D3F87C34 		ldr	r3, [r3, #1148]
 2525              		.loc 1 817 22
 2526 001a DB69     		ldr	r3, [r3, #28]
 2527 001c BB61     		str	r3, [r7, #24]
 818:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2528              		.loc 1 818 12
 2529 001e FB68     		ldr	r3, [r7, #12]
 2530 0020 D3F8C434 		ldr	r3, [r3, #1220]
 2531 0024 7B61     		str	r3, [r7, #20]
 819:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 820:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2532              		.loc 1 820 17
 2533 0026 BA69     		ldr	r2, [r7, #24]
 2534 0028 42F2CC13 		movw	r3, #8652
 2535 002c 1344     		add	r3, r3, r2
 2536 002e 1B68     		ldr	r3, [r3]
 2537              		.loc 1 820 6
 2538 0030 002B     		cmp	r3, #0
 2539 0032 1CD0     		beq	.L117
 821:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 822:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectPropsSupported(phost, ofc, propnum,
 2540              		.loc 1 822 11
 2541 0034 10E0     		b	.L118
 2542              	.L121:
 823:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                       props)) == USBH_BUSY)
 824:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
ARM GAS  /tmp/ccILjF3V.s 			page 60


 825:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2543              		.loc 1 825 18
 2544 0036 FB68     		ldr	r3, [r7, #12]
 2545 0038 D3F8C424 		ldr	r2, [r3, #1220]
 2546              		.loc 1 825 26
 2547 003c 7B69     		ldr	r3, [r7, #20]
 2548 003e D31A     		subs	r3, r2, r3
 2549              		.loc 1 825 10
 2550 0040 41F28832 		movw	r2, #5000
 2551 0044 9342     		cmp	r3, r2
 2552 0046 05D8     		bhi	.L119
 2553              		.loc 1 825 64 discriminator 1
 2554 0048 FB68     		ldr	r3, [r7, #12]
 2555 004a 93F82034 		ldrb	r3, [r3, #1056]
 2556 004e DBB2     		uxtb	r3, r3
 2557              		.loc 1 825 47 discriminator 1
 2558 0050 002B     		cmp	r3, #0
 2559 0052 01D1     		bne	.L118
 2560              	.L119:
 826:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 827:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2561              		.loc 1 827 16
 2562 0054 0223     		movs	r3, #2
 2563 0056 0BE0     		b	.L120
 2564              	.L118:
 822:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                       props)) == USBH_BUSY)
 2565              		.loc 1 822 22
 2566 0058 7989     		ldrh	r1, [r7, #10]
 2567 005a 3B68     		ldr	r3, [r7]
 2568 005c 7A68     		ldr	r2, [r7, #4]
 2569 005e F868     		ldr	r0, [r7, #12]
 2570 0060 FFF7FEFF 		bl	USBH_PTP_GetObjectPropsSupported
 2571 0064 0346     		mov	r3, r0
 2572 0066 FB77     		strb	r3, [r7, #31]
 822:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                       props)) == USBH_BUSY)
 2573              		.loc 1 822 11
 2574 0068 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2575 006a 012B     		cmp	r3, #1
 2576 006c E3D0     		beq	.L121
 2577              	.L117:
 828:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 829:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 830:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 831:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2578              		.loc 1 831 10
 2579 006e FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2580              	.L120:
 832:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2581              		.loc 1 832 1
 2582 0070 1846     		mov	r0, r3
 2583 0072 2037     		adds	r7, r7, #32
 2584              	.LCFI100:
 2585              		.cfi_def_cfa_offset 8
 2586 0074 BD46     		mov	sp, r7
 2587              	.LCFI101:
 2588              		.cfi_def_cfa_register 13
 2589              		@ sp needed
ARM GAS  /tmp/ccILjF3V.s 			page 61


 2590 0076 80BD     		pop	{r7, pc}
 2591              		.cfi_endproc
 2592              	.LFE356:
 2594              		.section	.text.USBH_MTP_GetObjectPropDesc,"ax",%progbits
 2595              		.align	1
 2596              		.global	USBH_MTP_GetObjectPropDesc
 2597              		.syntax unified
 2598              		.thumb
 2599              		.thumb_func
 2600              		.fpu fpv5-d16
 2602              	USBH_MTP_GetObjectPropDesc:
 2603              	.LFB357:
 833:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 834:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 835:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObjectPropDesc
 836:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
 837:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 838:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 839:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 840:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 841:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectPropDesc(USBH_HandleTypeDef *phost,
 842:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               uint16_t opc,
 843:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               uint16_t ofc,
 844:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               PTP_ObjectPropDescTypeDef *opd)
 845:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2604              		.loc 1 845 1
 2605              		.cfi_startproc
 2606              		@ args = 0, pretend = 0, frame = 32
 2607              		@ frame_needed = 1, uses_anonymous_args = 0
 2608 0000 80B5     		push	{r7, lr}
 2609              	.LCFI102:
 2610              		.cfi_def_cfa_offset 8
 2611              		.cfi_offset 7, -8
 2612              		.cfi_offset 14, -4
 2613 0002 88B0     		sub	sp, sp, #32
 2614              	.LCFI103:
 2615              		.cfi_def_cfa_offset 40
 2616 0004 00AF     		add	r7, sp, #0
 2617              	.LCFI104:
 2618              		.cfi_def_cfa_register 7
 2619 0006 F860     		str	r0, [r7, #12]
 2620 0008 7B60     		str	r3, [r7, #4]
 2621 000a 0B46     		mov	r3, r1	@ movhi
 2622 000c 7B81     		strh	r3, [r7, #10]	@ movhi
 2623 000e 1346     		mov	r3, r2	@ movhi
 2624 0010 3B81     		strh	r3, [r7, #8]	@ movhi
 846:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2625              		.loc 1 846 22
 2626 0012 0223     		movs	r3, #2
 2627 0014 FB77     		strb	r3, [r7, #31]
 847:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2628              		.loc 1 847 61
 2629 0016 FB68     		ldr	r3, [r7, #12]
 2630 0018 D3F87C34 		ldr	r3, [r3, #1148]
 2631              		.loc 1 847 22
 2632 001c DB69     		ldr	r3, [r3, #28]
 2633 001e BB61     		str	r3, [r7, #24]
ARM GAS  /tmp/ccILjF3V.s 			page 62


 848:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2634              		.loc 1 848 12
 2635 0020 FB68     		ldr	r3, [r7, #12]
 2636 0022 D3F8C434 		ldr	r3, [r3, #1220]
 2637 0026 7B61     		str	r3, [r7, #20]
 849:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 850:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2638              		.loc 1 850 17
 2639 0028 BA69     		ldr	r2, [r7, #24]
 2640 002a 42F2CC13 		movw	r3, #8652
 2641 002e 1344     		add	r3, r3, r2
 2642 0030 1B68     		ldr	r3, [r3]
 2643              		.loc 1 850 6
 2644 0032 002B     		cmp	r3, #0
 2645 0034 1CD0     		beq	.L123
 851:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 852:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectPropDesc(phost, opc, ofc, opd)) == USBH_BUSY)
 2646              		.loc 1 852 11
 2647 0036 10E0     		b	.L124
 2648              	.L127:
 853:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 854:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2649              		.loc 1 854 18
 2650 0038 FB68     		ldr	r3, [r7, #12]
 2651 003a D3F8C424 		ldr	r2, [r3, #1220]
 2652              		.loc 1 854 26
 2653 003e 7B69     		ldr	r3, [r7, #20]
 2654 0040 D31A     		subs	r3, r2, r3
 2655              		.loc 1 854 10
 2656 0042 41F28832 		movw	r2, #5000
 2657 0046 9342     		cmp	r3, r2
 2658 0048 05D8     		bhi	.L125
 2659              		.loc 1 854 64 discriminator 1
 2660 004a FB68     		ldr	r3, [r7, #12]
 2661 004c 93F82034 		ldrb	r3, [r3, #1056]
 2662 0050 DBB2     		uxtb	r3, r3
 2663              		.loc 1 854 47 discriminator 1
 2664 0052 002B     		cmp	r3, #0
 2665 0054 01D1     		bne	.L124
 2666              	.L125:
 855:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 856:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2667              		.loc 1 856 16
 2668 0056 0223     		movs	r3, #2
 2669 0058 0BE0     		b	.L126
 2670              	.L124:
 852:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2671              		.loc 1 852 22
 2672 005a 3A89     		ldrh	r2, [r7, #8]
 2673 005c 7989     		ldrh	r1, [r7, #10]
 2674 005e 7B68     		ldr	r3, [r7, #4]
 2675 0060 F868     		ldr	r0, [r7, #12]
 2676 0062 FFF7FEFF 		bl	USBH_PTP_GetObjectPropDesc
 2677 0066 0346     		mov	r3, r0
 2678 0068 FB77     		strb	r3, [r7, #31]
 852:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2679              		.loc 1 852 11
ARM GAS  /tmp/ccILjF3V.s 			page 63


 2680 006a FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2681 006c 012B     		cmp	r3, #1
 2682 006e E3D0     		beq	.L127
 2683              	.L123:
 857:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 858:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 859:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 860:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2684              		.loc 1 860 10
 2685 0070 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2686              	.L126:
 861:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2687              		.loc 1 861 1
 2688 0072 1846     		mov	r0, r3
 2689 0074 2037     		adds	r7, r7, #32
 2690              	.LCFI105:
 2691              		.cfi_def_cfa_offset 8
 2692 0076 BD46     		mov	sp, r7
 2693              	.LCFI106:
 2694              		.cfi_def_cfa_register 13
 2695              		@ sp needed
 2696 0078 80BD     		pop	{r7, pc}
 2697              		.cfi_endproc
 2698              	.LFE357:
 2700              		.section	.text.USBH_MTP_GetObjectPropList,"ax",%progbits
 2701              		.align	1
 2702              		.global	USBH_MTP_GetObjectPropList
 2703              		.syntax unified
 2704              		.thumb
 2705              		.thumb_func
 2706              		.fpu fpv5-d16
 2708              	USBH_MTP_GetObjectPropList:
 2709              	.LFB358:
 862:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 863:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 864:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetObjectPropList
 865:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
 866:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 867:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 868:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 869:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 870:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetObjectPropList(USBH_HandleTypeDef *phost,
 871:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               uint32_t handle,
 872:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               MTP_PropertiesTypedef *pprops,
 873:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               uint32_t *nrofprops)
 874:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2710              		.loc 1 874 1
 2711              		.cfi_startproc
 2712              		@ args = 0, pretend = 0, frame = 32
 2713              		@ frame_needed = 1, uses_anonymous_args = 0
 2714 0000 80B5     		push	{r7, lr}
 2715              	.LCFI107:
 2716              		.cfi_def_cfa_offset 8
 2717              		.cfi_offset 7, -8
 2718              		.cfi_offset 14, -4
 2719 0002 88B0     		sub	sp, sp, #32
 2720              	.LCFI108:
ARM GAS  /tmp/ccILjF3V.s 			page 64


 2721              		.cfi_def_cfa_offset 40
 2722 0004 00AF     		add	r7, sp, #0
 2723              	.LCFI109:
 2724              		.cfi_def_cfa_register 7
 2725 0006 F860     		str	r0, [r7, #12]
 2726 0008 B960     		str	r1, [r7, #8]
 2727 000a 7A60     		str	r2, [r7, #4]
 2728 000c 3B60     		str	r3, [r7]
 875:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2729              		.loc 1 875 22
 2730 000e 0223     		movs	r3, #2
 2731 0010 FB77     		strb	r3, [r7, #31]
 876:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2732              		.loc 1 876 61
 2733 0012 FB68     		ldr	r3, [r7, #12]
 2734 0014 D3F87C34 		ldr	r3, [r3, #1148]
 2735              		.loc 1 876 22
 2736 0018 DB69     		ldr	r3, [r3, #28]
 2737 001a BB61     		str	r3, [r7, #24]
 877:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2738              		.loc 1 877 12
 2739 001c FB68     		ldr	r3, [r7, #12]
 2740 001e D3F8C434 		ldr	r3, [r3, #1220]
 2741 0022 7B61     		str	r3, [r7, #20]
 878:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 879:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2742              		.loc 1 879 17
 2743 0024 BA69     		ldr	r2, [r7, #24]
 2744 0026 42F2CC13 		movw	r3, #8652
 2745 002a 1344     		add	r3, r3, r2
 2746 002c 1B68     		ldr	r3, [r3]
 2747              		.loc 1 879 6
 2748 002e 002B     		cmp	r3, #0
 2749 0030 1CD0     		beq	.L129
 880:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 881:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetObjectPropList(phost, handle, pprops,
 2750              		.loc 1 881 11
 2751 0032 10E0     		b	.L130
 2752              	.L133:
 882:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 nrofprops)) == USBH_BUSY)
 883:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 884:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2753              		.loc 1 884 18
 2754 0034 FB68     		ldr	r3, [r7, #12]
 2755 0036 D3F8C424 		ldr	r2, [r3, #1220]
 2756              		.loc 1 884 26
 2757 003a 7B69     		ldr	r3, [r7, #20]
 2758 003c D31A     		subs	r3, r2, r3
 2759              		.loc 1 884 10
 2760 003e 41F28832 		movw	r2, #5000
 2761 0042 9342     		cmp	r3, r2
 2762 0044 05D8     		bhi	.L131
 2763              		.loc 1 884 64 discriminator 1
 2764 0046 FB68     		ldr	r3, [r7, #12]
 2765 0048 93F82034 		ldrb	r3, [r3, #1056]
 2766 004c DBB2     		uxtb	r3, r3
 2767              		.loc 1 884 47 discriminator 1
ARM GAS  /tmp/ccILjF3V.s 			page 65


 2768 004e 002B     		cmp	r3, #0
 2769 0050 01D1     		bne	.L130
 2770              	.L131:
 885:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 886:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2771              		.loc 1 886 16
 2772 0052 0223     		movs	r3, #2
 2773 0054 0BE0     		b	.L132
 2774              	.L130:
 881:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 nrofprops)) == USBH_BUSY)
 2775              		.loc 1 881 22
 2776 0056 3B68     		ldr	r3, [r7]
 2777 0058 7A68     		ldr	r2, [r7, #4]
 2778 005a B968     		ldr	r1, [r7, #8]
 2779 005c F868     		ldr	r0, [r7, #12]
 2780 005e FFF7FEFF 		bl	USBH_PTP_GetObjectPropList
 2781 0062 0346     		mov	r3, r0
 2782 0064 FB77     		strb	r3, [r7, #31]
 881:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                                 nrofprops)) == USBH_BUSY)
 2783              		.loc 1 881 11
 2784 0066 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2785 0068 012B     		cmp	r3, #1
 2786 006a E3D0     		beq	.L133
 2787              	.L129:
 887:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 888:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 889:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 890:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2788              		.loc 1 890 10
 2789 006c FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2790              	.L132:
 891:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2791              		.loc 1 891 1
 2792 006e 1846     		mov	r0, r3
 2793 0070 2037     		adds	r7, r7, #32
 2794              	.LCFI110:
 2795              		.cfi_def_cfa_offset 8
 2796 0072 BD46     		mov	sp, r7
 2797              	.LCFI111:
 2798              		.cfi_def_cfa_register 13
 2799              		@ sp needed
 2800 0074 80BD     		pop	{r7, pc}
 2801              		.cfi_endproc
 2802              	.LFE358:
 2804              		.section	.text.USBH_MTP_SendObject,"ax",%progbits
 2805              		.align	1
 2806              		.global	USBH_MTP_SendObject
 2807              		.syntax unified
 2808              		.thumb
 2809              		.thumb_func
 2810              		.fpu fpv5-d16
 2812              	USBH_MTP_SendObject:
 2813              	.LFB359:
 892:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 893:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 894:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_SendObject
 895:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Send an object
ARM GAS  /tmp/ccILjF3V.s 			page 66


 896:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 897:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
 898:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
 899:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 900:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_SendObject(USBH_HandleTypeDef *phost,
 901:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                        uint32_t handle,
 902:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                        uint8_t *object,
 903:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                        uint32_t size)
 904:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2814              		.loc 1 904 1
 2815              		.cfi_startproc
 2816              		@ args = 0, pretend = 0, frame = 32
 2817              		@ frame_needed = 1, uses_anonymous_args = 0
 2818 0000 80B5     		push	{r7, lr}
 2819              	.LCFI112:
 2820              		.cfi_def_cfa_offset 8
 2821              		.cfi_offset 7, -8
 2822              		.cfi_offset 14, -4
 2823 0002 88B0     		sub	sp, sp, #32
 2824              	.LCFI113:
 2825              		.cfi_def_cfa_offset 40
 2826 0004 00AF     		add	r7, sp, #0
 2827              	.LCFI114:
 2828              		.cfi_def_cfa_register 7
 2829 0006 F860     		str	r0, [r7, #12]
 2830 0008 B960     		str	r1, [r7, #8]
 2831 000a 7A60     		str	r2, [r7, #4]
 2832 000c 3B60     		str	r3, [r7]
 905:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 2833              		.loc 1 905 22
 2834 000e 0223     		movs	r3, #2
 2835 0010 FB77     		strb	r3, [r7, #31]
 906:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2836              		.loc 1 906 61
 2837 0012 FB68     		ldr	r3, [r7, #12]
 2838 0014 D3F87C34 		ldr	r3, [r3, #1148]
 2839              		.loc 1 906 22
 2840 0018 DB69     		ldr	r3, [r3, #28]
 2841 001a BB61     		str	r3, [r7, #24]
 907:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 2842              		.loc 1 907 12
 2843 001c FB68     		ldr	r3, [r7, #12]
 2844 001e D3F8C434 		ldr	r3, [r3, #1220]
 2845 0022 7B61     		str	r3, [r7, #20]
 908:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 909:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 2846              		.loc 1 909 17
 2847 0024 BA69     		ldr	r2, [r7, #24]
 2848 0026 42F2CC13 		movw	r3, #8652
 2849 002a 1344     		add	r3, r3, r2
 2850 002c 1B68     		ldr	r3, [r3]
 2851              		.loc 1 909 6
 2852 002e 002B     		cmp	r3, #0
 2853 0030 1CD0     		beq	.L135
 910:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 911:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_SendObject(phost, handle, object, size)) == USBH_BUSY)
 2854              		.loc 1 911 11
ARM GAS  /tmp/ccILjF3V.s 			page 67


 2855 0032 10E0     		b	.L136
 2856              	.L139:
 912:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 913:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 2857              		.loc 1 913 18
 2858 0034 FB68     		ldr	r3, [r7, #12]
 2859 0036 D3F8C424 		ldr	r2, [r3, #1220]
 2860              		.loc 1 913 26
 2861 003a 7B69     		ldr	r3, [r7, #20]
 2862 003c D31A     		subs	r3, r2, r3
 2863              		.loc 1 913 10
 2864 003e 41F28832 		movw	r2, #5000
 2865 0042 9342     		cmp	r3, r2
 2866 0044 05D8     		bhi	.L137
 2867              		.loc 1 913 64 discriminator 1
 2868 0046 FB68     		ldr	r3, [r7, #12]
 2869 0048 93F82034 		ldrb	r3, [r3, #1056]
 2870 004c DBB2     		uxtb	r3, r3
 2871              		.loc 1 913 47 discriminator 1
 2872 004e 002B     		cmp	r3, #0
 2873 0050 01D1     		bne	.L136
 2874              	.L137:
 914:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 915:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 2875              		.loc 1 915 16
 2876 0052 0223     		movs	r3, #2
 2877 0054 0BE0     		b	.L138
 2878              	.L136:
 911:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2879              		.loc 1 911 22
 2880 0056 3B68     		ldr	r3, [r7]
 2881 0058 7A68     		ldr	r2, [r7, #4]
 2882 005a B968     		ldr	r1, [r7, #8]
 2883 005c F868     		ldr	r0, [r7, #12]
 2884 005e FFF7FEFF 		bl	USBH_PTP_SendObject
 2885 0062 0346     		mov	r3, r0
 2886 0064 FB77     		strb	r3, [r7, #31]
 911:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 2887              		.loc 1 911 11
 2888 0066 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2889 0068 012B     		cmp	r3, #1
 2890 006a E3D0     		beq	.L139
 2891              	.L135:
 916:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 917:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
 918:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 919:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 2892              		.loc 1 919 10
 2893 006c FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2894              	.L138:
 920:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 2895              		.loc 1 920 1
 2896 006e 1846     		mov	r0, r3
 2897 0070 2037     		adds	r7, r7, #32
 2898              	.LCFI115:
 2899              		.cfi_def_cfa_offset 8
 2900 0072 BD46     		mov	sp, r7
ARM GAS  /tmp/ccILjF3V.s 			page 68


 2901              	.LCFI116:
 2902              		.cfi_def_cfa_register 13
 2903              		@ sp needed
 2904 0074 80BD     		pop	{r7, pc}
 2905              		.cfi_endproc
 2906              	.LFE359:
 2908              		.section	.text.USBH_MTP_Events,"ax",%progbits
 2909              		.align	1
 2910              		.syntax unified
 2911              		.thumb
 2912              		.thumb_func
 2913              		.fpu fpv5-d16
 2915              	USBH_MTP_Events:
 2916              	.LFB360:
 921:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 922:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 923:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  * @brief  Handle HID Control process
 924:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  * @param  phost: Host handle
 925:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  * @retval USBH Status
 926:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****  */
 927:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static USBH_StatusTypeDef USBH_MTP_Events(USBH_HandleTypeDef *phost)
 928:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 2917              		.loc 1 928 1
 2918              		.cfi_startproc
 2919              		@ args = 0, pretend = 0, frame = 16
 2920              		@ frame_needed = 1, uses_anonymous_args = 0
 2921 0000 80B5     		push	{r7, lr}
 2922              	.LCFI117:
 2923              		.cfi_def_cfa_offset 8
 2924              		.cfi_offset 7, -8
 2925              		.cfi_offset 14, -4
 2926 0002 84B0     		sub	sp, sp, #16
 2927              	.LCFI118:
 2928              		.cfi_def_cfa_offset 24
 2929 0004 00AF     		add	r7, sp, #0
 2930              	.LCFI119:
 2931              		.cfi_def_cfa_register 7
 2932 0006 7860     		str	r0, [r7, #4]
 929:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 2933              		.loc 1 929 22
 2934 0008 0123     		movs	r3, #1
 2935 000a FB73     		strb	r3, [r7, #15]
 930:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 2936              		.loc 1 930 61
 2937 000c 7B68     		ldr	r3, [r7, #4]
 2938 000e D3F87C34 		ldr	r3, [r3, #1148]
 2939              		.loc 1 930 22
 2940 0012 DB69     		ldr	r3, [r3, #28]
 2941 0014 BB60     		str	r3, [r7, #8]
 931:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 932:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   switch (MTP_Handle->events.state)
 2942              		.loc 1 932 29
 2943 0016 BA68     		ldr	r2, [r7, #8]
 2944 0018 41F63C53 		movw	r3, #7484
 2945 001c 1344     		add	r3, r3, r2
 2946 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2947              		.loc 1 932 3
ARM GAS  /tmp/ccILjF3V.s 			page 69


 2948 0020 002B     		cmp	r3, #0
 2949 0022 02D0     		beq	.L141
 2950 0024 012B     		cmp	r3, #1
 2951 0026 28D0     		beq	.L142
 933:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 934:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case MTP_EVENTS_INIT:
 935:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if ((phost->Timer & 1U) == 0U)
 936:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 937:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->events.timer = phost->Timer;
 938:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_InterruptReceiveData(phost,
 939:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t *)(void *) & (MTP_Handle->events.container),
 940:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t)MTP_Handle->NotificationEpSize,
 941:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   MTP_Handle->NotificationPipe);
 942:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 943:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 944:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->events.state = MTP_EVENTS_GETDATA;
 945:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 946:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 947:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case MTP_EVENTS_GETDATA:
 948:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (USBH_LL_GetURBState(phost, MTP_Handle->NotificationPipe) == USBH_URB_DONE)
 949:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 950:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_DecodeEvent(phost);
 951:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 952:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 953:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if ((phost->Timer - MTP_Handle->events.timer) >= MTP_Handle->events.poll)
 954:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 955:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         MTP_Handle->events.timer = phost->Timer;
 956:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 957:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_InterruptReceiveData(phost,
 958:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t *)(void *) & (MTP_Handle->events.container),
 959:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t)MTP_Handle->NotificationEpSize,
 960:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   MTP_Handle->NotificationPipe);
 961:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 962:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 963:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 964:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 965:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     default:
 966:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 2952              		.loc 1 966 7
 2953 0028 63E0     		b	.L145
 2954              	.L141:
 935:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 2955              		.loc 1 935 17
 2956 002a 7B68     		ldr	r3, [r7, #4]
 2957 002c D3F8C434 		ldr	r3, [r3, #1220]
 935:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 2958              		.loc 1 935 25
 2959 0030 03F00103 		and	r3, r3, #1
 935:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 2960              		.loc 1 935 10
 2961 0034 002B     		cmp	r3, #0
 2962 0036 59D1     		bne	.L149
 937:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_InterruptReceiveData(phost,
 2963              		.loc 1 937 41
 2964 0038 7B68     		ldr	r3, [r7, #4]
 2965 003a D3F8C424 		ldr	r2, [r3, #1220]
 937:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         USBH_InterruptReceiveData(phost,
ARM GAS  /tmp/ccILjF3V.s 			page 70


 2966              		.loc 1 937 34
 2967 003e BB68     		ldr	r3, [r7, #8]
 2968 0040 03F5EA53 		add	r3, r3, #7488
 2969 0044 1A60     		str	r2, [r3]
 939:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t)MTP_Handle->NotificationEpSize,
 2970              		.loc 1 939 55
 2971 0046 BB68     		ldr	r3, [r7, #8]
 2972 0048 41F64851 		movw	r1, #7496
 2973 004c 1944     		add	r1, r1, r3
 940:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   MTP_Handle->NotificationPipe);
 2974              		.loc 1 940 54
 2975 004e BA68     		ldr	r2, [r7, #8]
 2976 0050 41F63653 		movw	r3, #7478
 2977 0054 1344     		add	r3, r3, r2
 2978 0056 1B88     		ldrh	r3, [r3]
 938:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t *)(void *) & (MTP_Handle->events.container),
 2979              		.loc 1 938 9
 2980 0058 D8B2     		uxtb	r0, r3
 2981 005a BA68     		ldr	r2, [r7, #8]
 2982 005c 41F62E53 		movw	r3, #7470
 2983 0060 1344     		add	r3, r3, r2
 2984 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2985 0064 0246     		mov	r2, r0
 2986 0066 7868     		ldr	r0, [r7, #4]
 2987 0068 FFF7FEFF 		bl	USBH_InterruptReceiveData
 944:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 2988              		.loc 1 944 34
 2989 006c BA68     		ldr	r2, [r7, #8]
 2990 006e 41F63C53 		movw	r3, #7484
 2991 0072 1344     		add	r3, r3, r2
 2992 0074 0122     		movs	r2, #1
 2993 0076 1A70     		strb	r2, [r3]
 946:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case MTP_EVENTS_GETDATA:
 2994              		.loc 1 946 7
 2995 0078 38E0     		b	.L149
 2996              	.L142:
 948:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 2997              		.loc 1 948 11
 2998 007a BA68     		ldr	r2, [r7, #8]
 2999 007c 41F62E53 		movw	r3, #7470
 3000 0080 1344     		add	r3, r3, r2
 3001 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3002 0084 1946     		mov	r1, r3
 3003 0086 7868     		ldr	r0, [r7, #4]
 3004 0088 FFF7FEFF 		bl	USBH_LL_GetURBState
 3005 008c 0346     		mov	r3, r0
 948:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 3006              		.loc 1 948 10
 3007 008e 012B     		cmp	r3, #1
 3008 0090 02D1     		bne	.L146
 950:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
 3009              		.loc 1 950 9
 3010 0092 7868     		ldr	r0, [r7, #4]
 3011 0094 FFF7FEFF 		bl	MTP_DecodeEvent
 3012              	.L146:
 953:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 3013              		.loc 1 953 17
ARM GAS  /tmp/ccILjF3V.s 			page 71


 3014 0098 7B68     		ldr	r3, [r7, #4]
 3015 009a D3F8C424 		ldr	r2, [r3, #1220]
 953:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 3016              		.loc 1 953 45
 3017 009e BB68     		ldr	r3, [r7, #8]
 3018 00a0 03F5EA53 		add	r3, r3, #7488
 3019 00a4 1B68     		ldr	r3, [r3]
 953:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 3020              		.loc 1 953 25
 3021 00a6 D21A     		subs	r2, r2, r3
 953:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 3022              		.loc 1 953 74
 3023 00a8 B968     		ldr	r1, [r7, #8]
 3024 00aa 41F64453 		movw	r3, #7492
 3025 00ae 0B44     		add	r3, r3, r1
 3026 00b0 1B88     		ldrh	r3, [r3]
 953:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
 3027              		.loc 1 953 10
 3028 00b2 9A42     		cmp	r2, r3
 3029 00b4 1CD3     		bcc	.L150
 955:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 3030              		.loc 1 955 41
 3031 00b6 7B68     		ldr	r3, [r7, #4]
 3032 00b8 D3F8C424 		ldr	r2, [r3, #1220]
 955:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 3033              		.loc 1 955 34
 3034 00bc BB68     		ldr	r3, [r7, #8]
 3035 00be 03F5EA53 		add	r3, r3, #7488
 3036 00c2 1A60     		str	r2, [r3]
 958:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t)MTP_Handle->NotificationEpSize,
 3037              		.loc 1 958 55
 3038 00c4 BB68     		ldr	r3, [r7, #8]
 3039 00c6 41F64851 		movw	r1, #7496
 3040 00ca 1944     		add	r1, r1, r3
 959:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   MTP_Handle->NotificationPipe);
 3041              		.loc 1 959 54
 3042 00cc BA68     		ldr	r2, [r7, #8]
 3043 00ce 41F63653 		movw	r3, #7478
 3044 00d2 1344     		add	r3, r3, r2
 3045 00d4 1B88     		ldrh	r3, [r3]
 957:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                   (uint8_t *)(void *) & (MTP_Handle->events.container),
 3046              		.loc 1 957 9
 3047 00d6 D8B2     		uxtb	r0, r3
 3048 00d8 BA68     		ldr	r2, [r7, #8]
 3049 00da 41F62E53 		movw	r3, #7470
 3050 00de 1344     		add	r3, r3, r2
 3051 00e0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3052 00e2 0246     		mov	r2, r0
 3053 00e4 7868     		ldr	r0, [r7, #4]
 3054 00e6 FFF7FEFF 		bl	USBH_InterruptReceiveData
 963:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 3055              		.loc 1 963 7
 3056 00ea 01E0     		b	.L150
 3057              	.L149:
 946:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case MTP_EVENTS_GETDATA:
 3058              		.loc 1 946 7
 3059 00ec 00BF     		nop
ARM GAS  /tmp/ccILjF3V.s 			page 72


 3060 00ee 00E0     		b	.L145
 3061              	.L150:
 963:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 3062              		.loc 1 963 7
 3063 00f0 00BF     		nop
 3064              	.L145:
 967:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
 968:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 969:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 3065              		.loc 1 969 10
 3066 00f2 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 970:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 3067              		.loc 1 970 1
 3068 00f4 1846     		mov	r0, r3
 3069 00f6 1037     		adds	r7, r7, #16
 3070              	.LCFI120:
 3071              		.cfi_def_cfa_offset 8
 3072 00f8 BD46     		mov	sp, r7
 3073              	.LCFI121:
 3074              		.cfi_def_cfa_register 13
 3075              		@ sp needed
 3076 00fa 80BD     		pop	{r7, pc}
 3077              		.cfi_endproc
 3078              	.LFE360:
 3080              		.section	.text.MTP_DecodeEvent,"ax",%progbits
 3081              		.align	1
 3082              		.syntax unified
 3083              		.thumb
 3084              		.thumb_func
 3085              		.fpu fpv5-d16
 3087              	MTP_DecodeEvent:
 3088              	.LFB361:
 971:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 972:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
 973:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  MTP_DecodeEvent
 974:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Decode device event sent by responder
 975:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
 976:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval None
 977:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
 978:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** static void MTP_DecodeEvent(USBH_HandleTypeDef *phost)
 979:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 3089              		.loc 1 979 1
 3090              		.cfi_startproc
 3091              		@ args = 0, pretend = 0, frame = 24
 3092              		@ frame_needed = 1, uses_anonymous_args = 0
 3093 0000 80B5     		push	{r7, lr}
 3094              	.LCFI122:
 3095              		.cfi_def_cfa_offset 8
 3096              		.cfi_offset 7, -8
 3097              		.cfi_offset 14, -4
 3098 0002 86B0     		sub	sp, sp, #24
 3099              	.LCFI123:
 3100              		.cfi_def_cfa_offset 32
 3101 0004 00AF     		add	r7, sp, #0
 3102              	.LCFI124:
 3103              		.cfi_def_cfa_register 7
 3104 0006 7860     		str	r0, [r7, #4]
ARM GAS  /tmp/ccILjF3V.s 			page 73


 980:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 3105              		.loc 1 980 61
 3106 0008 7B68     		ldr	r3, [r7, #4]
 3107 000a D3F87C34 		ldr	r3, [r3, #1148]
 3108              		.loc 1 980 22
 3109 000e DB69     		ldr	r3, [r3, #28]
 3110 0010 7B61     		str	r3, [r7, #20]
 981:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 982:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint16_t code;
 983:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t param1;
 984:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 985:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Process the event */
 986:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   code = MTP_Handle->events.container.code;
 3111              		.loc 1 986 8
 3112 0012 7A69     		ldr	r2, [r7, #20]
 3113 0014 41F64E53 		movw	r3, #7502
 3114 0018 1344     		add	r3, r3, r2
 3115 001a 1B88     		ldrh	r3, [r3]	@ movhi
 3116 001c 7B82     		strh	r3, [r7, #18]	@ movhi
 987:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   param1 = MTP_Handle->events.container.param1;
 3117              		.loc 1 987 10
 3118 001e 7A69     		ldr	r2, [r7, #20]
 3119 0020 41F65453 		movw	r3, #7508
 3120 0024 1344     		add	r3, r3, r2
 3121 0026 1B68     		ldr	r3, [r3]
 3122 0028 FB60     		str	r3, [r7, #12]
 988:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 989:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   switch (code)
 3123              		.loc 1 989 3
 3124 002a 7B8A     		ldrh	r3, [r7, #18]
 3125 002c A3F58043 		sub	r3, r3, #16384
 3126 0030 0E2B     		cmp	r3, #14
 3127 0032 21D8     		bhi	.L170
 3128 0034 01A2     		adr	r2, .L154
 3129 0036 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 3130 003a 00BF     		.p2align 2
 3131              	.L154:
 3132 003c 79000000 		.word	.L170+1
 3133 0040 79000000 		.word	.L170+1
 3134 0044 79000000 		.word	.L170+1
 3135 0048 79000000 		.word	.L170+1
 3136 004c 79000000 		.word	.L170+1
 3137 0050 79000000 		.word	.L170+1
 3138 0054 79000000 		.word	.L170+1
 3139 0058 79000000 		.word	.L170+1
 3140 005c 79000000 		.word	.L170+1
 3141 0060 79000000 		.word	.L170+1
 3142 0064 79000000 		.word	.L170+1
 3143 0068 79000000 		.word	.L170+1
 3144 006c 79000000 		.word	.L170+1
 3145 0070 79000000 		.word	.L170+1
 3146 0074 79000000 		.word	.L170+1
 3147              		.p2align 1
 3148              	.L170:
 990:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
 991:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_Undefined:
 992:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_Undefined in session %u", MTP_Handle->ptp.session_id);
ARM GAS  /tmp/ccILjF3V.s 			page 74


 993:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 994:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 995:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_CancelTransaction:
 996:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_CancelTransaction in session %u", MTP_Handle->ptp.session_id);
 997:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 998:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
 999:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_ObjectAdded:
1000:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_ObjectAdded in session %u", MTP_Handle->ptp.session_id);
1001:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1002:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1003:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_ObjectRemoved:
1004:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_ObjectRemoved in session %u", MTP_Handle->ptp.session_id);
1005:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1006:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1007:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StoreAdded:
1008:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_StoreAdded in session %u", MTP_Handle->ptp.session_id);
1009:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1010:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1011:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StoreRemoved:
1012:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_StoreRemoved in session %u", MTP_Handle->ptp.session_id);
1013:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1014:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1015:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_DevicePropChanged:
1016:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_DevicePropChanged in session %u", MTP_Handle->ptp.session_id);
1017:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1018:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1019:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_ObjectInfoChanged:
1020:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_ObjectInfoChanged in session %u", MTP_Handle->ptp.session_id);
1021:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1022:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1023:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_DeviceInfoChanged:
1024:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_DeviceInfoChanged in session %u", MTP_Handle->ptp.session_id);
1025:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1026:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1027:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_RequestObjectTransfer:
1028:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_RequestObjectTransfer in session %u", MTP_Handle->ptp.session_id);
1029:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1030:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1031:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StoreFull:
1032:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_StoreFull in session %u", MTP_Handle->ptp.session_id);
1033:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1034:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1035:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_DeviceReset:
1036:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_DeviceReset in session %u", MTP_Handle->ptp.session_id);
1037:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1038:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1039:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_StorageInfoChanged :
1040:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_StorageInfoChanged in session %u", MTP_Handle->ptp.session_id);
1041:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1042:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1043:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_CaptureComplete :
1044:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_CaptureComplete in session %u", MTP_Handle->ptp.session_id);
1045:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
1046:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1047:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     case PTP_EC_UnreportedStatus :
1048:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("EVT: PTP_EC_UnreportedStatus in session %u", MTP_Handle->ptp.session_id);
1049:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
ARM GAS  /tmp/ccILjF3V.s 			page 75


1050:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1051:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     default :
1052:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       USBH_DbgLog("Received unknown event in session %u", MTP_Handle->ptp.session_id);
1053:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       break;
 3149              		.loc 1 1053 7
 3150 0078 00BF     		nop
1054:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
1055:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1056:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_MTP_EventsCallback(phost, (uint32_t)code, param1);
 3151              		.loc 1 1056 3
 3152 007a 7B8A     		ldrh	r3, [r7, #18]
 3153 007c FA68     		ldr	r2, [r7, #12]
 3154 007e 1946     		mov	r1, r3
 3155 0080 7868     		ldr	r0, [r7, #4]
 3156 0082 FFF7FEFF 		bl	USBH_MTP_EventsCallback
1057:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 3157              		.loc 1 1057 1
 3158 0086 00BF     		nop
 3159 0088 1837     		adds	r7, r7, #24
 3160              	.LCFI125:
 3161              		.cfi_def_cfa_offset 8
 3162 008a BD46     		mov	sp, r7
 3163              	.LCFI126:
 3164              		.cfi_def_cfa_register 13
 3165              		@ sp needed
 3166 008c 80BD     		pop	{r7, pc}
 3167              		.cfi_endproc
 3168              	.LFE361:
 3170 008e 00BF     		.section	.text.USBH_MTP_GetDevicePropDesc,"ax",%progbits
 3171              		.align	1
 3172              		.global	USBH_MTP_GetDevicePropDesc
 3173              		.syntax unified
 3174              		.thumb
 3175              		.thumb_func
 3176              		.fpu fpv5-d16
 3178              	USBH_MTP_GetDevicePropDesc:
 3179              	.LFB362:
1058:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1059:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
1060:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  USBH_MTP_GetDevicePropDesc
1061:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *         Gets object partially
1062:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  phost: Host handle
1063:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @param  dev_info: Device info structure
1064:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval USBH Status
1065:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
1066:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** USBH_StatusTypeDef USBH_MTP_GetDevicePropDesc(USBH_HandleTypeDef *phost,
1067:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               uint16_t propcode,
1068:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****                                               PTP_DevicePropDescTypdef *devicepropertydesc)
1069:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1070:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 3180              		.loc 1 1070 1
 3181              		.cfi_startproc
 3182              		@ args = 0, pretend = 0, frame = 32
 3183              		@ frame_needed = 1, uses_anonymous_args = 0
 3184 0000 80B5     		push	{r7, lr}
 3185              	.LCFI127:
 3186              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccILjF3V.s 			page 76


 3187              		.cfi_offset 7, -8
 3188              		.cfi_offset 14, -4
 3189 0002 88B0     		sub	sp, sp, #32
 3190              	.LCFI128:
 3191              		.cfi_def_cfa_offset 40
 3192 0004 00AF     		add	r7, sp, #0
 3193              	.LCFI129:
 3194              		.cfi_def_cfa_register 7
 3195 0006 F860     		str	r0, [r7, #12]
 3196 0008 0B46     		mov	r3, r1
 3197 000a 7A60     		str	r2, [r7, #4]
 3198 000c 7B81     		strh	r3, [r7, #10]	@ movhi
1071:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 3199              		.loc 1 1071 22
 3200 000e 0223     		movs	r3, #2
 3201 0010 FB77     		strb	r3, [r7, #31]
1072:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   MTP_HandleTypeDef *MTP_Handle = (MTP_HandleTypeDef *)phost->pActiveClass->pData;
 3202              		.loc 1 1072 61
 3203 0012 FB68     		ldr	r3, [r7, #12]
 3204 0014 D3F87C34 		ldr	r3, [r3, #1148]
 3205              		.loc 1 1072 22
 3206 0018 DB69     		ldr	r3, [r3, #28]
 3207 001a BB61     		str	r3, [r7, #24]
1073:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   uint32_t timeout = phost->Timer;
 3208              		.loc 1 1073 12
 3209 001c FB68     		ldr	r3, [r7, #12]
 3210 001e D3F8C434 		ldr	r3, [r3, #1220]
 3211 0022 7B61     		str	r3, [r7, #20]
1074:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** 
1075:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   if (MTP_Handle->is_ready)
 3212              		.loc 1 1075 17
 3213 0024 BA69     		ldr	r2, [r7, #24]
 3214 0026 42F2CC13 		movw	r3, #8652
 3215 002a 1344     		add	r3, r3, r2
 3216 002c 1B68     		ldr	r3, [r3]
 3217              		.loc 1 1075 6
 3218 002e 002B     		cmp	r3, #0
 3219 0030 1CD0     		beq	.L172
1076:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   {
1077:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     while ((status = USBH_PTP_GetDevicePropDesc(phost, propcode, devicepropertydesc)) == USBH_BUSY)
 3220              		.loc 1 1077 11
 3221 0032 10E0     		b	.L173
 3222              	.L176:
1078:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
1079:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       if (((phost->Timer - timeout) >  5000U) || (phost->device.is_connected == 0U))
 3223              		.loc 1 1079 18
 3224 0034 FB68     		ldr	r3, [r7, #12]
 3225 0036 D3F8C424 		ldr	r2, [r3, #1220]
 3226              		.loc 1 1079 26
 3227 003a 7B69     		ldr	r3, [r7, #20]
 3228 003c D31A     		subs	r3, r2, r3
 3229              		.loc 1 1079 10
 3230 003e 41F28832 		movw	r2, #5000
 3231 0042 9342     		cmp	r3, r2
 3232 0044 05D8     		bhi	.L174
 3233              		.loc 1 1079 64 discriminator 1
 3234 0046 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccILjF3V.s 			page 77


 3235 0048 93F82034 		ldrb	r3, [r3, #1056]
 3236 004c DBB2     		uxtb	r3, r3
 3237              		.loc 1 1079 47 discriminator 1
 3238 004e 002B     		cmp	r3, #0
 3239 0050 01D1     		bne	.L173
 3240              	.L174:
1080:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       {
1081:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****         return USBH_FAIL;
 3241              		.loc 1 1081 16
 3242 0052 0223     		movs	r3, #2
 3243 0054 0BE0     		b	.L175
 3244              	.L173:
1077:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 3245              		.loc 1 1077 22
 3246 0056 7B89     		ldrh	r3, [r7, #10]
 3247 0058 7A68     		ldr	r2, [r7, #4]
 3248 005a 1946     		mov	r1, r3
 3249 005c F868     		ldr	r0, [r7, #12]
 3250 005e FFF7FEFF 		bl	USBH_PTP_GetDevicePropDesc
 3251 0062 0346     		mov	r3, r0
 3252 0064 FB77     		strb	r3, [r7, #31]
1077:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     {
 3253              		.loc 1 1077 11
 3254 0066 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 3255 0068 012B     		cmp	r3, #1
 3256 006a E3D0     		beq	.L176
 3257              	.L172:
1082:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****       }
1083:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****     }
1084:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   }
1085:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   return status;
 3258              		.loc 1 1085 10
 3259 006c FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 3260              	.L175:
1086:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 3261              		.loc 1 1086 1
 3262 006e 1846     		mov	r0, r3
 3263 0070 2037     		adds	r7, r7, #32
 3264              	.LCFI130:
 3265              		.cfi_def_cfa_offset 8
 3266 0072 BD46     		mov	sp, r7
 3267              	.LCFI131:
 3268              		.cfi_def_cfa_register 13
 3269              		@ sp needed
 3270 0074 80BD     		pop	{r7, pc}
 3271              		.cfi_endproc
 3272              	.LFE362:
 3274              		.section	.text.USBH_MTP_EventsCallback,"ax",%progbits
 3275              		.align	1
 3276              		.weak	USBH_MTP_EventsCallback
 3277              		.syntax unified
 3278              		.thumb
 3279              		.thumb_func
 3280              		.fpu fpv5-d16
 3282              	USBH_MTP_EventsCallback:
 3283              	.LFB363:
1087:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** /**
ARM GAS  /tmp/ccILjF3V.s 			page 78


1088:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @brief  The function informs that host has received an event
1089:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   *  @param  pdev: Selected device
1090:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   * @retval None
1091:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   */
1092:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** __weak void USBH_MTP_EventsCallback(USBH_HandleTypeDef *phost, uint32_t event, uint32_t param)
1093:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** {
 3284              		.loc 1 1093 1
 3285              		.cfi_startproc
 3286              		@ args = 0, pretend = 0, frame = 16
 3287              		@ frame_needed = 1, uses_anonymous_args = 0
 3288              		@ link register save eliminated.
 3289 0000 80B4     		push	{r7}
 3290              	.LCFI132:
 3291              		.cfi_def_cfa_offset 4
 3292              		.cfi_offset 7, -4
 3293 0002 85B0     		sub	sp, sp, #20
 3294              	.LCFI133:
 3295              		.cfi_def_cfa_offset 24
 3296 0004 00AF     		add	r7, sp, #0
 3297              	.LCFI134:
 3298              		.cfi_def_cfa_register 7
 3299 0006 F860     		str	r0, [r7, #12]
 3300 0008 B960     		str	r1, [r7, #8]
 3301 000a 7A60     		str	r2, [r7, #4]
1094:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   /* Prevent unused argument(s) compilation warning */
1095:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   UNUSED(phost);
1096:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   UNUSED(event);
1097:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c ****   UNUSED(param);
1098:./Libraries/STM32_USB_Host_Library/Class/MTP/Src/usbh_mtp.c **** }
 3302              		.loc 1 1098 1
 3303 000c 00BF     		nop
 3304 000e 1437     		adds	r7, r7, #20
 3305              	.LCFI135:
 3306              		.cfi_def_cfa_offset 4
 3307 0010 BD46     		mov	sp, r7
 3308              	.LCFI136:
 3309              		.cfi_def_cfa_register 13
 3310              		@ sp needed
 3311 0012 5DF8047B 		ldr	r7, [sp], #4
 3312              	.LCFI137:
 3313              		.cfi_restore 7
 3314              		.cfi_def_cfa_offset 0
 3315 0016 7047     		bx	lr
 3316              		.cfi_endproc
 3317              	.LFE363:
 3319              		.text
 3320              	.Letext0:
 3321              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 3322              		.file 3 "./Libraries/CMSIS/Core/Include/core_cm7.h"
 3323              		.file 4 "./Libraries/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 3324              		.file 5 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 3325              		.file 6 "/usr/include/newlib/sys/_types.h"
 3326              		.file 7 "/usr/include/newlib/sys/reent.h"
 3327              		.file 8 "/usr/include/newlib/sys/lock.h"
 3328              		.file 9 "/usr/include/newlib/math.h"
 3329              		.file 10 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 3330              		.file 11 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
ARM GAS  /tmp/ccILjF3V.s 			page 79


 3331              		.file 12 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 3332              		.file 13 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 3333              		.file 14 "/usr/include/newlib/stdlib.h"
 3334              		.file 15 "./Libraries/FreeRTOS/Source/CMSIS_RTOS/cmsis_os2.h"
 3335              		.file 16 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 3336              		.file 17 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 3337              		.file 18 "./Libraries/STM32_USB_Host_Library/Class/MTP/Inc/usbh_mtp_ptp.h"
 3338              		.file 19 "./Libraries/STM32_USB_Host_Library/Class/MTP/Inc/usbh_mtp.h"
ARM GAS  /tmp/ccILjF3V.s 			page 80


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbh_mtp.c
     /tmp/ccILjF3V.s:25     .data.MTP_Class:0000000000000000 MTP_Class
     /tmp/ccILjF3V.s:18     .rodata:0000000000000000 $d
     /tmp/ccILjF3V.s:22     .data.MTP_Class:0000000000000000 $d
     /tmp/ccILjF3V.s:43     .text.USBH_MTP_InterfaceInit:0000000000000000 USBH_MTP_InterfaceInit
     /tmp/ccILjF3V.s:930    .text.USBH_MTP_InterfaceDeInit:0000000000000000 USBH_MTP_InterfaceDeInit
     /tmp/ccILjF3V.s:1091   .text.USBH_MTP_ClassRequest:0000000000000000 USBH_MTP_ClassRequest
     /tmp/ccILjF3V.s:1145   .text.USBH_MTP_Process:0000000000000000 USBH_MTP_Process
     /tmp/ccILjF3V.s:1495   .text.USBH_MTP_SOFProcess:0000000000000000 USBH_MTP_SOFProcess
     /tmp/ccILjF3V.s:36     .text.USBH_MTP_InterfaceInit:0000000000000000 $t
     /tmp/ccILjF3V.s:510    .text.MTP_FindCtlEndpoint:0000000000000000 MTP_FindCtlEndpoint
     /tmp/ccILjF3V.s:790    .text.MTP_FindDataInEndpoint:0000000000000000 MTP_FindDataInEndpoint
     /tmp/ccILjF3V.s:650    .text.MTP_FindDataOutEndpoint:0000000000000000 MTP_FindDataOutEndpoint
     /tmp/ccILjF3V.s:504    .text.MTP_FindCtlEndpoint:0000000000000000 $t
     /tmp/ccILjF3V.s:644    .text.MTP_FindDataOutEndpoint:0000000000000000 $t
     /tmp/ccILjF3V.s:784    .text.MTP_FindDataInEndpoint:0000000000000000 $t
     /tmp/ccILjF3V.s:924    .text.USBH_MTP_InterfaceDeInit:0000000000000000 $t
     /tmp/ccILjF3V.s:1085   .text.USBH_MTP_ClassRequest:0000000000000000 $t
     /tmp/ccILjF3V.s:1139   .text.USBH_MTP_Process:0000000000000000 $t
     /tmp/ccILjF3V.s:1186   .text.USBH_MTP_Process:0000000000000030 $d
     /tmp/ccILjF3V.s:1192   .text.USBH_MTP_Process:0000000000000048 $t
     /tmp/ccILjF3V.s:2915   .text.USBH_MTP_Events:0000000000000000 USBH_MTP_Events
     /tmp/ccILjF3V.s:1489   .text.USBH_MTP_SOFProcess:0000000000000000 $t
     /tmp/ccILjF3V.s:1533   .text.USBH_MTP_IsReady:0000000000000000 $t
     /tmp/ccILjF3V.s:1540   .text.USBH_MTP_IsReady:0000000000000000 USBH_MTP_IsReady
     /tmp/ccILjF3V.s:1589   .text.USBH_MTP_GetNumStorage:0000000000000000 $t
     /tmp/ccILjF3V.s:1596   .text.USBH_MTP_GetNumStorage:0000000000000000 USBH_MTP_GetNumStorage
     /tmp/ccILjF3V.s:1664   .text.USBH_MTP_SelectStorage:0000000000000000 $t
     /tmp/ccILjF3V.s:1671   .text.USBH_MTP_SelectStorage:0000000000000000 USBH_MTP_SelectStorage
     /tmp/ccILjF3V.s:1752   .text.USBH_MTP_GetStorageInfo:0000000000000000 $t
     /tmp/ccILjF3V.s:1759   .text.USBH_MTP_GetStorageInfo:0000000000000000 USBH_MTP_GetStorageInfo
     /tmp/ccILjF3V.s:1840   .text.USBH_MTP_GetNumObjects:0000000000000000 $t
     /tmp/ccILjF3V.s:1847   .text.USBH_MTP_GetNumObjects:0000000000000000 USBH_MTP_GetNumObjects
     /tmp/ccILjF3V.s:1958   .text.USBH_MTP_GetObjectHandles:0000000000000000 $t
     /tmp/ccILjF3V.s:1965   .text.USBH_MTP_GetObjectHandles:0000000000000000 USBH_MTP_GetObjectHandles
     /tmp/ccILjF3V.s:2076   .text.USBH_MTP_GetObjectInfo:0000000000000000 $t
     /tmp/ccILjF3V.s:2083   .text.USBH_MTP_GetObjectInfo:0000000000000000 USBH_MTP_GetObjectInfo
     /tmp/ccILjF3V.s:2178   .text.USBH_MTP_DeleteObject:0000000000000000 $t
     /tmp/ccILjF3V.s:2185   .text.USBH_MTP_DeleteObject:0000000000000000 USBH_MTP_DeleteObject
     /tmp/ccILjF3V.s:2280   .text.USBH_MTP_GetObject:0000000000000000 $t
     /tmp/ccILjF3V.s:2287   .text.USBH_MTP_GetObject:0000000000000000 USBH_MTP_GetObject
     /tmp/ccILjF3V.s:2382   .text.USBH_MTP_GetPartialObject:0000000000000000 $t
     /tmp/ccILjF3V.s:2389   .text.USBH_MTP_GetPartialObject:0000000000000000 USBH_MTP_GetPartialObject
     /tmp/ccILjF3V.s:2490   .text.USBH_MTP_GetObjectPropsSupported:0000000000000000 $t
     /tmp/ccILjF3V.s:2497   .text.USBH_MTP_GetObjectPropsSupported:0000000000000000 USBH_MTP_GetObjectPropsSupported
     /tmp/ccILjF3V.s:2595   .text.USBH_MTP_GetObjectPropDesc:0000000000000000 $t
     /tmp/ccILjF3V.s:2602   .text.USBH_MTP_GetObjectPropDesc:0000000000000000 USBH_MTP_GetObjectPropDesc
     /tmp/ccILjF3V.s:2701   .text.USBH_MTP_GetObjectPropList:0000000000000000 $t
     /tmp/ccILjF3V.s:2708   .text.USBH_MTP_GetObjectPropList:0000000000000000 USBH_MTP_GetObjectPropList
     /tmp/ccILjF3V.s:2805   .text.USBH_MTP_SendObject:0000000000000000 $t
     /tmp/ccILjF3V.s:2812   .text.USBH_MTP_SendObject:0000000000000000 USBH_MTP_SendObject
     /tmp/ccILjF3V.s:2909   .text.USBH_MTP_Events:0000000000000000 $t
     /tmp/ccILjF3V.s:3087   .text.MTP_DecodeEvent:0000000000000000 MTP_DecodeEvent
     /tmp/ccILjF3V.s:3081   .text.MTP_DecodeEvent:0000000000000000 $t
     /tmp/ccILjF3V.s:3132   .text.MTP_DecodeEvent:000000000000003c $d
     /tmp/ccILjF3V.s:3147   .text.MTP_DecodeEvent:0000000000000078 $t
ARM GAS  /tmp/ccILjF3V.s 			page 81


     /tmp/ccILjF3V.s:3282   .text.USBH_MTP_EventsCallback:0000000000000000 USBH_MTP_EventsCallback
     /tmp/ccILjF3V.s:3171   .text.USBH_MTP_GetDevicePropDesc:0000000000000000 $t
     /tmp/ccILjF3V.s:3178   .text.USBH_MTP_GetDevicePropDesc:0000000000000000 USBH_MTP_GetDevicePropDesc
     /tmp/ccILjF3V.s:3275   .text.USBH_MTP_EventsCallback:0000000000000000 $t

UNDEFINED SYMBOLS
USBH_FindInterface
USBH_SelectInterface
pvPortMalloc
memset
USBH_AllocPipe
USBH_OpenPipe
USBH_LL_SetToggle
USBH_PTP_Init
USBH_ClosePipe
USBH_FreePipe
vPortFree
osMessageQueuePut
USBH_PTP_OpenSession
USBH_PTP_GetDeviceInfo
USBH_PTP_GetStorageIds
USBH_PTP_GetStorageInfo
osDelay
memcpy
USBH_PTP_GetNumObjects
USBH_PTP_GetObjectHandles
USBH_PTP_GetObjectInfo
USBH_PTP_DeleteObject
USBH_PTP_GetObject
USBH_PTP_GetPartialObject
USBH_PTP_GetObjectPropsSupported
USBH_PTP_GetObjectPropDesc
USBH_PTP_GetObjectPropList
USBH_PTP_SendObject
USBH_InterruptReceiveData
USBH_LL_GetURBState
USBH_PTP_GetDevicePropDesc
