ARM GAS  /tmp/cc5dil43.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"usbh_msc_bot.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.USBH_MSC_BOT_REQ_Reset,"ax",%progbits
  17              		.align	1
  18              		.global	USBH_MSC_BOT_REQ_Reset
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-d16
  25              	USBH_MSC_BOT_REQ_Reset:
  26              	.LFB338:
  27              		.file 1 "./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c"
   1:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
   2:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   ******************************************************************************
   3:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @file    usbh_msc_bot.c
   4:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @author  MCD Application Team
   5:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @brief   This file includes the BOT protocol related functions
   6:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   ******************************************************************************
   7:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @attention
   8:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *
   9:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * <h2><center>&copy; Copyright (c) 2015 STMicroelectronics.
  10:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * All rights reserved.</center></h2>
  11:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *
  12:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * This software component is licensed by ST under Ultimate Liberty license
  13:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * SLA0044, the "License"; You may not use this file except in compliance with
  14:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * the License. You may obtain a copy of the License at:
  15:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *                      www.st.com/SLA0044
  16:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *
  17:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   ******************************************************************************
  18:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   */
  19:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  20:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /* BSPDependencies
  21:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** - "stm32xxxxx_{eval}{discovery}{nucleo_144}.c"
  22:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** - "stm32xxxxx_{eval}{discovery}_io.c"
  23:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** - "stm32xxxxx_{eval}{discovery}{adafruit}_lcd.c"
  24:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** - "stm32xxxxx_{eval}{discovery}_sdram.c"
  25:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** EndBSPDependencies */
  26:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  27:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /* Includes ------------------------------------------------------------------*/
  28:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #include "usbh_msc_bot.h"
  29:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #include "usbh_msc.h"
  30:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  31:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @addtogroup USBH_LIB
ARM GAS  /tmp/cc5dil43.s 			page 2


  32:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  33:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  34:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  35:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @addtogroup USBH_CLASS
  36:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  37:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  38:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  39:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @addtogroup USBH_MSC_CLASS
  40:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  41:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  42:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  43:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT
  44:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @brief    This file includes the mass storage related functions
  45:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  46:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  47:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  48:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  49:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT_Private_TypesDefinitions
  50:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  51:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  52:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
  53:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @}
  54:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  55:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  56:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT_Private_Defines
  57:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  58:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  59:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
  60:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @}
  61:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  62:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  63:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT_Private_Macros
  64:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  65:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  66:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
  67:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @}
  68:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  69:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  70:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  71:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT_Private_Variables
  72:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  73:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  74:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  75:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
  76:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @}
  77:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  78:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  79:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  80:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT_Private_FunctionPrototypes
  81:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  82:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  83:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** static USBH_StatusTypeDef USBH_MSC_BOT_Abort(USBH_HandleTypeDef *phost, uint8_t lun, uint8_t dir);
  84:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** static BOT_CSWStatusTypeDef USBH_MSC_DecodeCSW(USBH_HandleTypeDef *phost);
  85:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
  86:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @}
  87:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  88:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
ARM GAS  /tmp/cc5dil43.s 			page 3


  89:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  90:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT_Exported_Variables
  91:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
  92:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  93:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
  94:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @}
  95:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
  96:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  97:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
  98:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /** @defgroup USBH_MSC_BOT_Private_Functions
  99:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** * @{
 100:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** */
 101:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 102:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
 103:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @brief  USBH_MSC_BOT_REQ_Reset
 104:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *         The function the MSC BOT Reset request.
 105:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  phost: Host handle
 106:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @retval USBH Status
 107:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   */
 108:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** USBH_StatusTypeDef USBH_MSC_BOT_REQ_Reset(USBH_HandleTypeDef *phost)
 109:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** {
  28              		.loc 1 109 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32 0000 80B5     		push	{r7, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 82B0     		sub	sp, sp, #8
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 16
  40 0004 00AF     		add	r7, sp, #0
  41              	.LCFI2:
  42              		.cfi_def_cfa_register 7
  43 0006 7860     		str	r0, [r7, #4]
 110:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 111:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.bmRequestType = USB_H2D | USB_REQ_TYPE_CLASS
  44              		.loc 1 111 40
  45 0008 7B68     		ldr	r3, [r7, #4]
  46 000a 2122     		movs	r2, #33
  47 000c 1A74     		strb	r2, [r3, #16]
 112:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                                          | USB_REQ_RECIPIENT_INTERFACE;
 113:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 114:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.bRequest = USB_REQ_BOT_RESET;
  48              		.loc 1 114 35
  49 000e 7B68     		ldr	r3, [r7, #4]
  50 0010 FF22     		movs	r2, #255
  51 0012 5A74     		strb	r2, [r3, #17]
 115:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.wValue.w = 0U;
  52              		.loc 1 115 35
  53 0014 7B68     		ldr	r3, [r7, #4]
  54 0016 0022     		movs	r2, #0
  55 0018 5A82     		strh	r2, [r3, #18]	@ movhi
 116:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.wIndex.w = 0U;
  56              		.loc 1 116 35
ARM GAS  /tmp/cc5dil43.s 			page 4


  57 001a 7B68     		ldr	r3, [r7, #4]
  58 001c 0022     		movs	r2, #0
  59 001e 9A82     		strh	r2, [r3, #20]	@ movhi
 117:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.wLength.w = 0U;
  60              		.loc 1 117 36
  61 0020 7B68     		ldr	r3, [r7, #4]
  62 0022 0022     		movs	r2, #0
  63 0024 DA82     		strh	r2, [r3, #22]	@ movhi
 118:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 119:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   return USBH_CtlReq(phost, 0U, 0U);
  64              		.loc 1 119 10
  65 0026 0022     		movs	r2, #0
  66 0028 0021     		movs	r1, #0
  67 002a 7868     		ldr	r0, [r7, #4]
  68 002c FFF7FEFF 		bl	USBH_CtlReq
  69 0030 0346     		mov	r3, r0
 120:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** }
  70              		.loc 1 120 1
  71 0032 1846     		mov	r0, r3
  72 0034 0837     		adds	r7, r7, #8
  73              	.LCFI3:
  74              		.cfi_def_cfa_offset 8
  75 0036 BD46     		mov	sp, r7
  76              	.LCFI4:
  77              		.cfi_def_cfa_register 13
  78              		@ sp needed
  79 0038 80BD     		pop	{r7, pc}
  80              		.cfi_endproc
  81              	.LFE338:
  83              		.section	.text.USBH_MSC_BOT_REQ_GetMaxLUN,"ax",%progbits
  84              		.align	1
  85              		.global	USBH_MSC_BOT_REQ_GetMaxLUN
  86              		.syntax unified
  87              		.thumb
  88              		.thumb_func
  89              		.fpu fpv5-d16
  91              	USBH_MSC_BOT_REQ_GetMaxLUN:
  92              	.LFB339:
 121:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 122:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
 123:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @brief  USBH_MSC_BOT_REQ_GetMaxLUN
 124:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *         The function the MSC BOT GetMaxLUN request.
 125:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  phost: Host handle
 126:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  Maxlun: pointer to Maxlun variable
 127:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @retval USBH Status
 128:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   */
 129:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** USBH_StatusTypeDef USBH_MSC_BOT_REQ_GetMaxLUN(USBH_HandleTypeDef *phost, uint8_t *Maxlun)
 130:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** {
  93              		.loc 1 130 1
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 8
  96              		@ frame_needed = 1, uses_anonymous_args = 0
  97 0000 80B5     		push	{r7, lr}
  98              	.LCFI5:
  99              		.cfi_def_cfa_offset 8
 100              		.cfi_offset 7, -8
 101              		.cfi_offset 14, -4
ARM GAS  /tmp/cc5dil43.s 			page 5


 102 0002 82B0     		sub	sp, sp, #8
 103              	.LCFI6:
 104              		.cfi_def_cfa_offset 16
 105 0004 00AF     		add	r7, sp, #0
 106              	.LCFI7:
 107              		.cfi_def_cfa_register 7
 108 0006 7860     		str	r0, [r7, #4]
 109 0008 3960     		str	r1, [r7]
 131:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.bmRequestType = USB_D2H | USB_REQ_TYPE_CLASS
 110              		.loc 1 131 40
 111 000a 7B68     		ldr	r3, [r7, #4]
 112 000c A122     		movs	r2, #161
 113 000e 1A74     		strb	r2, [r3, #16]
 132:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                                          | USB_REQ_RECIPIENT_INTERFACE;
 133:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 134:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.bRequest = USB_REQ_GET_MAX_LUN;
 114              		.loc 1 134 35
 115 0010 7B68     		ldr	r3, [r7, #4]
 116 0012 FE22     		movs	r2, #254
 117 0014 5A74     		strb	r2, [r3, #17]
 135:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.wValue.w = 0U;
 118              		.loc 1 135 35
 119 0016 7B68     		ldr	r3, [r7, #4]
 120 0018 0022     		movs	r2, #0
 121 001a 5A82     		strh	r2, [r3, #18]	@ movhi
 136:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.wIndex.w = 0U;
 122              		.loc 1 136 35
 123 001c 7B68     		ldr	r3, [r7, #4]
 124 001e 0022     		movs	r2, #0
 125 0020 9A82     		strh	r2, [r3, #20]	@ movhi
 137:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   phost->Control.setup.b.wLength.w = 1U;
 126              		.loc 1 137 36
 127 0022 7B68     		ldr	r3, [r7, #4]
 128 0024 0122     		movs	r2, #1
 129 0026 DA82     		strh	r2, [r3, #22]	@ movhi
 138:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 139:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   return USBH_CtlReq(phost, Maxlun, 1U);
 130              		.loc 1 139 10
 131 0028 0122     		movs	r2, #1
 132 002a 3968     		ldr	r1, [r7]
 133 002c 7868     		ldr	r0, [r7, #4]
 134 002e FFF7FEFF 		bl	USBH_CtlReq
 135 0032 0346     		mov	r3, r0
 140:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** }
 136              		.loc 1 140 1
 137 0034 1846     		mov	r0, r3
 138 0036 0837     		adds	r7, r7, #8
 139              	.LCFI8:
 140              		.cfi_def_cfa_offset 8
 141 0038 BD46     		mov	sp, r7
 142              	.LCFI9:
 143              		.cfi_def_cfa_register 13
 144              		@ sp needed
 145 003a 80BD     		pop	{r7, pc}
 146              		.cfi_endproc
 147              	.LFE339:
 149              		.section	.text.USBH_MSC_BOT_Init,"ax",%progbits
ARM GAS  /tmp/cc5dil43.s 			page 6


 150              		.align	1
 151              		.global	USBH_MSC_BOT_Init
 152              		.syntax unified
 153              		.thumb
 154              		.thumb_func
 155              		.fpu fpv5-d16
 157              	USBH_MSC_BOT_Init:
 158              	.LFB340:
 141:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 142:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 143:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 144:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
 145:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @brief  USBH_MSC_BOT_Init
 146:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *         The function Initializes the BOT protocol.
 147:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  phost: Host handle
 148:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @retval USBH Status
 149:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   */
 150:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** USBH_StatusTypeDef USBH_MSC_BOT_Init(USBH_HandleTypeDef *phost)
 151:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** {
 159              		.loc 1 151 1
 160              		.cfi_startproc
 161              		@ args = 0, pretend = 0, frame = 16
 162              		@ frame_needed = 1, uses_anonymous_args = 0
 163              		@ link register save eliminated.
 164 0000 80B4     		push	{r7}
 165              	.LCFI10:
 166              		.cfi_def_cfa_offset 4
 167              		.cfi_offset 7, -4
 168 0002 85B0     		sub	sp, sp, #20
 169              	.LCFI11:
 170              		.cfi_def_cfa_offset 24
 171 0004 00AF     		add	r7, sp, #0
 172              	.LCFI12:
 173              		.cfi_def_cfa_register 7
 174 0006 7860     		str	r0, [r7, #4]
 152:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 153:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 175              		.loc 1 153 62
 176 0008 7B68     		ldr	r3, [r7, #4]
 177 000a D3F87C34 		ldr	r3, [r3, #1148]
 178              		.loc 1 153 22
 179 000e DB69     		ldr	r3, [r3, #28]
 180 0010 FB60     		str	r3, [r7, #12]
 154:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 155:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_Handle->hbot.cbw.field.Signature = BOT_CBW_SIGNATURE;
 181              		.loc 1 155 40
 182 0012 FB68     		ldr	r3, [r7, #12]
 183 0014 094A     		ldr	r2, .L7
 184 0016 5A65     		str	r2, [r3, #84]
 156:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_Handle->hbot.cbw.field.Tag = BOT_CBW_TAG;
 185              		.loc 1 156 34
 186 0018 FB68     		ldr	r3, [r7, #12]
 187 001a 094A     		ldr	r2, .L7+4
 188 001c 9A65     		str	r2, [r3, #88]
 157:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_Handle->hbot.state = BOT_SEND_CBW;
 189              		.loc 1 157 26
 190 001e FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cc5dil43.s 			page 7


 191 0020 0122     		movs	r2, #1
 192 0022 83F85020 		strb	r2, [r3, #80]
 158:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_Handle->hbot.cmd_state = BOT_CMD_SEND;
 193              		.loc 1 158 30
 194 0026 FB68     		ldr	r3, [r7, #12]
 195 0028 0122     		movs	r2, #1
 196 002a 83F85220 		strb	r2, [r3, #82]
 159:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 160:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   return USBH_OK;
 197              		.loc 1 160 10
 198 002e 0023     		movs	r3, #0
 161:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** }
 199              		.loc 1 161 1
 200 0030 1846     		mov	r0, r3
 201 0032 1437     		adds	r7, r7, #20
 202              	.LCFI13:
 203              		.cfi_def_cfa_offset 4
 204 0034 BD46     		mov	sp, r7
 205              	.LCFI14:
 206              		.cfi_def_cfa_register 13
 207              		@ sp needed
 208 0036 5DF8047B 		ldr	r7, [sp], #4
 209              	.LCFI15:
 210              		.cfi_restore 7
 211              		.cfi_def_cfa_offset 0
 212 003a 7047     		bx	lr
 213              	.L8:
 214              		.align	2
 215              	.L7:
 216 003c 55534243 		.word	1128420181
 217 0040 50403020 		.word	540033104
 218              		.cfi_endproc
 219              	.LFE340:
 221              		.section	.text.USBH_MSC_BOT_Process,"ax",%progbits
 222              		.align	1
 223              		.global	USBH_MSC_BOT_Process
 224              		.syntax unified
 225              		.thumb
 226              		.thumb_func
 227              		.fpu fpv5-d16
 229              	USBH_MSC_BOT_Process:
 230              	.LFB341:
 162:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 163:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 164:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 165:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
 166:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @brief  USBH_MSC_BOT_Process
 167:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *         The function handle the BOT protocol.
 168:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  phost: Host handle
 169:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  lun: Logical Unit Number
 170:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @retval USBH Status
 171:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   */
 172:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** USBH_StatusTypeDef USBH_MSC_BOT_Process(USBH_HandleTypeDef *phost, uint8_t lun)
 173:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** {
 231              		.loc 1 173 1
 232              		.cfi_startproc
 233              		@ args = 0, pretend = 0, frame = 24
ARM GAS  /tmp/cc5dil43.s 			page 8


 234              		@ frame_needed = 1, uses_anonymous_args = 0
 235 0000 80B5     		push	{r7, lr}
 236              	.LCFI16:
 237              		.cfi_def_cfa_offset 8
 238              		.cfi_offset 7, -8
 239              		.cfi_offset 14, -4
 240 0002 88B0     		sub	sp, sp, #32
 241              	.LCFI17:
 242              		.cfi_def_cfa_offset 40
 243 0004 02AF     		add	r7, sp, #8
 244              	.LCFI18:
 245              		.cfi_def_cfa 7, 32
 246 0006 7860     		str	r0, [r7, #4]
 247 0008 0B46     		mov	r3, r1
 248 000a FB70     		strb	r3, [r7, #3]
 174:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   USBH_StatusTypeDef   status = USBH_BUSY;
 249              		.loc 1 174 24
 250 000c 0123     		movs	r3, #1
 251 000e FB75     		strb	r3, [r7, #23]
 175:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   USBH_StatusTypeDef   error  = USBH_BUSY;
 252              		.loc 1 175 24
 253 0010 0123     		movs	r3, #1
 254 0012 BB75     		strb	r3, [r7, #22]
 176:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   BOT_CSWStatusTypeDef CSW_Status = BOT_CSW_CMD_FAILED;
 255              		.loc 1 176 24
 256 0014 0123     		movs	r3, #1
 257 0016 7B75     		strb	r3, [r7, #21]
 177:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   USBH_URBStateTypeDef URB_Status = USBH_URB_IDLE;
 258              		.loc 1 177 24
 259 0018 0023     		movs	r3, #0
 260 001a 3B75     		strb	r3, [r7, #20]
 178:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 261              		.loc 1 178 62
 262 001c 7B68     		ldr	r3, [r7, #4]
 263 001e D3F87C34 		ldr	r3, [r3, #1148]
 264              		.loc 1 178 22
 265 0022 DB69     		ldr	r3, [r3, #28]
 266 0024 3B61     		str	r3, [r7, #16]
 179:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   uint8_t toggle = 0U;
 267              		.loc 1 179 11
 268 0026 0023     		movs	r3, #0
 269 0028 FB73     		strb	r3, [r7, #15]
 180:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 181:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   switch (MSC_Handle->hbot.state)
 270              		.loc 1 181 27
 271 002a 3B69     		ldr	r3, [r7, #16]
 272 002c 93F85030 		ldrb	r3, [r3, #80]	@ zero_extendqisi2
 273 0030 013B     		subs	r3, r3, #1
 274 0032 0A2B     		cmp	r3, #10
 275 0034 00F22A82 		bhi	.L52
 276 0038 01A2     		adr	r2, .L12
 277 003a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 278 003e 00BF     		.p2align 2
 279              	.L12:
 280 0040 6D000000 		.word	.L22+1
 281 0044 95000000 		.word	.L21+1
 282 0048 53010000 		.word	.L20+1
ARM GAS  /tmp/cc5dil43.s 			page 9


 283 004c 71010000 		.word	.L19+1
 284 0050 2D020000 		.word	.L18+1
 285 0054 4F020000 		.word	.L17+1
 286 0058 3B030000 		.word	.L16+1
 287 005c 57030000 		.word	.L15+1
 288 0060 E1030000 		.word	.L14+1
 289 0064 11040000 		.word	.L13+1
 290 0068 73040000 		.word	.L11+1
 291              		.p2align 1
 292              	.L22:
 182:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   {
 183:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_SEND_CBW:
 184:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       MSC_Handle->hbot.cbw.field.LUN = lun;
 293              		.loc 1 184 38
 294 006c 3B69     		ldr	r3, [r7, #16]
 295 006e FA78     		ldrb	r2, [r7, #3]
 296 0070 83F86120 		strb	r2, [r3, #97]
 185:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       MSC_Handle->hbot.state = BOT_SEND_CBW_WAIT;
 297              		.loc 1 185 30
 298 0074 3B69     		ldr	r3, [r7, #16]
 299 0076 0222     		movs	r2, #2
 300 0078 83F85020 		strb	r2, [r3, #80]
 186:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       USBH_BulkSendData(phost, MSC_Handle->hbot.cbw.data,
 301              		.loc 1 186 52
 302 007c 3B69     		ldr	r3, [r7, #16]
 303 007e 03F15401 		add	r1, r3, #84
 304              		.loc 1 186 7
 305 0082 3B69     		ldr	r3, [r7, #16]
 306 0084 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 307 0086 0122     		movs	r2, #1
 308 0088 0092     		str	r2, [sp]
 309 008a 1F22     		movs	r2, #31
 310 008c 7868     		ldr	r0, [r7, #4]
 311 008e FFF7FEFF 		bl	USBH_BulkSendData
 187:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                         BOT_CBW_LENGTH, MSC_Handle->OutPipe, 1U);
 188:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 189:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 312              		.loc 1 189 7
 313 0092 0AE2     		b	.L23
 314              	.L21:
 190:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 191:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_SEND_CBW_WAIT:
 192:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 193:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       URB_Status = USBH_LL_GetURBState(phost, MSC_Handle->OutPipe);
 315              		.loc 1 193 20
 316 0094 3B69     		ldr	r3, [r7, #16]
 317 0096 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 318 0098 1946     		mov	r1, r3
 319 009a 7868     		ldr	r0, [r7, #4]
 320 009c FFF7FEFF 		bl	USBH_LL_GetURBState
 321 00a0 0346     		mov	r3, r0
 322 00a2 3B75     		strb	r3, [r7, #20]
 194:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 195:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (URB_Status == USBH_URB_DONE)
 323              		.loc 1 195 10
 324 00a4 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 325 00a6 012B     		cmp	r3, #1
ARM GAS  /tmp/cc5dil43.s 			page 10


 326 00a8 26D1     		bne	.L24
 196:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 197:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (MSC_Handle->hbot.cbw.field.DataTransferLength != 0U)
 327              		.loc 1 197 39
 328 00aa 3B69     		ldr	r3, [r7, #16]
 329 00ac DB6D     		ldr	r3, [r3, #92]
 330              		.loc 1 197 12
 331 00ae 002B     		cmp	r3, #0
 332 00b0 0FD0     		beq	.L25
 198:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 199:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           /* If there is Data Transfer Stage */
 200:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           if (((MSC_Handle->hbot.cbw.field.Flags) & USB_REQ_DIR_MASK) == USB_D2H)
 333              		.loc 1 200 43
 334 00b2 3B69     		ldr	r3, [r7, #16]
 335 00b4 93F86030 		ldrb	r3, [r3, #96]	@ zero_extendqisi2
 336              		.loc 1 200 71
 337 00b8 5BB2     		sxtb	r3, r3
 338              		.loc 1 200 14
 339 00ba 002B     		cmp	r3, #0
 340 00bc 04DA     		bge	.L26
 201:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           {
 202:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****             /* Data Direction is IN */
 203:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****             MSC_Handle->hbot.state = BOT_DATA_IN;
 341              		.loc 1 203 36
 342 00be 3B69     		ldr	r3, [r7, #16]
 343 00c0 0322     		movs	r2, #3
 344 00c2 83F85020 		strb	r2, [r3, #80]
 345 00c6 08E0     		b	.L27
 346              	.L26:
 204:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           }
 205:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           else
 206:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           {
 207:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****             /* Data Direction is OUT */
 208:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****             MSC_Handle->hbot.state = BOT_DATA_OUT;
 347              		.loc 1 208 36
 348 00c8 3B69     		ldr	r3, [r7, #16]
 349 00ca 0522     		movs	r2, #5
 350 00cc 83F85020 		strb	r2, [r3, #80]
 351 00d0 03E0     		b	.L27
 352              	.L25:
 209:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           }
 210:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 211:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 212:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else
 213:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 214:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           /* If there is NO Data Transfer Stage */
 215:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.state = BOT_RECEIVE_CSW;
 353              		.loc 1 215 34
 354 00d2 3B69     		ldr	r3, [r7, #16]
 355 00d4 0722     		movs	r2, #7
 356 00d6 83F85020 		strb	r2, [r3, #80]
 357              	.L27:
 216:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 217:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 218:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 219:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 358              		.loc 1 219 23
ARM GAS  /tmp/cc5dil43.s 			page 11


 359 00da 7B68     		ldr	r3, [r7, #4]
 360 00dc 0222     		movs	r2, #2
 361 00de C3F8E024 		str	r2, [r3, #1248]
 220:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 221:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 222:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 223:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 362              		.loc 1 223 15
 363 00e2 7B68     		ldr	r3, [r7, #4]
 364 00e4 D3F8D804 		ldr	r0, [r3, #1240]
 365              		.loc 1 223 50
 366 00e8 7B68     		ldr	r3, [r7, #4]
 367 00ea 03F59C61 		add	r1, r3, #1248
 368              		.loc 1 223 15
 369 00ee 0023     		movs	r3, #0
 370 00f0 0022     		movs	r2, #0
 371 00f2 FFF7FEFF 		bl	osMessageQueuePut
 224:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 225:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 226:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 227:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else if (URB_Status == USBH_URB_NOTREADY)
 228:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 229:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* Re-send CBW */
 230:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state = BOT_SEND_CBW;
 231:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 232:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 233:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 234:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 235:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 236:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 238:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 239:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 240:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 241:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else
 242:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 243:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (URB_Status == USBH_URB_STALL)
 244:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 245:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.state  = BOT_ERROR_OUT;
 246:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 247:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 248:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           phost->os_msg = (uint32_t)USBH_URB_EVENT;
 249:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 250:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 251:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 253:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 254:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 255:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 256:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 257:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 372              		.loc 1 257 7
 373 00f6 CBE1     		b	.L53
 374              	.L24:
 227:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 375              		.loc 1 227 15
 376 00f8 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
ARM GAS  /tmp/cc5dil43.s 			page 12


 377 00fa 022B     		cmp	r3, #2
 378 00fc 12D1     		bne	.L29
 230:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 379              		.loc 1 230 32
 380 00fe 3B69     		ldr	r3, [r7, #16]
 381 0100 0122     		movs	r2, #1
 382 0102 83F85020 		strb	r2, [r3, #80]
 233:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 383              		.loc 1 233 23
 384 0106 7B68     		ldr	r3, [r7, #4]
 385 0108 0222     		movs	r2, #2
 386 010a C3F8E024 		str	r2, [r3, #1248]
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 387              		.loc 1 237 15
 388 010e 7B68     		ldr	r3, [r7, #4]
 389 0110 D3F8D804 		ldr	r0, [r3, #1240]
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 390              		.loc 1 237 50
 391 0114 7B68     		ldr	r3, [r7, #4]
 392 0116 03F59C61 		add	r1, r3, #1248
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 393              		.loc 1 237 15
 394 011a 0023     		movs	r3, #0
 395 011c 0022     		movs	r2, #0
 396 011e FFF7FEFF 		bl	osMessageQueuePut
 397              		.loc 1 257 7
 398 0122 B5E1     		b	.L53
 399              	.L29:
 243:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 400              		.loc 1 243 12
 401 0124 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 402 0126 052B     		cmp	r3, #5
 403 0128 40F0B281 		bne	.L53
 245:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 404              		.loc 1 245 35
 405 012c 3B69     		ldr	r3, [r7, #16]
 406 012e 0A22     		movs	r2, #10
 407 0130 83F85020 		strb	r2, [r3, #80]
 248:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 408              		.loc 1 248 25
 409 0134 7B68     		ldr	r3, [r7, #4]
 410 0136 0222     		movs	r2, #2
 411 0138 C3F8E024 		str	r2, [r3, #1248]
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 412              		.loc 1 252 17
 413 013c 7B68     		ldr	r3, [r7, #4]
 414 013e D3F8D804 		ldr	r0, [r3, #1240]
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 415              		.loc 1 252 52
 416 0142 7B68     		ldr	r3, [r7, #4]
 417 0144 03F59C61 		add	r1, r3, #1248
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 418              		.loc 1 252 17
 419 0148 0023     		movs	r3, #0
 420 014a 0022     		movs	r2, #0
 421 014c FFF7FEFF 		bl	osMessageQueuePut
 422              		.loc 1 257 7
ARM GAS  /tmp/cc5dil43.s 			page 13


 423 0150 9EE1     		b	.L53
 424              	.L20:
 258:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 259:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_DATA_IN:
 260:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       /* Send first packet */
 261:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       USBH_BulkReceiveData(phost, MSC_Handle->hbot.pbuf,
 425              		.loc 1 261 7
 426 0152 3B69     		ldr	r3, [r7, #16]
 427 0154 D3F88C10 		ldr	r1, [r3, #140]
 428 0158 3B69     		ldr	r3, [r7, #16]
 429 015a 5A89     		ldrh	r2, [r3, #10]
 430 015c 3B69     		ldr	r3, [r7, #16]
 431 015e 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 432 0160 7868     		ldr	r0, [r7, #4]
 433 0162 FFF7FEFF 		bl	USBH_BulkReceiveData
 262:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                            MSC_Handle->InEpSize, MSC_Handle->InPipe);
 263:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 264:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       MSC_Handle->hbot.state = BOT_DATA_IN_WAIT;
 434              		.loc 1 264 30
 435 0166 3B69     		ldr	r3, [r7, #16]
 436 0168 0422     		movs	r2, #4
 437 016a 83F85020 		strb	r2, [r3, #80]
 265:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 266:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 438              		.loc 1 266 7
 439 016e 9CE1     		b	.L23
 440              	.L19:
 267:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 268:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_DATA_IN_WAIT:
 269:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 270:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       URB_Status = USBH_LL_GetURBState(phost, MSC_Handle->InPipe);
 441              		.loc 1 270 20
 442 0170 3B69     		ldr	r3, [r7, #16]
 443 0172 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 444 0174 1946     		mov	r1, r3
 445 0176 7868     		ldr	r0, [r7, #4]
 446 0178 FFF7FEFF 		bl	USBH_LL_GetURBState
 447 017c 0346     		mov	r3, r0
 448 017e 3B75     		strb	r3, [r7, #20]
 271:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 272:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (URB_Status == USBH_URB_DONE)
 449              		.loc 1 272 10
 450 0180 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 451 0182 012B     		cmp	r3, #1
 452 0184 3BD1     		bne	.L30
 273:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 274:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* Adjust Data pointer and data length */
 275:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (MSC_Handle->hbot.cbw.field.DataTransferLength > MSC_Handle->InEpSize)
 453              		.loc 1 275 39
 454 0186 3B69     		ldr	r3, [r7, #16]
 455 0188 DB6D     		ldr	r3, [r3, #92]
 456              		.loc 1 275 71
 457 018a 3A69     		ldr	r2, [r7, #16]
 458 018c 5289     		ldrh	r2, [r2, #10]
 459              		.loc 1 275 12
 460 018e 9342     		cmp	r3, r2
 461 0190 10D9     		bls	.L31
ARM GAS  /tmp/cc5dil43.s 			page 14


 276:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 277:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.pbuf += MSC_Handle->InEpSize;
 462              		.loc 1 277 33
 463 0192 3B69     		ldr	r3, [r7, #16]
 464 0194 D3F88C30 		ldr	r3, [r3, #140]
 465              		.loc 1 277 46
 466 0198 3A69     		ldr	r2, [r7, #16]
 467 019a 5289     		ldrh	r2, [r2, #10]
 468              		.loc 1 277 33
 469 019c 1A44     		add	r2, r2, r3
 470 019e 3B69     		ldr	r3, [r7, #16]
 471 01a0 C3F88C20 		str	r2, [r3, #140]
 278:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.cbw.field.DataTransferLength -= MSC_Handle->InEpSize;
 472              		.loc 1 278 57
 473 01a4 3B69     		ldr	r3, [r7, #16]
 474 01a6 DB6D     		ldr	r3, [r3, #92]
 475              		.loc 1 278 70
 476 01a8 3A69     		ldr	r2, [r7, #16]
 477 01aa 5289     		ldrh	r2, [r2, #10]
 478              		.loc 1 278 57
 479 01ac 9A1A     		subs	r2, r3, r2
 480 01ae 3B69     		ldr	r3, [r7, #16]
 481 01b0 DA65     		str	r2, [r3, #92]
 482 01b2 02E0     		b	.L32
 483              	.L31:
 279:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 280:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else
 281:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 282:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.cbw.field.DataTransferLength = 0U;
 484              		.loc 1 282 57
 485 01b4 3B69     		ldr	r3, [r7, #16]
 486 01b6 0022     		movs	r2, #0
 487 01b8 DA65     		str	r2, [r3, #92]
 488              	.L32:
 283:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 284:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 285:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* More Data To be Received */
 286:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (MSC_Handle->hbot.cbw.field.DataTransferLength > 0U)
 489              		.loc 1 286 39
 490 01ba 3B69     		ldr	r3, [r7, #16]
 491 01bc DB6D     		ldr	r3, [r3, #92]
 492              		.loc 1 286 12
 493 01be 002B     		cmp	r3, #0
 494 01c0 0AD0     		beq	.L33
 287:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           /* Send next packet */
 289:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           USBH_BulkReceiveData(phost, MSC_Handle->hbot.pbuf,
 495              		.loc 1 289 11
 496 01c2 3B69     		ldr	r3, [r7, #16]
 497 01c4 D3F88C10 		ldr	r1, [r3, #140]
 498 01c8 3B69     		ldr	r3, [r7, #16]
 499 01ca 5A89     		ldrh	r2, [r3, #10]
 500 01cc 3B69     		ldr	r3, [r7, #16]
 501 01ce 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 502 01d0 7868     		ldr	r0, [r7, #4]
 503 01d2 FFF7FEFF 		bl	USBH_BulkReceiveData
 290:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                                MSC_Handle->InEpSize, MSC_Handle->InPipe);
ARM GAS  /tmp/cc5dil43.s 			page 15


 291:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else
 293:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 294:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           /* If value was 0, and successful transfer, then change the state */
 295:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.state  = BOT_RECEIVE_CSW;
 296:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 297:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           phost->os_msg = (uint32_t)USBH_URB_EVENT;
 299:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 300:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 301:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 302:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 303:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 304:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 305:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 306:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 307:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else if (URB_Status == USBH_URB_STALL)
 308:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 309:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* This is Data IN Stage STALL Condition */
 310:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state  = BOT_ERROR_IN;
 311:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 312:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* Refer to USB Mass-Storage Class : BOT (www.usb.org)
 313:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         6.7.2 Host expects to receive data from the device
 314:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         3. On a STALL condition receiving data, then:
 315:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         The host shall accept the data received.
 316:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         The host shall clear the Bulk-In pipe.
 317:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         4. The host shall attempt to receive a CSW.*/
 318:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 319:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 320:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 321:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 322:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 323:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 324:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 325:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 326:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 327:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 328:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else
 329:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 330:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 331:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 504              		.loc 1 331 7
 505 01d6 5DE1     		b	.L54
 506              	.L33:
 295:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 507              		.loc 1 295 35
 508 01d8 3B69     		ldr	r3, [r7, #16]
 509 01da 0722     		movs	r2, #7
 510 01dc 83F85020 		strb	r2, [r3, #80]
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 511              		.loc 1 298 25
 512 01e0 7B68     		ldr	r3, [r7, #4]
 513 01e2 0222     		movs	r2, #2
 514 01e4 C3F8E024 		str	r2, [r3, #1248]
 302:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 515              		.loc 1 302 17
 516 01e8 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc5dil43.s 			page 16


 517 01ea D3F8D804 		ldr	r0, [r3, #1240]
 302:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 518              		.loc 1 302 52
 519 01ee 7B68     		ldr	r3, [r7, #4]
 520 01f0 03F59C61 		add	r1, r3, #1248
 302:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 521              		.loc 1 302 17
 522 01f4 0023     		movs	r3, #0
 523 01f6 0022     		movs	r2, #0
 524 01f8 FFF7FEFF 		bl	osMessageQueuePut
 525              		.loc 1 331 7
 526 01fc 4AE1     		b	.L54
 527              	.L30:
 307:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 528              		.loc 1 307 15
 529 01fe 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 530 0200 052B     		cmp	r3, #5
 531 0202 40F04781 		bne	.L54
 310:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 532              		.loc 1 310 33
 533 0206 3B69     		ldr	r3, [r7, #16]
 534 0208 0922     		movs	r2, #9
 535 020a 83F85020 		strb	r2, [r3, #80]
 320:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 536              		.loc 1 320 23
 537 020e 7B68     		ldr	r3, [r7, #4]
 538 0210 0222     		movs	r2, #2
 539 0212 C3F8E024 		str	r2, [r3, #1248]
 324:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 540              		.loc 1 324 15
 541 0216 7B68     		ldr	r3, [r7, #4]
 542 0218 D3F8D804 		ldr	r0, [r3, #1240]
 324:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 543              		.loc 1 324 50
 544 021c 7B68     		ldr	r3, [r7, #4]
 545 021e 03F59C61 		add	r1, r3, #1248
 324:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 546              		.loc 1 324 15
 547 0222 0023     		movs	r3, #0
 548 0224 0022     		movs	r2, #0
 549 0226 FFF7FEFF 		bl	osMessageQueuePut
 550              		.loc 1 331 7
 551 022a 33E1     		b	.L54
 552              	.L18:
 332:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 333:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_DATA_OUT:
 334:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 335:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       USBH_BulkSendData(phost, MSC_Handle->hbot.pbuf,
 553              		.loc 1 335 7
 554 022c 3B69     		ldr	r3, [r7, #16]
 555 022e D3F88C10 		ldr	r1, [r3, #140]
 556 0232 3B69     		ldr	r3, [r7, #16]
 557 0234 1A89     		ldrh	r2, [r3, #8]
 558 0236 3B69     		ldr	r3, [r7, #16]
 559 0238 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 560 023a 0120     		movs	r0, #1
 561 023c 0090     		str	r0, [sp]
ARM GAS  /tmp/cc5dil43.s 			page 17


 562 023e 7868     		ldr	r0, [r7, #4]
 563 0240 FFF7FEFF 		bl	USBH_BulkSendData
 336:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                         MSC_Handle->OutEpSize, MSC_Handle->OutPipe, 1U);
 337:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 338:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       MSC_Handle->hbot.state  = BOT_DATA_OUT_WAIT;
 564              		.loc 1 338 31
 565 0244 3B69     		ldr	r3, [r7, #16]
 566 0246 0622     		movs	r2, #6
 567 0248 83F85020 		strb	r2, [r3, #80]
 339:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 568              		.loc 1 339 7
 569 024c 2DE1     		b	.L23
 570              	.L17:
 340:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 341:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_DATA_OUT_WAIT:
 342:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       URB_Status = USBH_LL_GetURBState(phost, MSC_Handle->OutPipe);
 571              		.loc 1 342 20
 572 024e 3B69     		ldr	r3, [r7, #16]
 573 0250 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 574 0252 1946     		mov	r1, r3
 575 0254 7868     		ldr	r0, [r7, #4]
 576 0256 FFF7FEFF 		bl	USBH_LL_GetURBState
 577 025a 0346     		mov	r3, r0
 578 025c 3B75     		strb	r3, [r7, #20]
 343:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 344:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (URB_Status == USBH_URB_DONE)
 579              		.loc 1 344 10
 580 025e 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 581 0260 012B     		cmp	r3, #1
 582 0262 3DD1     		bne	.L35
 345:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* Adjust Data pointer and data length */
 347:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (MSC_Handle->hbot.cbw.field.DataTransferLength > MSC_Handle->OutEpSize)
 583              		.loc 1 347 39
 584 0264 3B69     		ldr	r3, [r7, #16]
 585 0266 DB6D     		ldr	r3, [r3, #92]
 586              		.loc 1 347 71
 587 0268 3A69     		ldr	r2, [r7, #16]
 588 026a 1289     		ldrh	r2, [r2, #8]
 589              		.loc 1 347 12
 590 026c 9342     		cmp	r3, r2
 591 026e 10D9     		bls	.L36
 348:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 349:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.pbuf += MSC_Handle->OutEpSize;
 592              		.loc 1 349 33
 593 0270 3B69     		ldr	r3, [r7, #16]
 594 0272 D3F88C30 		ldr	r3, [r3, #140]
 595              		.loc 1 349 46
 596 0276 3A69     		ldr	r2, [r7, #16]
 597 0278 1289     		ldrh	r2, [r2, #8]
 598              		.loc 1 349 33
 599 027a 1A44     		add	r2, r2, r3
 600 027c 3B69     		ldr	r3, [r7, #16]
 601 027e C3F88C20 		str	r2, [r3, #140]
 350:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.cbw.field.DataTransferLength -= MSC_Handle->OutEpSize;
 602              		.loc 1 350 57
 603 0282 3B69     		ldr	r3, [r7, #16]
ARM GAS  /tmp/cc5dil43.s 			page 18


 604 0284 DB6D     		ldr	r3, [r3, #92]
 605              		.loc 1 350 70
 606 0286 3A69     		ldr	r2, [r7, #16]
 607 0288 1289     		ldrh	r2, [r2, #8]
 608              		.loc 1 350 57
 609 028a 9A1A     		subs	r2, r3, r2
 610 028c 3B69     		ldr	r3, [r7, #16]
 611 028e DA65     		str	r2, [r3, #92]
 612 0290 02E0     		b	.L37
 613              	.L36:
 351:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 352:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else
 353:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 354:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.cbw.field.DataTransferLength = 0U;
 614              		.loc 1 354 57
 615 0292 3B69     		ldr	r3, [r7, #16]
 616 0294 0022     		movs	r2, #0
 617 0296 DA65     		str	r2, [r3, #92]
 618              	.L37:
 355:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 356:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 357:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* More Data To be Sent */
 358:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (MSC_Handle->hbot.cbw.field.DataTransferLength > 0U)
 619              		.loc 1 358 39
 620 0298 3B69     		ldr	r3, [r7, #16]
 621 029a DB6D     		ldr	r3, [r3, #92]
 622              		.loc 1 358 12
 623 029c 002B     		cmp	r3, #0
 624 029e 0CD0     		beq	.L38
 359:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 360:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           USBH_BulkSendData(phost, MSC_Handle->hbot.pbuf,
 625              		.loc 1 360 11
 626 02a0 3B69     		ldr	r3, [r7, #16]
 627 02a2 D3F88C10 		ldr	r1, [r3, #140]
 628 02a6 3B69     		ldr	r3, [r7, #16]
 629 02a8 1A89     		ldrh	r2, [r3, #8]
 630 02aa 3B69     		ldr	r3, [r7, #16]
 631 02ac 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 632 02ae 0120     		movs	r0, #1
 633 02b0 0090     		str	r0, [sp]
 634 02b2 7868     		ldr	r0, [r7, #4]
 635 02b4 FFF7FEFF 		bl	USBH_BulkSendData
 636 02b8 03E0     		b	.L39
 637              	.L38:
 361:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                             MSC_Handle->OutEpSize, MSC_Handle->OutPipe, 1U);
 362:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 363:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else
 364:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 365:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           /* If value was 0, and successful transfer, then change the state */
 366:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.state  = BOT_RECEIVE_CSW;
 638              		.loc 1 366 35
 639 02ba 3B69     		ldr	r3, [r7, #16]
 640 02bc 0722     		movs	r2, #7
 641 02be 83F85020 		strb	r2, [r3, #80]
 642              	.L39:
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 368:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
ARM GAS  /tmp/cc5dil43.s 			page 19


 369:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 370:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 643              		.loc 1 370 23
 644 02c2 7B68     		ldr	r3, [r7, #4]
 645 02c4 0222     		movs	r2, #2
 646 02c6 C3F8E024 		str	r2, [r3, #1248]
 371:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 372:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 373:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 374:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 647              		.loc 1 374 15
 648 02ca 7B68     		ldr	r3, [r7, #4]
 649 02cc D3F8D804 		ldr	r0, [r3, #1240]
 650              		.loc 1 374 50
 651 02d0 7B68     		ldr	r3, [r7, #4]
 652 02d2 03F59C61 		add	r1, r3, #1248
 653              		.loc 1 374 15
 654 02d6 0023     		movs	r3, #0
 655 02d8 0022     		movs	r2, #0
 656 02da FFF7FEFF 		bl	osMessageQueuePut
 375:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 376:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 377:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 378:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 379:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else if (URB_Status == USBH_URB_NOTREADY)
 380:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 381:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* Resend same data */
 382:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state  = BOT_DATA_OUT;
 383:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 384:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 385:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 386:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 387:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 388:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 389:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 390:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 391:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 392:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 393:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 394:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else if (URB_Status == USBH_URB_STALL)
 395:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 396:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state  = BOT_ERROR_OUT;
 397:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 398:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* Refer to USB Mass-Storage Class : BOT (www.usb.org)
 399:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         6.7.3 Ho - Host expects to send data to the device
 400:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         3. On a STALL condition sending data, then:
 401:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         " The host shall clear the Bulk-Out pipe.
 402:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         4. The host shall attempt to receive a CSW.
 403:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         */
 404:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 405:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 409:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 411:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
ARM GAS  /tmp/cc5dil43.s 			page 20


 412:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 413:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else
 415:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 416:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 417:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 657              		.loc 1 417 7
 658 02de DBE0     		b	.L55
 659              	.L35:
 379:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 660              		.loc 1 379 15
 661 02e0 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 662 02e2 022B     		cmp	r3, #2
 663 02e4 12D1     		bne	.L41
 382:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 664              		.loc 1 382 33
 665 02e6 3B69     		ldr	r3, [r7, #16]
 666 02e8 0522     		movs	r2, #5
 667 02ea 83F85020 		strb	r2, [r3, #80]
 385:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 668              		.loc 1 385 23
 669 02ee 7B68     		ldr	r3, [r7, #4]
 670 02f0 0222     		movs	r2, #2
 671 02f2 C3F8E024 		str	r2, [r3, #1248]
 389:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 672              		.loc 1 389 15
 673 02f6 7B68     		ldr	r3, [r7, #4]
 674 02f8 D3F8D804 		ldr	r0, [r3, #1240]
 389:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 675              		.loc 1 389 50
 676 02fc 7B68     		ldr	r3, [r7, #4]
 677 02fe 03F59C61 		add	r1, r3, #1248
 389:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 678              		.loc 1 389 15
 679 0302 0023     		movs	r3, #0
 680 0304 0022     		movs	r2, #0
 681 0306 FFF7FEFF 		bl	osMessageQueuePut
 682              		.loc 1 417 7
 683 030a C5E0     		b	.L55
 684              	.L41:
 394:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 685              		.loc 1 394 15
 686 030c 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 687 030e 052B     		cmp	r3, #5
 688 0310 40F0C280 		bne	.L55
 396:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 689              		.loc 1 396 33
 690 0314 3B69     		ldr	r3, [r7, #16]
 691 0316 0A22     		movs	r2, #10
 692 0318 83F85020 		strb	r2, [r3, #80]
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 693              		.loc 1 406 23
 694 031c 7B68     		ldr	r3, [r7, #4]
 695 031e 0222     		movs	r2, #2
 696 0320 C3F8E024 		str	r2, [r3, #1248]
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 697              		.loc 1 410 15
ARM GAS  /tmp/cc5dil43.s 			page 21


 698 0324 7B68     		ldr	r3, [r7, #4]
 699 0326 D3F8D804 		ldr	r0, [r3, #1240]
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 700              		.loc 1 410 50
 701 032a 7B68     		ldr	r3, [r7, #4]
 702 032c 03F59C61 		add	r1, r3, #1248
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 703              		.loc 1 410 15
 704 0330 0023     		movs	r3, #0
 705 0332 0022     		movs	r2, #0
 706 0334 FFF7FEFF 		bl	osMessageQueuePut
 707              		.loc 1 417 7
 708 0338 AEE0     		b	.L55
 709              	.L16:
 418:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 419:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_RECEIVE_CSW:
 420:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 421:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       USBH_BulkReceiveData(phost, MSC_Handle->hbot.csw.data,
 710              		.loc 1 421 55
 711 033a 3B69     		ldr	r3, [r7, #16]
 712 033c 03F17801 		add	r1, r3, #120
 713              		.loc 1 421 7
 714 0340 3B69     		ldr	r3, [r7, #16]
 715 0342 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 716 0344 0D22     		movs	r2, #13
 717 0346 7868     		ldr	r0, [r7, #4]
 718 0348 FFF7FEFF 		bl	USBH_BulkReceiveData
 422:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****                            BOT_CSW_LENGTH, MSC_Handle->InPipe);
 423:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 424:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       MSC_Handle->hbot.state  = BOT_RECEIVE_CSW_WAIT;
 719              		.loc 1 424 31
 720 034c 3B69     		ldr	r3, [r7, #16]
 721 034e 0822     		movs	r2, #8
 722 0350 83F85020 		strb	r2, [r3, #80]
 425:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 723              		.loc 1 425 7
 724 0354 A9E0     		b	.L23
 725              	.L15:
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 427:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_RECEIVE_CSW_WAIT:
 428:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 429:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       URB_Status = USBH_LL_GetURBState(phost, MSC_Handle->InPipe);
 726              		.loc 1 429 20
 727 0356 3B69     		ldr	r3, [r7, #16]
 728 0358 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 729 035a 1946     		mov	r1, r3
 730 035c 7868     		ldr	r0, [r7, #4]
 731 035e FFF7FEFF 		bl	USBH_LL_GetURBState
 732 0362 0346     		mov	r3, r0
 733 0364 3B75     		strb	r3, [r7, #20]
 430:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 431:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       /* Decode CSW */
 432:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (URB_Status == USBH_URB_DONE)
 734              		.loc 1 432 10
 735 0366 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 736 0368 012B     		cmp	r3, #1
 737 036a 23D1     		bne	.L42
ARM GAS  /tmp/cc5dil43.s 			page 22


 433:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 434:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state = BOT_SEND_CBW;
 738              		.loc 1 434 32
 739 036c 3B69     		ldr	r3, [r7, #16]
 740 036e 0122     		movs	r2, #1
 741 0370 83F85020 		strb	r2, [r3, #80]
 435:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.cmd_state = BOT_CMD_SEND;
 742              		.loc 1 435 36
 743 0374 3B69     		ldr	r3, [r7, #16]
 744 0376 0122     		movs	r2, #1
 745 0378 83F85220 		strb	r2, [r3, #82]
 436:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         CSW_Status = USBH_MSC_DecodeCSW(phost);
 746              		.loc 1 436 22
 747 037c 7868     		ldr	r0, [r7, #4]
 748 037e FFF7FEFF 		bl	USBH_MSC_DecodeCSW
 749 0382 0346     		mov	r3, r0
 750 0384 7B75     		strb	r3, [r7, #21]
 437:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 438:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (CSW_Status == BOT_CSW_CMD_PASSED)
 751              		.loc 1 438 12
 752 0386 7B7D     		ldrb	r3, [r7, #21]	@ zero_extendqisi2
 753 0388 002B     		cmp	r3, #0
 754 038a 02D1     		bne	.L43
 439:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 440:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           status = USBH_OK;
 755              		.loc 1 440 18
 756 038c 0023     		movs	r3, #0
 757 038e FB75     		strb	r3, [r7, #23]
 758 0390 01E0     		b	.L44
 759              	.L43:
 441:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 442:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else
 443:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 444:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           status = USBH_FAIL;
 760              		.loc 1 444 18
 761 0392 0223     		movs	r3, #2
 762 0394 FB75     		strb	r3, [r7, #23]
 763              	.L44:
 445:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 446:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 447:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 448:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 764              		.loc 1 448 23
 765 0396 7B68     		ldr	r3, [r7, #4]
 766 0398 0222     		movs	r2, #2
 767 039a C3F8E024 		str	r2, [r3, #1248]
 449:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 450:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 451:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 452:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 768              		.loc 1 452 15
 769 039e 7B68     		ldr	r3, [r7, #4]
 770 03a0 D3F8D804 		ldr	r0, [r3, #1240]
 771              		.loc 1 452 50
 772 03a4 7B68     		ldr	r3, [r7, #4]
 773 03a6 03F59C61 		add	r1, r3, #1248
 774              		.loc 1 452 15
ARM GAS  /tmp/cc5dil43.s 			page 23


 775 03aa 0023     		movs	r3, #0
 776 03ac 0022     		movs	r2, #0
 777 03ae FFF7FEFF 		bl	osMessageQueuePut
 453:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 454:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 455:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 456:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else if (URB_Status == USBH_URB_STALL)
 457:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 458:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state  = BOT_ERROR_IN;
 459:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 460:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (USBH_USE_OS == 1U)
 461:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         phost->os_msg = (uint32_t)USBH_URB_EVENT;
 462:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 463:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 464:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #else
 465:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 466:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 467:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 468:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 469:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else
 470:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 471:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 472:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 778              		.loc 1 472 7
 779 03b2 73E0     		b	.L56
 780              	.L42:
 456:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 781              		.loc 1 456 15
 782 03b4 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 783 03b6 052B     		cmp	r3, #5
 784 03b8 70D1     		bne	.L56
 458:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 785              		.loc 1 458 33
 786 03ba 3B69     		ldr	r3, [r7, #16]
 787 03bc 0922     		movs	r2, #9
 788 03be 83F85020 		strb	r2, [r3, #80]
 461:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #if (osCMSIS < 0x20000U)
 789              		.loc 1 461 23
 790 03c2 7B68     		ldr	r3, [r7, #4]
 791 03c4 0222     		movs	r2, #2
 792 03c6 C3F8E024 		str	r2, [r3, #1248]
 465:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 793              		.loc 1 465 15
 794 03ca 7B68     		ldr	r3, [r7, #4]
 795 03cc D3F8D804 		ldr	r0, [r3, #1240]
 465:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 796              		.loc 1 465 50
 797 03d0 7B68     		ldr	r3, [r7, #4]
 798 03d2 03F59C61 		add	r1, r3, #1248
 465:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** #endif
 799              		.loc 1 465 15
 800 03d6 0023     		movs	r3, #0
 801 03d8 0022     		movs	r2, #0
 802 03da FFF7FEFF 		bl	osMessageQueuePut
 803              		.loc 1 472 7
 804 03de 5DE0     		b	.L56
 805              	.L14:
ARM GAS  /tmp/cc5dil43.s 			page 24


 473:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 474:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_ERROR_IN:
 475:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       error = USBH_MSC_BOT_Abort(phost, lun, BOT_DIR_IN);
 806              		.loc 1 475 15
 807 03e0 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 808 03e2 0022     		movs	r2, #0
 809 03e4 1946     		mov	r1, r3
 810 03e6 7868     		ldr	r0, [r7, #4]
 811 03e8 FFF7FEFF 		bl	USBH_MSC_BOT_Abort
 812 03ec 0346     		mov	r3, r0
 813 03ee BB75     		strb	r3, [r7, #22]
 476:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 477:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (error == USBH_OK)
 814              		.loc 1 477 10
 815 03f0 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 816 03f2 002B     		cmp	r3, #0
 817 03f4 04D1     		bne	.L46
 478:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 479:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state = BOT_RECEIVE_CSW;
 818              		.loc 1 479 32
 819 03f6 3B69     		ldr	r3, [r7, #16]
 820 03f8 0722     		movs	r2, #7
 821 03fa 83F85020 		strb	r2, [r3, #80]
 480:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 481:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else if (error == USBH_UNRECOVERED_ERROR)
 482:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 483:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* This means that there is a STALL Error limit, Do Reset Recovery */
 484:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state = BOT_UNRECOVERED_ERROR;
 485:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 486:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else
 487:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 488:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 489:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 822              		.loc 1 489 7
 823 03fe 4FE0     		b	.L57
 824              	.L46:
 481:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 825              		.loc 1 481 15
 826 0400 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 827 0402 042B     		cmp	r3, #4
 828 0404 4CD1     		bne	.L57
 484:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 829              		.loc 1 484 32
 830 0406 3B69     		ldr	r3, [r7, #16]
 831 0408 0B22     		movs	r2, #11
 832 040a 83F85020 		strb	r2, [r3, #80]
 833              		.loc 1 489 7
 834 040e 47E0     		b	.L57
 835              	.L13:
 490:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 491:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_ERROR_OUT:
 492:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       error = USBH_MSC_BOT_Abort(phost, lun, BOT_DIR_OUT);
 836              		.loc 1 492 15
 837 0410 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 838 0412 0122     		movs	r2, #1
 839 0414 1946     		mov	r1, r3
 840 0416 7868     		ldr	r0, [r7, #4]
ARM GAS  /tmp/cc5dil43.s 			page 25


 841 0418 FFF7FEFF 		bl	USBH_MSC_BOT_Abort
 842 041c 0346     		mov	r3, r0
 843 041e BB75     		strb	r3, [r7, #22]
 493:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 494:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (error == USBH_OK)
 844              		.loc 1 494 10
 845 0420 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 846 0422 002B     		cmp	r3, #0
 847 0424 1DD1     		bne	.L48
 495:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 496:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 497:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         toggle = USBH_LL_GetToggle(phost, MSC_Handle->OutPipe);
 848              		.loc 1 497 18
 849 0426 3B69     		ldr	r3, [r7, #16]
 850 0428 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 851 042a 1946     		mov	r1, r3
 852 042c 7868     		ldr	r0, [r7, #4]
 853 042e FFF7FEFF 		bl	USBH_LL_GetToggle
 854 0432 0346     		mov	r3, r0
 855 0434 FB73     		strb	r3, [r7, #15]
 498:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         USBH_LL_SetToggle(phost, MSC_Handle->OutPipe, 1U - toggle);
 856              		.loc 1 498 9
 857 0436 3B69     		ldr	r3, [r7, #16]
 858 0438 5979     		ldrb	r1, [r3, #5]	@ zero_extendqisi2
 859 043a FB7B     		ldrb	r3, [r7, #15]
 860 043c C3F10103 		rsb	r3, r3, #1
 861 0440 DBB2     		uxtb	r3, r3
 862 0442 1A46     		mov	r2, r3
 863 0444 7868     		ldr	r0, [r7, #4]
 864 0446 FFF7FEFF 		bl	USBH_LL_SetToggle
 499:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         USBH_LL_SetToggle(phost, MSC_Handle->InPipe, 0U);
 865              		.loc 1 499 9
 866 044a 3B69     		ldr	r3, [r7, #16]
 867 044c 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 868 044e 0022     		movs	r2, #0
 869 0450 1946     		mov	r1, r3
 870 0452 7868     		ldr	r0, [r7, #4]
 871 0454 FFF7FEFF 		bl	USBH_LL_SetToggle
 500:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state = BOT_ERROR_IN;
 872              		.loc 1 500 32
 873 0458 3B69     		ldr	r3, [r7, #16]
 874 045a 0922     		movs	r2, #9
 875 045c 83F85020 		strb	r2, [r3, #80]
 501:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 502:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       else
 503:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 504:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (error == USBH_UNRECOVERED_ERROR)
 505:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 506:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           MSC_Handle->hbot.state = BOT_UNRECOVERED_ERROR;
 507:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 508:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 509:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 876              		.loc 1 509 7
 877 0460 20E0     		b	.L58
 878              	.L48:
 504:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 879              		.loc 1 504 12
ARM GAS  /tmp/cc5dil43.s 			page 26


 880 0462 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 881 0464 042B     		cmp	r3, #4
 882 0466 1DD1     		bne	.L58
 506:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 883              		.loc 1 506 34
 884 0468 3B69     		ldr	r3, [r7, #16]
 885 046a 0B22     		movs	r2, #11
 886 046c 83F85020 		strb	r2, [r3, #80]
 887              		.loc 1 509 7
 888 0470 18E0     		b	.L58
 889              	.L11:
 510:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 511:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 512:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_UNRECOVERED_ERROR:
 513:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       status = USBH_MSC_BOT_REQ_Reset(phost);
 890              		.loc 1 513 16
 891 0472 7868     		ldr	r0, [r7, #4]
 892 0474 FFF7FEFF 		bl	USBH_MSC_BOT_REQ_Reset
 893 0478 0346     		mov	r3, r0
 894 047a FB75     		strb	r3, [r7, #23]
 514:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (status == USBH_OK)
 895              		.loc 1 514 10
 896 047c FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 897 047e 002B     		cmp	r3, #0
 898 0480 12D1     		bne	.L59
 515:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 516:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         MSC_Handle->hbot.state = BOT_SEND_CBW;
 899              		.loc 1 516 32
 900 0482 3B69     		ldr	r3, [r7, #16]
 901 0484 0122     		movs	r2, #1
 902 0486 83F85020 		strb	r2, [r3, #80]
 517:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       }
 518:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 903              		.loc 1 518 7
 904 048a 0DE0     		b	.L59
 905              	.L52:
 519:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 520:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     default:
 521:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 906              		.loc 1 521 7
 907 048c 00BF     		nop
 908 048e 0CE0     		b	.L23
 909              	.L53:
 257:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 910              		.loc 1 257 7
 911 0490 00BF     		nop
 912 0492 0AE0     		b	.L23
 913              	.L54:
 331:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 914              		.loc 1 331 7
 915 0494 00BF     		nop
 916 0496 08E0     		b	.L23
 917              	.L55:
 417:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 918              		.loc 1 417 7
 919 0498 00BF     		nop
 920 049a 06E0     		b	.L23
ARM GAS  /tmp/cc5dil43.s 			page 27


 921              	.L56:
 472:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 922              		.loc 1 472 7
 923 049c 00BF     		nop
 924 049e 04E0     		b	.L23
 925              	.L57:
 489:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 926              		.loc 1 489 7
 927 04a0 00BF     		nop
 928 04a2 02E0     		b	.L23
 929              	.L58:
 509:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 930              		.loc 1 509 7
 931 04a4 00BF     		nop
 932 04a6 00E0     		b	.L23
 933              	.L59:
 518:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 934              		.loc 1 518 7
 935 04a8 00BF     		nop
 936              	.L23:
 522:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   }
 523:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   return status;
 937              		.loc 1 523 10
 938 04aa FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 524:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** }
 939              		.loc 1 524 1
 940 04ac 1846     		mov	r0, r3
 941 04ae 1837     		adds	r7, r7, #24
 942              	.LCFI19:
 943              		.cfi_def_cfa_offset 8
 944 04b0 BD46     		mov	sp, r7
 945              	.LCFI20:
 946              		.cfi_def_cfa_register 13
 947              		@ sp needed
 948 04b2 80BD     		pop	{r7, pc}
 949              		.cfi_endproc
 950              	.LFE341:
 952              		.section	.text.USBH_MSC_BOT_Abort,"ax",%progbits
 953              		.align	1
 954              		.syntax unified
 955              		.thumb
 956              		.thumb_func
 957              		.fpu fpv5-d16
 959              	USBH_MSC_BOT_Abort:
 960              	.LFB342:
 525:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 526:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
 527:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @brief  USBH_MSC_BOT_Abort
 528:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *         The function handle the BOT Abort process.
 529:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  phost: Host handle
 530:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  lun: Logical Unit Number
 531:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  dir: direction (0: out / 1 : in)
 532:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @retval USBH Status
 533:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   */
 534:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** static USBH_StatusTypeDef USBH_MSC_BOT_Abort(USBH_HandleTypeDef *phost, uint8_t lun, uint8_t dir)
 535:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** {
 961              		.loc 1 535 1
ARM GAS  /tmp/cc5dil43.s 			page 28


 962              		.cfi_startproc
 963              		@ args = 0, pretend = 0, frame = 16
 964              		@ frame_needed = 1, uses_anonymous_args = 0
 965 0000 80B5     		push	{r7, lr}
 966              	.LCFI21:
 967              		.cfi_def_cfa_offset 8
 968              		.cfi_offset 7, -8
 969              		.cfi_offset 14, -4
 970 0002 84B0     		sub	sp, sp, #16
 971              	.LCFI22:
 972              		.cfi_def_cfa_offset 24
 973 0004 00AF     		add	r7, sp, #0
 974              	.LCFI23:
 975              		.cfi_def_cfa_register 7
 976 0006 7860     		str	r0, [r7, #4]
 977 0008 0B46     		mov	r3, r1
 978 000a FB70     		strb	r3, [r7, #3]
 979 000c 1346     		mov	r3, r2
 980 000e BB70     		strb	r3, [r7, #2]
 536:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   /* Prevent unused argument(s) compilation warning */
 537:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   UNUSED(lun);
 538:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 539:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   USBH_StatusTypeDef status = USBH_FAIL;
 981              		.loc 1 539 22
 982 0010 0223     		movs	r3, #2
 983 0012 FB73     		strb	r3, [r7, #15]
 540:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 984              		.loc 1 540 62
 985 0014 7B68     		ldr	r3, [r7, #4]
 986 0016 D3F87C34 		ldr	r3, [r3, #1148]
 987              		.loc 1 540 22
 988 001a DB69     		ldr	r3, [r3, #28]
 989 001c BB60     		str	r3, [r7, #8]
 541:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 542:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   switch (dir)
 990              		.loc 1 542 3
 991 001e BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 992 0020 002B     		cmp	r3, #0
 993 0022 02D0     		beq	.L61
 994 0024 012B     		cmp	r3, #1
 995 0026 09D0     		beq	.L62
 543:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   {
 544:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_DIR_IN :
 545:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       /* send ClrFeture on Bulk IN endpoint */
 546:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       status = USBH_ClrFeature(phost, MSC_Handle->InEp);
 547:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 548:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 549:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 550:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     case BOT_DIR_OUT :
 551:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       /*send ClrFeature on Bulk OUT endpoint */
 552:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       status = USBH_ClrFeature(phost, MSC_Handle->OutEp);
 553:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 554:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 555:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     default:
 556:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 996              		.loc 1 556 7
 997 0028 11E0     		b	.L64
ARM GAS  /tmp/cc5dil43.s 			page 29


 998              	.L61:
 546:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 999              		.loc 1 546 16
 1000 002a BB68     		ldr	r3, [r7, #8]
 1001 002c DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 1002 002e 1946     		mov	r1, r3
 1003 0030 7868     		ldr	r0, [r7, #4]
 1004 0032 FFF7FEFF 		bl	USBH_ClrFeature
 1005 0036 0346     		mov	r3, r0
 1006 0038 FB73     		strb	r3, [r7, #15]
 548:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 1007              		.loc 1 548 7
 1008 003a 08E0     		b	.L64
 1009              	.L62:
 552:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       break;
 1010              		.loc 1 552 16
 1011 003c BB68     		ldr	r3, [r7, #8]
 1012 003e 9B79     		ldrb	r3, [r3, #6]	@ zero_extendqisi2
 1013 0040 1946     		mov	r1, r3
 1014 0042 7868     		ldr	r0, [r7, #4]
 1015 0044 FFF7FEFF 		bl	USBH_ClrFeature
 1016 0048 0346     		mov	r3, r0
 1017 004a FB73     		strb	r3, [r7, #15]
 553:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 1018              		.loc 1 553 7
 1019 004c 00BF     		nop
 1020              	.L64:
 557:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   }
 558:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   return status;
 1021              		.loc 1 558 10
 1022 004e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 559:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** }
 1023              		.loc 1 559 1
 1024 0050 1846     		mov	r0, r3
 1025 0052 1037     		adds	r7, r7, #16
 1026              	.LCFI24:
 1027              		.cfi_def_cfa_offset 8
 1028 0054 BD46     		mov	sp, r7
 1029              	.LCFI25:
 1030              		.cfi_def_cfa_register 13
 1031              		@ sp needed
 1032 0056 80BD     		pop	{r7, pc}
 1033              		.cfi_endproc
 1034              	.LFE342:
 1036              		.section	.text.USBH_MSC_DecodeCSW,"ax",%progbits
 1037              		.align	1
 1038              		.syntax unified
 1039              		.thumb
 1040              		.thumb_func
 1041              		.fpu fpv5-d16
 1043              	USBH_MSC_DecodeCSW:
 1044              	.LFB343:
 560:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 561:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** /**
 562:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @brief  USBH_MSC_BOT_DecodeCSW
 563:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *         This function decodes the CSW received by the device and updates the
 564:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *         same to upper layer.
ARM GAS  /tmp/cc5dil43.s 			page 30


 565:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @param  phost: Host handle
 566:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @retval USBH Status
 567:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   * @notes
 568:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *     Refer to USB Mass-Storage Class : BOT (www.usb.org)
 569:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *    6.3.1 Valid CSW Conditions :
 570:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *     The host shall consider the CSW valid when:
 571:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *     1. dCSWSignature is equal to 53425355h
 572:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *     2. the CSW is 13 (Dh) bytes in length,
 573:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   *     3. dCSWTag matches the dCBWTag from the corresponding CBW.
 574:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   */
 575:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 576:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** static BOT_CSWStatusTypeDef USBH_MSC_DecodeCSW(USBH_HandleTypeDef *phost)
 577:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** {
 1045              		.loc 1 577 1
 1046              		.cfi_startproc
 1047              		@ args = 0, pretend = 0, frame = 16
 1048              		@ frame_needed = 1, uses_anonymous_args = 0
 1049 0000 80B5     		push	{r7, lr}
 1050              	.LCFI26:
 1051              		.cfi_def_cfa_offset 8
 1052              		.cfi_offset 7, -8
 1053              		.cfi_offset 14, -4
 1054 0002 84B0     		sub	sp, sp, #16
 1055              	.LCFI27:
 1056              		.cfi_def_cfa_offset 24
 1057 0004 00AF     		add	r7, sp, #0
 1058              	.LCFI28:
 1059              		.cfi_def_cfa_register 7
 1060 0006 7860     		str	r0, [r7, #4]
 578:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1061              		.loc 1 578 62
 1062 0008 7B68     		ldr	r3, [r7, #4]
 1063 000a D3F87C34 		ldr	r3, [r3, #1148]
 1064              		.loc 1 578 22
 1065 000e DB69     		ldr	r3, [r3, #28]
 1066 0010 BB60     		str	r3, [r7, #8]
 579:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   BOT_CSWStatusTypeDef status = BOT_CSW_CMD_FAILED;
 1067              		.loc 1 579 24
 1068 0012 0123     		movs	r3, #1
 1069 0014 FB73     		strb	r3, [r7, #15]
 580:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 581:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   /*Checking if the transfer length is different than 13*/
 582:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   if (USBH_LL_GetLastXferSize(phost, MSC_Handle->InPipe) != BOT_CSW_LENGTH)
 1070              		.loc 1 582 7
 1071 0016 BB68     		ldr	r3, [r7, #8]
 1072 0018 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1073 001a 1946     		mov	r1, r3
 1074 001c 7868     		ldr	r0, [r7, #4]
 1075 001e FFF7FEFF 		bl	USBH_LL_GetLastXferSize
 1076 0022 0346     		mov	r3, r0
 1077              		.loc 1 582 6
 1078 0024 0D2B     		cmp	r3, #13
 1079 0026 02D0     		beq	.L67
 583:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   {
 584:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     /*(4) Hi > Dn (Host expects to receive data from the device,
 585:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     Device intends to transfer no data)
 586:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     (5) Hi > Di (Host expects to receive data from the device,
ARM GAS  /tmp/cc5dil43.s 			page 31


 587:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     Device intends to send data to the host)
 588:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     (9) Ho > Dn (Host expects to send data to the device,
 589:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     Device intends to transfer no data)
 590:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     (11) Ho > Do  (Host expects to send data to the device,
 591:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     Device intends to receive data from the host)*/
 592:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 593:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 594:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     status = BOT_CSW_PHASE_ERROR;
 1080              		.loc 1 594 12
 1081 0028 0223     		movs	r3, #2
 1082 002a FB73     		strb	r3, [r7, #15]
 1083 002c 24E0     		b	.L68
 1084              	.L67:
 595:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   }
 596:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   else
 597:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   {
 598:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     /* CSW length is Correct */
 599:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 600:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     /* Check validity of the CSW Signature and CSWStatus */
 601:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     if (MSC_Handle->hbot.csw.field.Signature == BOT_CSW_SIGNATURE)
 1085              		.loc 1 601 35
 1086 002e BB68     		ldr	r3, [r7, #8]
 1087 0030 9B6F     		ldr	r3, [r3, #120]
 1088              		.loc 1 601 8
 1089 0032 144A     		ldr	r2, .L73
 1090 0034 9342     		cmp	r3, r2
 1091 0036 1DD1     		bne	.L69
 602:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     {
 603:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       /* Check Condition 1. dCSWSignature is equal to 53425355h */
 604:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 605:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       if (MSC_Handle->hbot.csw.field.Tag == MSC_Handle->hbot.cbw.field.Tag)
 1092              		.loc 1 605 37
 1093 0038 BB68     		ldr	r3, [r7, #8]
 1094 003a DA6F     		ldr	r2, [r3, #124]
 1095              		.loc 1 605 71
 1096 003c BB68     		ldr	r3, [r7, #8]
 1097 003e 9B6D     		ldr	r3, [r3, #88]
 1098              		.loc 1 605 10
 1099 0040 9A42     		cmp	r2, r3
 1100 0042 19D1     		bne	.L68
 606:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       {
 607:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         /* Check Condition 3. dCSWTag matches the dCBWTag from the
 608:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         corresponding CBW */
 609:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 610:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         if (MSC_Handle->hbot.csw.field.Status == 0U)
 1101              		.loc 1 610 39
 1102 0044 BB68     		ldr	r3, [r7, #8]
 1103 0046 93F88430 		ldrb	r3, [r3, #132]	@ zero_extendqisi2
 1104              		.loc 1 610 12
 1105 004a 002B     		cmp	r3, #0
 1106 004c 02D1     		bne	.L70
 611:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 612:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           /* Refer to USB Mass-Storage Class : BOT (www.usb.org)
 613:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 614:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Hn Host expects no data transfers
 615:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Hi Host expects to receive data from the device
 616:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Ho Host expects to send data to the device
ARM GAS  /tmp/cc5dil43.s 			page 32


 617:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 618:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Dn Device intends to transfer no data
 619:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Di Device intends to send data to the host
 620:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Do Device intends to receive data from the host
 621:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 622:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Section 6.7
 623:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (1) Hn = Dn (Host expects no data transfers,
 624:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to transfer no data)
 625:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (6) Hi = Di (Host expects to receive data from the device,
 626:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to send data to the host)
 627:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (12) Ho = Do (Host expects to send data to the device,
 628:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to receive data from the host)
 629:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 630:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           */
 631:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 632:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           status = BOT_CSW_CMD_PASSED;
 1107              		.loc 1 632 18
 1108 004e 0023     		movs	r3, #0
 1109 0050 FB73     		strb	r3, [r7, #15]
 1110 0052 11E0     		b	.L68
 1111              	.L70:
 633:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 634:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else if (MSC_Handle->hbot.csw.field.Status == 1U)
 1112              		.loc 1 634 44
 1113 0054 BB68     		ldr	r3, [r7, #8]
 1114 0056 93F88430 		ldrb	r3, [r3, #132]	@ zero_extendqisi2
 1115              		.loc 1 634 17
 1116 005a 012B     		cmp	r3, #1
 1117 005c 02D1     		bne	.L71
 635:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 636:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           status = BOT_CSW_CMD_FAILED;
 1118              		.loc 1 636 18
 1119 005e 0123     		movs	r3, #1
 1120 0060 FB73     		strb	r3, [r7, #15]
 1121 0062 09E0     		b	.L68
 1122              	.L71:
 637:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 638:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 639:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else if (MSC_Handle->hbot.csw.field.Status == 2U)
 1123              		.loc 1 639 44
 1124 0064 BB68     		ldr	r3, [r7, #8]
 1125 0066 93F88430 		ldrb	r3, [r3, #132]	@ zero_extendqisi2
 1126              		.loc 1 639 17
 1127 006a 022B     		cmp	r3, #2
 1128 006c 04D1     		bne	.L68
 640:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 641:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           /* Refer to USB Mass-Storage Class : BOT (www.usb.org)
 642:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Section 6.7
 643:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (2) Hn < Di ( Host expects no data transfers,
 644:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to send data to the host)
 645:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (3) Hn < Do ( Host expects no data transfers,
 646:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to receive data from the host)
 647:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (7) Hi < Di ( Host expects to receive data from the device,
 648:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to send data to the host)
 649:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (8) Hi <> Do ( Host expects to receive data from the device,
 650:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to receive data from the host)
 651:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (10) Ho <> Di (Host expects to send data to the device,
ARM GAS  /tmp/cc5dil43.s 			page 33


 652:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Di Device intends to send data to the host)
 653:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           (13) Ho < Do (Host expects to send data to the device,
 654:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           Device intends to receive data from the host)
 655:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           */
 656:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 657:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****           status = BOT_CSW_PHASE_ERROR;
 1129              		.loc 1 657 18
 1130 006e 0223     		movs	r3, #2
 1131 0070 FB73     		strb	r3, [r7, #15]
 1132 0072 01E0     		b	.L68
 1133              	.L69:
 658:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 659:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         else
 660:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         {
 661:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****         }
 662:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       } /* CSW Tag Matching is Checked  */
 663:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     } /* CSW Signature Correct Checking */
 664:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     else
 665:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     {
 666:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       /* If the CSW Signature is not valid, We sall return the Phase Error to
 667:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       Upper Layers for Reset Recovery */
 668:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 669:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****       status = BOT_CSW_PHASE_ERROR;
 1134              		.loc 1 669 14
 1135 0074 0223     		movs	r3, #2
 1136 0076 FB73     		strb	r3, [r7, #15]
 1137              	.L68:
 670:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****     }
 671:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   } /* CSW Length Check*/
 672:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** 
 673:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c ****   return status;
 1138              		.loc 1 673 10
 1139 0078 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 674:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_bot.c **** }
 1140              		.loc 1 674 1
 1141 007a 1846     		mov	r0, r3
 1142 007c 1037     		adds	r7, r7, #16
 1143              	.LCFI29:
 1144              		.cfi_def_cfa_offset 8
 1145 007e BD46     		mov	sp, r7
 1146              	.LCFI30:
 1147              		.cfi_def_cfa_register 13
 1148              		@ sp needed
 1149 0080 80BD     		pop	{r7, pc}
 1150              	.L74:
 1151 0082 00BF     		.align	2
 1152              	.L73:
 1153 0084 55534253 		.word	1396855637
 1154              		.cfi_endproc
 1155              	.LFE343:
 1157              		.text
 1158              	.Letext0:
 1159              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 1160              		.file 3 "./Libraries/CMSIS/Core/Include/core_cm7.h"
 1161              		.file 4 "./Libraries/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 1162              		.file 5 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 1163              		.file 6 "/usr/include/newlib/sys/_types.h"
ARM GAS  /tmp/cc5dil43.s 			page 34


 1164              		.file 7 "/usr/include/newlib/sys/reent.h"
 1165              		.file 8 "/usr/include/newlib/sys/lock.h"
 1166              		.file 9 "/usr/include/newlib/math.h"
 1167              		.file 10 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 1168              		.file 11 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 1169              		.file 12 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 1170              		.file 13 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 1171              		.file 14 "/usr/include/newlib/stdlib.h"
 1172              		.file 15 "./Libraries/FreeRTOS/Source/CMSIS_RTOS/cmsis_os2.h"
 1173              		.file 16 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 1174              		.file 17 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 1175              		.file 18 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_bot.h"
 1176              		.file 19 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_scsi.h"
 1177              		.file 20 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
ARM GAS  /tmp/cc5dil43.s 			page 35


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbh_msc_bot.c
     /tmp/cc5dil43.s:17     .text.USBH_MSC_BOT_REQ_Reset:0000000000000000 $t
     /tmp/cc5dil43.s:25     .text.USBH_MSC_BOT_REQ_Reset:0000000000000000 USBH_MSC_BOT_REQ_Reset
     /tmp/cc5dil43.s:84     .text.USBH_MSC_BOT_REQ_GetMaxLUN:0000000000000000 $t
     /tmp/cc5dil43.s:91     .text.USBH_MSC_BOT_REQ_GetMaxLUN:0000000000000000 USBH_MSC_BOT_REQ_GetMaxLUN
     /tmp/cc5dil43.s:150    .text.USBH_MSC_BOT_Init:0000000000000000 $t
     /tmp/cc5dil43.s:157    .text.USBH_MSC_BOT_Init:0000000000000000 USBH_MSC_BOT_Init
     /tmp/cc5dil43.s:216    .text.USBH_MSC_BOT_Init:000000000000003c $d
     /tmp/cc5dil43.s:222    .text.USBH_MSC_BOT_Process:0000000000000000 $t
     /tmp/cc5dil43.s:229    .text.USBH_MSC_BOT_Process:0000000000000000 USBH_MSC_BOT_Process
     /tmp/cc5dil43.s:280    .text.USBH_MSC_BOT_Process:0000000000000040 $d
     /tmp/cc5dil43.s:291    .text.USBH_MSC_BOT_Process:000000000000006c $t
     /tmp/cc5dil43.s:1043   .text.USBH_MSC_DecodeCSW:0000000000000000 USBH_MSC_DecodeCSW
     /tmp/cc5dil43.s:959    .text.USBH_MSC_BOT_Abort:0000000000000000 USBH_MSC_BOT_Abort
     /tmp/cc5dil43.s:953    .text.USBH_MSC_BOT_Abort:0000000000000000 $t
     /tmp/cc5dil43.s:1037   .text.USBH_MSC_DecodeCSW:0000000000000000 $t
     /tmp/cc5dil43.s:1153   .text.USBH_MSC_DecodeCSW:0000000000000084 $d

UNDEFINED SYMBOLS
USBH_CtlReq
USBH_BulkSendData
USBH_LL_GetURBState
osMessageQueuePut
USBH_BulkReceiveData
USBH_LL_GetToggle
USBH_LL_SetToggle
USBH_ClrFeature
USBH_LL_GetLastXferSize
