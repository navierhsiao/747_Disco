ARM GAS  /tmp/cc5Cbh8K.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"usbh_msc.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.global	USBH_msc
  17              		.section	.rodata
  18              		.align	2
  19              	.LC0:
  20 0000 4D534300 		.ascii	"MSC\000"
  21              		.section	.data.USBH_msc,"aw"
  22              		.align	2
  25              	USBH_msc:
  26 0000 00000000 		.word	.LC0
  27 0004 08       		.byte	8
  28 0005 000000   		.space	3
  29 0008 00000000 		.word	USBH_MSC_InterfaceInit
  30 000c 00000000 		.word	USBH_MSC_InterfaceDeInit
  31 0010 00000000 		.word	USBH_MSC_ClassRequest
  32 0014 00000000 		.word	USBH_MSC_Process
  33 0018 00000000 		.word	USBH_MSC_SOFProcess
  34 001c 00000000 		.word	0
  35              		.section	.text.USBH_MSC_InterfaceInit,"ax",%progbits
  36              		.align	1
  37              		.arch armv7e-m
  38              		.syntax unified
  39              		.thumb
  40              		.thumb_func
  41              		.fpu fpv5-d16
  43              	USBH_MSC_InterfaceInit:
  44              	.LFB338:
  45              		.file 1 "./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c"
   1:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
   2:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
   3:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @file    usbh_msc.c
   4:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @author  MCD Application Team
   5:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief   This file implements the MSC class driver functions
   6:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *          ===================================================================
   7:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *                                MSC Class  Description
   8:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *          ===================================================================
   9:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           This module manages the MSC class V1.0 following the "Universal
  10:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           Serial Bus Mass Storage Class (MSC) Bulk-Only Transport (BOT) Version 1.0
  11:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           Sep. 31, 1999".
  12:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *           This driver implements the following aspects of the specification:
  13:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *             - Bulk-Only Transport protocol
  14:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *             - Subclass : SCSI transparent command set (ref. SCSI Primary Commands - 3 (SPC-3))
  15:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
ARM GAS  /tmp/cc5Cbh8K.s 			page 2


  16:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *  @endverbatim
  17:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  18:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
  19:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @attention
  20:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  21:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * <h2><center>&copy; Copyright (c) 2015 STMicroelectronics.
  22:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * All rights reserved.</center></h2>
  23:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  24:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * This software component is licensed by ST under Ultimate Liberty license
  25:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * SLA0044, the "License"; You may not use this file except in compliance with
  26:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * the License. You may obtain a copy of the License at:
  27:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *                      www.st.com/SLA0044
  28:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *
  29:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   ******************************************************************************
  30:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  31:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  32:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /* BSPDependencies
  33:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** - "stm32xxxxx_{eval}{discovery}{nucleo_144}.c"
  34:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** - "stm32xxxxx_{eval}{discovery}_io.c"
  35:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** - "stm32xxxxx_{eval}{discovery}{adafruit}_lcd.c"
  36:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** - "stm32xxxxx_{eval}{discovery}_sdram.c"
  37:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** EndBSPDependencies */
  38:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  39:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /* Includes ------------------------------------------------------------------*/
  40:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc.h"
  41:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc_bot.h"
  42:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #include "usbh_msc_scsi.h"
  43:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  44:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  45:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_LIB
  46:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  47:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  48:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  49:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_CLASS
  50:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  51:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  52:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  53:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @addtogroup USBH_MSC_CLASS
  54:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  55:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  56:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  57:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE
  58:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief    This file includes the mass storage related functions
  59:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  60:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  61:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  62:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  63:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_TypesDefinitions
  64:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  65:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  66:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  67:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  68:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  69:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  70:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Defines
  71:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  72:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
ARM GAS  /tmp/cc5Cbh8K.s 			page 3


  73:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  74:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  75:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  76:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  77:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Macros
  78:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  79:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  80:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  81:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  82:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  83:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  84:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  85:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Variables
  86:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  87:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  88:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
  89:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
  90:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  91:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  92:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  93:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_FunctionPrototypes
  94:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
  95:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
  96:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  97:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceInit(USBH_HandleTypeDef *phost);
  98:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
  99:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceDeInit(USBH_HandleTypeDef *phost);
 100:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 101:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_Process(USBH_HandleTypeDef *phost);
 102:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 103:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_ClassRequest(USBH_HandleTypeDef *phost);
 104:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 105:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_SOFProcess(USBH_HandleTypeDef *phost);
 106:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 107:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_RdWrProcess(USBH_HandleTypeDef *phost, uint8_t lun);
 108:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 109:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_ClassTypeDef  USBH_msc =
 110:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 111:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   "MSC",
 112:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USB_MSC_CLASS,
 113:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_InterfaceInit,
 114:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_InterfaceDeInit,
 115:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_ClassRequest,
 116:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_Process,
 117:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SOFProcess,
 118:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   NULL,
 119:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** };
 120:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 121:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 122:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 123:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 124:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 125:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 126:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 127:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Exported_Variables
 128:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 129:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
ARM GAS  /tmp/cc5Cbh8K.s 			page 4


 130:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 131:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 132:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @}
 133:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 134:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 135:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 136:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /** @defgroup USBH_MSC_CORE_Private_Functions
 137:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @{
 138:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 139:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 140:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 141:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 142:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_InterfaceInit
 143:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function init the MSC class.
 144:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 145:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 146:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 147:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceInit(USBH_HandleTypeDef *phost)
 148:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
  46              		.loc 1 148 1
  47              		.cfi_startproc
  48              		@ args = 0, pretend = 0, frame = 16
  49              		@ frame_needed = 1, uses_anonymous_args = 0
  50 0000 90B5     		push	{r4, r7, lr}
  51              	.LCFI0:
  52              		.cfi_def_cfa_offset 12
  53              		.cfi_offset 4, -12
  54              		.cfi_offset 7, -8
  55              		.cfi_offset 14, -4
  56 0002 89B0     		sub	sp, sp, #36
  57              	.LCFI1:
  58              		.cfi_def_cfa_offset 48
  59 0004 04AF     		add	r7, sp, #16
  60              	.LCFI2:
  61              		.cfi_def_cfa 7, 32
  62 0006 7860     		str	r0, [r7, #4]
 149:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status;
 150:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t interface;
 151:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle;
 152:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 153:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   interface = USBH_FindInterface(phost, phost->pActiveClass->ClassCode, MSC_TRANSPARENT, MSC_BOT);
  63              		.loc 1 153 46
  64 0008 7B68     		ldr	r3, [r7, #4]
  65 000a D3F87C34 		ldr	r3, [r3, #1148]
  66              		.loc 1 153 15
  67 000e 1979     		ldrb	r1, [r3, #4]	@ zero_extendqisi2
  68 0010 5023     		movs	r3, #80
  69 0012 0622     		movs	r2, #6
  70 0014 7868     		ldr	r0, [r7, #4]
  71 0016 FFF7FEFF 		bl	USBH_FindInterface
  72 001a 0346     		mov	r3, r0
  73 001c FB73     		strb	r3, [r7, #15]
 154:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 155:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((interface == 0xFFU) || (interface >= USBH_MAX_NUM_INTERFACES)) /* Not Valid Interface */
  74              		.loc 1 155 6
  75 001e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  76 0020 FF2B     		cmp	r3, #255
ARM GAS  /tmp/cc5Cbh8K.s 			page 5


  77 0022 02D0     		beq	.L2
  78              		.loc 1 155 28 discriminator 1
  79 0024 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  80 0026 012B     		cmp	r3, #1
  81 0028 01D9     		bls	.L3
  82              	.L2:
 156:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 157:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_DbgLog("Cannot Find the interface for %s class.", phost->pActiveClass->Name);
 158:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_FAIL;
  83              		.loc 1 158 12
  84 002a 0223     		movs	r3, #2
  85 002c EFE0     		b	.L4
  86              	.L3:
 159:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 160:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 161:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   status = USBH_SelectInterface(phost, interface);
  87              		.loc 1 161 12
  88 002e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  89 0030 1946     		mov	r1, r3
  90 0032 7868     		ldr	r0, [r7, #4]
  91 0034 FFF7FEFF 		bl	USBH_SelectInterface
  92 0038 0346     		mov	r3, r0
  93 003a BB73     		strb	r3, [r7, #14]
 162:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 163:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (status != USBH_OK)
  94              		.loc 1 163 6
  95 003c BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
  96 003e 002B     		cmp	r3, #0
  97 0040 01D0     		beq	.L5
 164:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 165:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_FAIL;
  98              		.loc 1 165 12
  99 0042 0223     		movs	r3, #2
 100 0044 E3E0     		b	.L4
 101              	.L5:
 166:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 167:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 168:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   phost->pActiveClass->pData = (MSC_HandleTypeDef *)USBH_malloc(sizeof(MSC_HandleTypeDef));
 102              		.loc 1 168 8
 103 0046 7B68     		ldr	r3, [r7, #4]
 104 0048 D3F87C44 		ldr	r4, [r3, #1148]
 105              		.loc 1 168 53
 106 004c 4FF48070 		mov	r0, #256
 107 0050 FFF7FEFF 		bl	pvPortMalloc
 108 0054 0346     		mov	r3, r0
 109              		.loc 1 168 30
 110 0056 E361     		str	r3, [r4, #28]
 169:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 111              		.loc 1 169 43
 112 0058 7B68     		ldr	r3, [r7, #4]
 113 005a D3F87C34 		ldr	r3, [r3, #1148]
 114              		.loc 1 169 14
 115 005e DB69     		ldr	r3, [r3, #28]
 116 0060 BB60     		str	r3, [r7, #8]
 170:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 171:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (MSC_Handle == NULL)
 117              		.loc 1 171 6
ARM GAS  /tmp/cc5Cbh8K.s 			page 6


 118 0062 BB68     		ldr	r3, [r7, #8]
 119 0064 002B     		cmp	r3, #0
 120 0066 01D1     		bne	.L6
 172:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 173:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_DbgLog("Cannot allocate memory for MSC Handle");
 174:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_FAIL;
 121              		.loc 1 174 12
 122 0068 0223     		movs	r3, #2
 123 006a D0E0     		b	.L4
 124              	.L6:
 175:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 176:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 177:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Initialize msc handler */
 178:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_memset(MSC_Handle, 0, sizeof(MSC_HandleTypeDef));
 125              		.loc 1 178 3
 126 006c 4FF48072 		mov	r2, #256
 127 0070 0021     		movs	r1, #0
 128 0072 B868     		ldr	r0, [r7, #8]
 129 0074 FFF7FEFF 		bl	memset
 179:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 180:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[0].bEndpointAddress & 0x80U)
 130              		.loc 1 180 59
 131 0078 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 132 007a 7A68     		ldr	r2, [r7, #4]
 133 007c 1A21     		movs	r1, #26
 134 007e 01FB03F3 		mul	r3, r1, r3
 135 0082 1344     		add	r3, r3, r2
 136 0084 03F24E43 		addw	r3, r3, #1102
 137 0088 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 138              		.loc 1 180 7
 139 008a 5BB2     		sxtb	r3, r3
 140              		.loc 1 180 6
 141 008c 002B     		cmp	r3, #0
 142 008e 16DA     		bge	.L7
 181:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 182:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InEp = (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[0].bEndpointAddress);
 143              		.loc 1 182 77
 144 0090 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 145 0092 7A68     		ldr	r2, [r7, #4]
 146 0094 1A21     		movs	r1, #26
 147 0096 01FB03F3 		mul	r3, r1, r3
 148 009a 1344     		add	r3, r3, r2
 149 009c 03F24E43 		addw	r3, r3, #1102
 150 00a0 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 151              		.loc 1 182 22
 152 00a2 BB68     		ldr	r3, [r7, #8]
 153 00a4 DA71     		strb	r2, [r3, #7]
 183:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InEpSize = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[0].wMaxPacketSize;
 154              		.loc 1 183 80
 155 00a6 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 156 00a8 7A68     		ldr	r2, [r7, #4]
 157 00aa 1A21     		movs	r1, #26
 158 00ac 01FB03F3 		mul	r3, r1, r3
 159 00b0 1344     		add	r3, r3, r2
 160 00b2 03F58A63 		add	r3, r3, #1104
 161 00b6 1A88     		ldrh	r2, [r3]
 162              		.loc 1 183 26
ARM GAS  /tmp/cc5Cbh8K.s 			page 7


 163 00b8 BB68     		ldr	r3, [r7, #8]
 164 00ba 5A81     		strh	r2, [r3, #10]	@ movhi
 165 00bc 15E0     		b	.L8
 166              	.L7:
 184:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 185:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 186:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 187:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutEp = (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[0].bEndpointAddress);
 167              		.loc 1 187 78
 168 00be FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 169 00c0 7A68     		ldr	r2, [r7, #4]
 170 00c2 1A21     		movs	r1, #26
 171 00c4 01FB03F3 		mul	r3, r1, r3
 172 00c8 1344     		add	r3, r3, r2
 173 00ca 03F24E43 		addw	r3, r3, #1102
 174 00ce 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 175              		.loc 1 187 23
 176 00d0 BB68     		ldr	r3, [r7, #8]
 177 00d2 9A71     		strb	r2, [r3, #6]
 188:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutEpSize = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[0].wMaxPacketSize;
 178              		.loc 1 188 81
 179 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 180 00d6 7A68     		ldr	r2, [r7, #4]
 181 00d8 1A21     		movs	r1, #26
 182 00da 01FB03F3 		mul	r3, r1, r3
 183 00de 1344     		add	r3, r3, r2
 184 00e0 03F58A63 		add	r3, r3, #1104
 185 00e4 1A88     		ldrh	r2, [r3]
 186              		.loc 1 188 27
 187 00e6 BB68     		ldr	r3, [r7, #8]
 188 00e8 1A81     		strh	r2, [r3, #8]	@ movhi
 189              	.L8:
 189:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 190:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 191:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[1].bEndpointAddress & 0x80U)
 190              		.loc 1 191 59
 191 00ea FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 192 00ec 7A68     		ldr	r2, [r7, #4]
 193 00ee 1A21     		movs	r1, #26
 194 00f0 01FB03F3 		mul	r3, r1, r3
 195 00f4 1344     		add	r3, r3, r2
 196 00f6 03F25643 		addw	r3, r3, #1110
 197 00fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 198              		.loc 1 191 7
 199 00fc 5BB2     		sxtb	r3, r3
 200              		.loc 1 191 6
 201 00fe 002B     		cmp	r3, #0
 202 0100 16DA     		bge	.L9
 192:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 193:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InEp = (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[1].bEndpointAddress);
 203              		.loc 1 193 77
 204 0102 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 205 0104 7A68     		ldr	r2, [r7, #4]
 206 0106 1A21     		movs	r1, #26
 207 0108 01FB03F3 		mul	r3, r1, r3
 208 010c 1344     		add	r3, r3, r2
 209 010e 03F25643 		addw	r3, r3, #1110
ARM GAS  /tmp/cc5Cbh8K.s 			page 8


 210 0112 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 211              		.loc 1 193 22
 212 0114 BB68     		ldr	r3, [r7, #8]
 213 0116 DA71     		strb	r2, [r3, #7]
 194:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InEpSize = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[1].wMaxPacketSize;
 214              		.loc 1 194 80
 215 0118 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 216 011a 7A68     		ldr	r2, [r7, #4]
 217 011c 1A21     		movs	r1, #26
 218 011e 01FB03F3 		mul	r3, r1, r3
 219 0122 1344     		add	r3, r3, r2
 220 0124 03F58B63 		add	r3, r3, #1112
 221 0128 1A88     		ldrh	r2, [r3]
 222              		.loc 1 194 26
 223 012a BB68     		ldr	r3, [r7, #8]
 224 012c 5A81     		strh	r2, [r3, #10]	@ movhi
 225 012e 15E0     		b	.L10
 226              	.L9:
 195:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 196:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 197:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 198:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutEp = (phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[1].bEndpointAddress);
 227              		.loc 1 198 78
 228 0130 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 229 0132 7A68     		ldr	r2, [r7, #4]
 230 0134 1A21     		movs	r1, #26
 231 0136 01FB03F3 		mul	r3, r1, r3
 232 013a 1344     		add	r3, r3, r2
 233 013c 03F25643 		addw	r3, r3, #1110
 234 0140 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 235              		.loc 1 198 23
 236 0142 BB68     		ldr	r3, [r7, #8]
 237 0144 9A71     		strb	r2, [r3, #6]
 199:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutEpSize = phost->device.CfgDesc.Itf_Desc[interface].Ep_Desc[1].wMaxPacketSize;
 238              		.loc 1 199 81
 239 0146 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 240 0148 7A68     		ldr	r2, [r7, #4]
 241 014a 1A21     		movs	r1, #26
 242 014c 01FB03F3 		mul	r3, r1, r3
 243 0150 1344     		add	r3, r3, r2
 244 0152 03F58B63 		add	r3, r3, #1112
 245 0156 1A88     		ldrh	r2, [r3]
 246              		.loc 1 199 27
 247 0158 BB68     		ldr	r3, [r7, #8]
 248 015a 1A81     		strh	r2, [r3, #8]	@ movhi
 249              	.L10:
 200:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 201:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 202:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_INIT;
 250              		.loc 1 202 21
 251 015c BB68     		ldr	r3, [r7, #8]
 252 015e 0022     		movs	r2, #0
 253 0160 1A73     		strb	r2, [r3, #12]
 203:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->error = MSC_OK;
 254              		.loc 1 203 21
 255 0162 BB68     		ldr	r3, [r7, #8]
 256 0164 0022     		movs	r2, #0
ARM GAS  /tmp/cc5Cbh8K.s 			page 9


 257 0166 5A73     		strb	r2, [r3, #13]
 204:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->req_state = MSC_REQ_IDLE;
 258              		.loc 1 204 25
 259 0168 BB68     		ldr	r3, [r7, #8]
 260 016a 0022     		movs	r2, #0
 261 016c 9A73     		strb	r2, [r3, #14]
 205:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->OutPipe = USBH_AllocPipe(phost, MSC_Handle->OutEp);
 262              		.loc 1 205 25
 263 016e BB68     		ldr	r3, [r7, #8]
 264 0170 9B79     		ldrb	r3, [r3, #6]	@ zero_extendqisi2
 265 0172 1946     		mov	r1, r3
 266 0174 7868     		ldr	r0, [r7, #4]
 267 0176 FFF7FEFF 		bl	USBH_AllocPipe
 268 017a 0346     		mov	r3, r0
 269 017c 1A46     		mov	r2, r3
 270              		.loc 1 205 23
 271 017e BB68     		ldr	r3, [r7, #8]
 272 0180 5A71     		strb	r2, [r3, #5]
 206:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->InPipe = USBH_AllocPipe(phost, MSC_Handle->InEp);
 273              		.loc 1 206 24
 274 0182 BB68     		ldr	r3, [r7, #8]
 275 0184 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 276 0186 1946     		mov	r1, r3
 277 0188 7868     		ldr	r0, [r7, #4]
 278 018a FFF7FEFF 		bl	USBH_AllocPipe
 279 018e 0346     		mov	r3, r0
 280 0190 1A46     		mov	r2, r3
 281              		.loc 1 206 22
 282 0192 BB68     		ldr	r3, [r7, #8]
 283 0194 1A71     		strb	r2, [r3, #4]
 207:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 208:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_BOT_Init(phost);
 284              		.loc 1 208 3
 285 0196 7868     		ldr	r0, [r7, #4]
 286 0198 FFF7FEFF 		bl	USBH_MSC_BOT_Init
 209:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 210:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Open the new channels */
 211:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_OpenPipe(phost, MSC_Handle->OutPipe, MSC_Handle->OutEp,
 287              		.loc 1 211 3
 288 019c BB68     		ldr	r3, [r7, #8]
 289 019e 5979     		ldrb	r1, [r3, #5]	@ zero_extendqisi2
 290 01a0 BB68     		ldr	r3, [r7, #8]
 291 01a2 9879     		ldrb	r0, [r3, #6]	@ zero_extendqisi2
 292 01a4 7B68     		ldr	r3, [r7, #4]
 293 01a6 93F81C44 		ldrb	r4, [r3, #1052]	@ zero_extendqisi2
 294 01aa 7B68     		ldr	r3, [r7, #4]
 295 01ac 93F81D34 		ldrb	r3, [r3, #1053]	@ zero_extendqisi2
 296 01b0 BA68     		ldr	r2, [r7, #8]
 297 01b2 1289     		ldrh	r2, [r2, #8]
 298 01b4 0292     		str	r2, [sp, #8]
 299 01b6 0222     		movs	r2, #2
 300 01b8 0192     		str	r2, [sp, #4]
 301 01ba 0093     		str	r3, [sp]
 302 01bc 2346     		mov	r3, r4
 303 01be 0246     		mov	r2, r0
 304 01c0 7868     		ldr	r0, [r7, #4]
 305 01c2 FFF7FEFF 		bl	USBH_OpenPipe
ARM GAS  /tmp/cc5Cbh8K.s 			page 10


 212:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 phost->device.address, phost->device.speed,
 213:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USB_EP_TYPE_BULK, MSC_Handle->OutEpSize);
 214:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 215:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_OpenPipe(phost, MSC_Handle->InPipe, MSC_Handle->InEp,
 306              		.loc 1 215 3
 307 01c6 BB68     		ldr	r3, [r7, #8]
 308 01c8 1979     		ldrb	r1, [r3, #4]	@ zero_extendqisi2
 309 01ca BB68     		ldr	r3, [r7, #8]
 310 01cc D879     		ldrb	r0, [r3, #7]	@ zero_extendqisi2
 311 01ce 7B68     		ldr	r3, [r7, #4]
 312 01d0 93F81C44 		ldrb	r4, [r3, #1052]	@ zero_extendqisi2
 313 01d4 7B68     		ldr	r3, [r7, #4]
 314 01d6 93F81D34 		ldrb	r3, [r3, #1053]	@ zero_extendqisi2
 315 01da BA68     		ldr	r2, [r7, #8]
 316 01dc 5289     		ldrh	r2, [r2, #10]
 317 01de 0292     		str	r2, [sp, #8]
 318 01e0 0222     		movs	r2, #2
 319 01e2 0192     		str	r2, [sp, #4]
 320 01e4 0093     		str	r3, [sp]
 321 01e6 2346     		mov	r3, r4
 322 01e8 0246     		mov	r2, r0
 323 01ea 7868     		ldr	r0, [r7, #4]
 324 01ec FFF7FEFF 		bl	USBH_OpenPipe
 216:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 phost->device.address, phost->device.speed, USB_EP_TYPE_BULK,
 217:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->InEpSize);
 218:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 219:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_LL_SetToggle(phost, MSC_Handle->InPipe, 0U);
 325              		.loc 1 219 3
 326 01f0 BB68     		ldr	r3, [r7, #8]
 327 01f2 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 328 01f4 0022     		movs	r2, #0
 329 01f6 1946     		mov	r1, r3
 330 01f8 7868     		ldr	r0, [r7, #4]
 331 01fa FFF7FEFF 		bl	USBH_LL_SetToggle
 220:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_LL_SetToggle(phost, MSC_Handle->OutPipe, 0U);
 332              		.loc 1 220 3
 333 01fe BB68     		ldr	r3, [r7, #8]
 334 0200 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 335 0202 0022     		movs	r2, #0
 336 0204 1946     		mov	r1, r3
 337 0206 7868     		ldr	r0, [r7, #4]
 338 0208 FFF7FEFF 		bl	USBH_LL_SetToggle
 221:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 222:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 339              		.loc 1 222 10
 340 020c 0023     		movs	r3, #0
 341              	.L4:
 223:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 342              		.loc 1 223 1
 343 020e 1846     		mov	r0, r3
 344 0210 1437     		adds	r7, r7, #20
 345              	.LCFI3:
 346              		.cfi_def_cfa_offset 12
 347 0212 BD46     		mov	sp, r7
 348              	.LCFI4:
 349              		.cfi_def_cfa_register 13
 350              		@ sp needed
ARM GAS  /tmp/cc5Cbh8K.s 			page 11


 351 0214 90BD     		pop	{r4, r7, pc}
 352              		.cfi_endproc
 353              	.LFE338:
 355              		.section	.text.USBH_MSC_InterfaceDeInit,"ax",%progbits
 356              		.align	1
 357              		.syntax unified
 358              		.thumb
 359              		.thumb_func
 360              		.fpu fpv5-d16
 362              	USBH_MSC_InterfaceDeInit:
 363              	.LFB339:
 224:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 225:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 226:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_InterfaceDeInit
 227:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function DeInit the Pipes used for the MSC class.
 228:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 229:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 230:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 231:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_InterfaceDeInit(USBH_HandleTypeDef *phost)
 232:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 364              		.loc 1 232 1
 365              		.cfi_startproc
 366              		@ args = 0, pretend = 0, frame = 16
 367              		@ frame_needed = 1, uses_anonymous_args = 0
 368 0000 80B5     		push	{r7, lr}
 369              	.LCFI5:
 370              		.cfi_def_cfa_offset 8
 371              		.cfi_offset 7, -8
 372              		.cfi_offset 14, -4
 373 0002 84B0     		sub	sp, sp, #16
 374              	.LCFI6:
 375              		.cfi_def_cfa_offset 24
 376 0004 00AF     		add	r7, sp, #0
 377              	.LCFI7:
 378              		.cfi_def_cfa_register 7
 379 0006 7860     		str	r0, [r7, #4]
 233:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 380              		.loc 1 233 62
 381 0008 7B68     		ldr	r3, [r7, #4]
 382 000a D3F87C34 		ldr	r3, [r3, #1148]
 383              		.loc 1 233 22
 384 000e DB69     		ldr	r3, [r3, #28]
 385 0010 FB60     		str	r3, [r7, #12]
 234:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 235:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (MSC_Handle->OutPipe)
 386              		.loc 1 235 17
 387 0012 FB68     		ldr	r3, [r7, #12]
 388 0014 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 389              		.loc 1 235 6
 390 0016 002B     		cmp	r3, #0
 391 0018 0ED0     		beq	.L12
 236:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_ClosePipe(phost, MSC_Handle->OutPipe);
 392              		.loc 1 237 5
 393 001a FB68     		ldr	r3, [r7, #12]
 394 001c 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 395 001e 1946     		mov	r1, r3
ARM GAS  /tmp/cc5Cbh8K.s 			page 12


 396 0020 7868     		ldr	r0, [r7, #4]
 397 0022 FFF7FEFF 		bl	USBH_ClosePipe
 238:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe(phost, MSC_Handle->OutPipe);
 398              		.loc 1 238 5
 399 0026 FB68     		ldr	r3, [r7, #12]
 400 0028 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 401 002a 1946     		mov	r1, r3
 402 002c 7868     		ldr	r0, [r7, #4]
 403 002e FFF7FEFF 		bl	USBH_FreePipe
 239:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->OutPipe = 0U;     /* Reset the Channel as Free */
 404              		.loc 1 239 25
 405 0032 FB68     		ldr	r3, [r7, #12]
 406 0034 0022     		movs	r2, #0
 407 0036 5A71     		strb	r2, [r3, #5]
 408              	.L12:
 240:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 241:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 242:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (MSC_Handle->InPipe)
 409              		.loc 1 242 17
 410 0038 FB68     		ldr	r3, [r7, #12]
 411 003a 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 412              		.loc 1 242 6
 413 003c 002B     		cmp	r3, #0
 414 003e 0ED0     		beq	.L13
 243:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 244:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_ClosePipe(phost, MSC_Handle->InPipe);
 415              		.loc 1 244 5
 416 0040 FB68     		ldr	r3, [r7, #12]
 417 0042 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 418 0044 1946     		mov	r1, r3
 419 0046 7868     		ldr	r0, [r7, #4]
 420 0048 FFF7FEFF 		bl	USBH_ClosePipe
 245:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_FreePipe(phost, MSC_Handle->InPipe);
 421              		.loc 1 245 5
 422 004c FB68     		ldr	r3, [r7, #12]
 423 004e 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 424 0050 1946     		mov	r1, r3
 425 0052 7868     		ldr	r0, [r7, #4]
 426 0054 FFF7FEFF 		bl	USBH_FreePipe
 246:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     MSC_Handle->InPipe = 0U;     /* Reset the Channel as Free */
 427              		.loc 1 246 24
 428 0058 FB68     		ldr	r3, [r7, #12]
 429 005a 0022     		movs	r2, #0
 430 005c 1A71     		strb	r2, [r3, #4]
 431              	.L13:
 247:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 248:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 249:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (phost->pActiveClass->pData)
 432              		.loc 1 249 12
 433 005e 7B68     		ldr	r3, [r7, #4]
 434 0060 D3F87C34 		ldr	r3, [r3, #1148]
 435              		.loc 1 249 26
 436 0064 DB69     		ldr	r3, [r3, #28]
 437              		.loc 1 249 6
 438 0066 002B     		cmp	r3, #0
 439 0068 0BD0     		beq	.L14
 250:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
ARM GAS  /tmp/cc5Cbh8K.s 			page 13


 251:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_free(phost->pActiveClass->pData);
 440              		.loc 1 251 20
 441 006a 7B68     		ldr	r3, [r7, #4]
 442 006c D3F87C34 		ldr	r3, [r3, #1148]
 443              		.loc 1 251 5
 444 0070 DB69     		ldr	r3, [r3, #28]
 445 0072 1846     		mov	r0, r3
 446 0074 FFF7FEFF 		bl	vPortFree
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     phost->pActiveClass->pData = 0U;
 447              		.loc 1 252 10
 448 0078 7B68     		ldr	r3, [r7, #4]
 449 007a D3F87C34 		ldr	r3, [r3, #1148]
 450              		.loc 1 252 32
 451 007e 0022     		movs	r2, #0
 452 0080 DA61     		str	r2, [r3, #28]
 453              	.L14:
 253:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 254:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 255:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 454              		.loc 1 255 10
 455 0082 0023     		movs	r3, #0
 256:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 456              		.loc 1 256 1
 457 0084 1846     		mov	r0, r3
 458 0086 1037     		adds	r7, r7, #16
 459              	.LCFI8:
 460              		.cfi_def_cfa_offset 8
 461 0088 BD46     		mov	sp, r7
 462              	.LCFI9:
 463              		.cfi_def_cfa_register 13
 464              		@ sp needed
 465 008a 80BD     		pop	{r7, pc}
 466              		.cfi_endproc
 467              	.LFE339:
 469              		.section	.text.USBH_MSC_ClassRequest,"ax",%progbits
 470              		.align	1
 471              		.syntax unified
 472              		.thumb
 473              		.thumb_func
 474              		.fpu fpv5-d16
 476              	USBH_MSC_ClassRequest:
 477              	.LFB340:
 257:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 258:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 259:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_ClassRequest
 260:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is responsible for handling Standard requests
 261:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         for MSC class.
 262:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 263:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 264:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 265:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_ClassRequest(USBH_HandleTypeDef *phost)
 266:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 478              		.loc 1 266 1
 479              		.cfi_startproc
 480              		@ args = 0, pretend = 0, frame = 16
 481              		@ frame_needed = 1, uses_anonymous_args = 0
 482 0000 80B5     		push	{r7, lr}
ARM GAS  /tmp/cc5Cbh8K.s 			page 14


 483              	.LCFI10:
 484              		.cfi_def_cfa_offset 8
 485              		.cfi_offset 7, -8
 486              		.cfi_offset 14, -4
 487 0002 84B0     		sub	sp, sp, #16
 488              	.LCFI11:
 489              		.cfi_def_cfa_offset 24
 490 0004 00AF     		add	r7, sp, #0
 491              	.LCFI12:
 492              		.cfi_def_cfa_register 7
 493 0006 7860     		str	r0, [r7, #4]
 267:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 494              		.loc 1 267 62
 495 0008 7B68     		ldr	r3, [r7, #4]
 496 000a D3F87C34 		ldr	r3, [r3, #1148]
 497              		.loc 1 267 22
 498 000e DB69     		ldr	r3, [r3, #28]
 499 0010 BB60     		str	r3, [r7, #8]
 268:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef status = USBH_BUSY;
 500              		.loc 1 268 22
 501 0012 0123     		movs	r3, #1
 502 0014 FB73     		strb	r3, [r7, #15]
 269:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t i;
 270:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 271:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Switch MSC REQ state machine */
 272:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->req_state)
 503              		.loc 1 272 21
 504 0016 BB68     		ldr	r3, [r7, #8]
 505 0018 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 506              		.loc 1 272 3
 507 001a 032B     		cmp	r3, #3
 508 001c 41D0     		beq	.L17
 509 001e 032B     		cmp	r3, #3
 510 0020 4BDC     		bgt	.L29
 511 0022 002B     		cmp	r3, #0
 512 0024 01D0     		beq	.L19
 513 0026 022B     		cmp	r3, #2
 514 0028 47D1     		bne	.L29
 515              	.L19:
 273:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 274:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_REQ_IDLE:
 275:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_REQ_GET_MAX_LUN:
 276:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       /* Issue GetMaxLUN request */
 277:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       status = USBH_MSC_BOT_REQ_GetMaxLUN(phost, &MSC_Handle->max_lun);
 516              		.loc 1 277 16
 517 002a BB68     		ldr	r3, [r7, #8]
 518 002c 1946     		mov	r1, r3
 519 002e 7868     		ldr	r0, [r7, #4]
 520 0030 FFF7FEFF 		bl	USBH_MSC_BOT_REQ_GetMaxLUN
 521 0034 0346     		mov	r3, r0
 522 0036 FB73     		strb	r3, [r7, #15]
 278:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 279:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       /* When devices do not support the GetMaxLun request, this should
 280:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****          be considred as only one logical unit is supported */
 281:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (status == USBH_NOT_SUPPORTED)
 523              		.loc 1 281 10
 524 0038 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
ARM GAS  /tmp/cc5Cbh8K.s 			page 15


 525 003a 032B     		cmp	r3, #3
 526 003c 04D1     		bne	.L20
 282:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 283:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->max_lun = 0U;
 527              		.loc 1 283 29
 528 003e BB68     		ldr	r3, [r7, #8]
 529 0040 0022     		movs	r2, #0
 530 0042 1A70     		strb	r2, [r3]
 284:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         status = USBH_OK;
 531              		.loc 1 284 16
 532 0044 0023     		movs	r3, #0
 533 0046 FB73     		strb	r3, [r7, #15]
 534              	.L20:
 285:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 286:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 287:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (status == USBH_OK)
 535              		.loc 1 287 10
 536 0048 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 537 004a 002B     		cmp	r3, #0
 538 004c 37D1     		bne	.L30
 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 289:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->max_lun = (MSC_Handle->max_lun > MAX_SUPPORTED_LUN) ? MAX_SUPPORTED_LUN : (MSC_
 539              		.loc 1 289 42
 540 004e BB68     		ldr	r3, [r7, #8]
 541 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 542              		.loc 1 289 29
 543 0052 022B     		cmp	r3, #2
 544 0054 04D8     		bhi	.L22
 545              		.loc 1 289 106 discriminator 1
 546 0056 BB68     		ldr	r3, [r7, #8]
 547 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 548              		.loc 1 289 29 discriminator 1
 549 005a 0133     		adds	r3, r3, #1
 550 005c DAB2     		uxtb	r2, r3
 551 005e 00E0     		b	.L23
 552              	.L22:
 553              		.loc 1 289 29 is_stmt 0 discriminator 2
 554 0060 0222     		movs	r2, #2
 555              	.L23:
 556              		.loc 1 289 29 discriminator 4
 557 0062 BB68     		ldr	r3, [r7, #8]
 558 0064 1A70     		strb	r2, [r3]
 290:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         USBH_UsrLog("Number of supported LUN: %d", MSC_Handle->max_lun);
 291:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         for (i = 0U; i < MSC_Handle->max_lun; i++)
 559              		.loc 1 292 16 is_stmt 1 discriminator 4
 560 0066 0023     		movs	r3, #0
 561 0068 BB73     		strb	r3, [r7, #14]
 562              		.loc 1 292 9 discriminator 4
 563 006a 14E0     		b	.L24
 564              	.L25:
 293:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 294:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[i].prev_ready_state = USBH_FAIL;
 565              		.loc 1 294 30 discriminator 3
 566 006c BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 567              		.loc 1 294 48 discriminator 3
 568 006e BA68     		ldr	r2, [r7, #8]
ARM GAS  /tmp/cc5Cbh8K.s 			page 16


 569 0070 3421     		movs	r1, #52
 570 0072 01FB03F3 		mul	r3, r1, r3
 571 0076 1344     		add	r3, r3, r2
 572 0078 9233     		adds	r3, r3, #146
 573 007a 0222     		movs	r2, #2
 574 007c 1A70     		strb	r2, [r3]
 295:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[i].state_changed = 0U;
 575              		.loc 1 295 30 discriminator 3
 576 007e BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 577              		.loc 1 295 45 discriminator 3
 578 0080 BA68     		ldr	r2, [r7, #8]
 579 0082 3421     		movs	r1, #52
 580 0084 01FB03F3 		mul	r3, r1, r3
 581 0088 1344     		add	r3, r3, r2
 582 008a C133     		adds	r3, r3, #193
 583 008c 0022     		movs	r2, #0
 584 008e 1A70     		strb	r2, [r3]
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 585              		.loc 1 292 48 discriminator 3
 586 0090 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 587 0092 0133     		adds	r3, r3, #1
 588 0094 BB73     		strb	r3, [r7, #14]
 589              	.L24:
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 590              		.loc 1 292 36 discriminator 1
 591 0096 BB68     		ldr	r3, [r7, #8]
 592 0098 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 593              		.loc 1 292 9 discriminator 1
 594 009a BA7B     		ldrb	r2, [r7, #14]	@ zero_extendqisi2
 595 009c 9A42     		cmp	r2, r3
 596 009e E5D3     		bcc	.L25
 296:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 297:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 597              		.loc 1 298 7
 598 00a0 0DE0     		b	.L30
 599              	.L17:
 299:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 300:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_REQ_ERROR:
 301:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       /* a Clear Feature should be issued here */
 302:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (USBH_ClrFeature(phost, 0x00U) == USBH_OK)
 600              		.loc 1 302 11
 601 00a2 0021     		movs	r1, #0
 602 00a4 7868     		ldr	r0, [r7, #4]
 603 00a6 FFF7FEFF 		bl	USBH_ClrFeature
 604 00aa 0346     		mov	r3, r0
 605              		.loc 1 302 10
 606 00ac 002B     		cmp	r3, #0
 607 00ae 08D1     		bne	.L31
 303:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 304:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->req_state = MSC_Handle->prev_req_state;
 608              		.loc 1 304 43
 609 00b0 BB68     		ldr	r3, [r7, #8]
 610 00b2 DA7B     		ldrb	r2, [r3, #15]	@ zero_extendqisi2
 611              		.loc 1 304 31
 612 00b4 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/cc5Cbh8K.s 			page 17


 613 00b6 9A73     		strb	r2, [r3, #14]
 305:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 306:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 614              		.loc 1 306 7
 615 00b8 03E0     		b	.L31
 616              	.L29:
 307:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 308:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     default:
 309:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 617              		.loc 1 309 7
 618 00ba 00BF     		nop
 619 00bc 02E0     		b	.L26
 620              	.L30:
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 621              		.loc 1 298 7
 622 00be 00BF     		nop
 623 00c0 00E0     		b	.L26
 624              	.L31:
 306:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 625              		.loc 1 306 7
 626 00c2 00BF     		nop
 627              	.L26:
 310:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 311:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 312:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return status;
 628              		.loc 1 312 10
 629 00c4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 313:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 630              		.loc 1 313 1
 631 00c6 1846     		mov	r0, r3
 632 00c8 1037     		adds	r7, r7, #16
 633              	.LCFI13:
 634              		.cfi_def_cfa_offset 8
 635 00ca BD46     		mov	sp, r7
 636              	.LCFI14:
 637              		.cfi_def_cfa_register 13
 638              		@ sp needed
 639 00cc 80BD     		pop	{r7, pc}
 640              		.cfi_endproc
 641              	.LFE340:
 643              		.section	.text.USBH_MSC_Process,"ax",%progbits
 644              		.align	1
 645              		.syntax unified
 646              		.thumb
 647              		.thumb_func
 648              		.fpu fpv5-d16
 650              	USBH_MSC_Process:
 651              	.LFB341:
 314:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 315:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 316:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Process
 317:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for managing state machine for MSC data transfers
 318:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 319:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 320:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 321:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_Process(USBH_HandleTypeDef *phost)
 322:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
ARM GAS  /tmp/cc5Cbh8K.s 			page 18


 652              		.loc 1 322 1
 653              		.cfi_startproc
 654              		@ args = 0, pretend = 0, frame = 24
 655              		@ frame_needed = 1, uses_anonymous_args = 0
 656 0000 80B5     		push	{r7, lr}
 657              	.LCFI15:
 658              		.cfi_def_cfa_offset 8
 659              		.cfi_offset 7, -8
 660              		.cfi_offset 14, -4
 661 0002 86B0     		sub	sp, sp, #24
 662              	.LCFI16:
 663              		.cfi_def_cfa_offset 32
 664 0004 00AF     		add	r7, sp, #0
 665              	.LCFI17:
 666              		.cfi_def_cfa_register 7
 667 0006 7860     		str	r0, [r7, #4]
 323:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 668              		.loc 1 323 62
 669 0008 7B68     		ldr	r3, [r7, #4]
 670 000a D3F87C34 		ldr	r3, [r3, #1148]
 671              		.loc 1 323 22
 672 000e DB69     		ldr	r3, [r3, #28]
 673 0010 3B61     		str	r3, [r7, #16]
 324:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY;
 674              		.loc 1 324 22
 675 0012 0123     		movs	r3, #1
 676 0014 FB75     		strb	r3, [r7, #23]
 325:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY;
 677              		.loc 1 325 22
 678 0016 0123     		movs	r3, #1
 679 0018 FB73     		strb	r3, [r7, #15]
 326:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef ready_status = USBH_BUSY;
 680              		.loc 1 326 22
 681 001a 0123     		movs	r3, #1
 682 001c BB73     		strb	r3, [r7, #14]
 327:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 328:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->state)
 683              		.loc 1 328 21
 684 001e 3B69     		ldr	r3, [r7, #16]
 685 0020 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 686              		.loc 1 328 3
 687 0022 002B     		cmp	r3, #0
 688 0024 03D0     		beq	.L33
 689 0026 012B     		cmp	r3, #1
 690 0028 00F08D82 		beq	.L34
 329:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 330:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_INIT:
 331:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 332:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (MSC_Handle->current_lun < MSC_Handle->max_lun)
 333:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 334:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 335:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 336:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         /* Switch MSC REQ state machine */
 337:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         switch (MSC_Handle->unit[MSC_Handle->current_lun].state)
 338:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 339:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           case MSC_INIT:
 340:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             USBH_UsrLog("LUN #%d: ", MSC_Handle->current_lun);
ARM GAS  /tmp/cc5Cbh8K.s 			page 19


 341:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_INQUIRY;
 342:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->timer = phost->Timer;
 343:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 344:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 345:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           case MSC_READ_INQUIRY:
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             scsi_status = USBH_MSC_SCSI_Inquiry(phost, (uint8_t)MSC_Handle->current_lun, &MSC_Handl
 347:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 348:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if (scsi_status == USBH_OK)
 349:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 350:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               USBH_UsrLog("Inquiry Vendor  : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry
 351:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               USBH_UsrLog("Inquiry Product : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry
 352:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               USBH_UsrLog("Inquiry Version : %s", MSC_Handle->unit[MSC_Handle->current_lun].inquiry
 353:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;
 354:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 355:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if (scsi_status == USBH_FAIL)
 356:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 357:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;
 358:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 359:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             else
 360:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 361:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if (scsi_status == USBH_UNRECOVERED_ERROR)
 362:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 363:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 364:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 365:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 366:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 368:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 369:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           case MSC_TEST_UNIT_READY:
 370:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             ready_status = USBH_MSC_SCSI_TestUnitReady(phost, (uint8_t)MSC_Handle->current_lun);
 371:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 372:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if (ready_status == USBH_OK)
 373:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 374:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if (MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state != USBH_OK)
 375:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 376:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 1U;
 377:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("MSC Device ready");
 378:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 379:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               else
 380:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 381:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 0U;
 382:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 383:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_READ_CAPACITY10;
 384:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 385:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_OK;
 386:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 387:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if (ready_status == USBH_FAIL)
 388:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 389:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               /* Media not ready, so try to check again during 10s */
 390:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if (MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state != USBH_FAIL)
 391:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 392:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 1U;
 393:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("MSC Device NOT ready");
 394:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 395:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               else
 396:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 397:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state_changed = 0U;
ARM GAS  /tmp/cc5Cbh8K.s 			page 20


 398:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 399:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;
 400:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 401:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_FAIL;
 402:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 403:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             else
 404:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 405:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if (ready_status == USBH_UNRECOVERED_ERROR)
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 409:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 411:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 412:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 413:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           case MSC_READ_CAPACITY10:
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             scsi_status = USBH_MSC_SCSI_ReadCapacity(phost, (uint8_t)MSC_Handle->current_lun, &MSC_
 415:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 416:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if (scsi_status == USBH_OK)
 417:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 418:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if (MSC_Handle->unit[MSC_Handle->current_lun].state_changed == 1U)
 419:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 420:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("MSC Device capacity : %lu Bytes", \
 421:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                             (int32_t)(MSC_Handle->unit[MSC_Handle->current_lun].capacity.block_nbr 
 422:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("Block number : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lu
 423:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("Block Size   : %lu", (int32_t)(MSC_Handle->unit[MSC_Handle->current_lu
 424:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 425:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 427:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->current_lun++;
 428:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 429:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             else if (scsi_status == USBH_FAIL)
 430:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 431:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_REQUEST_SENSE;
 432:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 433:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             else
 434:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 435:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if (scsi_status == USBH_UNRECOVERED_ERROR)
 436:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 437:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 438:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 439:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 440:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 441:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 442:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 443:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           case MSC_REQUEST_SENSE:
 444:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             scsi_status = USBH_MSC_SCSI_RequestSense(phost, (uint8_t)MSC_Handle->current_lun, &MSC_
 445:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 446:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if (scsi_status == USBH_OK)
 447:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 448:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if ((MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_UNIT_ATTEN
 449:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY)
 450:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 451:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 452:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 if ((phost->Timer - MSC_Handle->timer) < 10000U)
 453:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 {
 454:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_TEST_UNIT_READY;
ARM GAS  /tmp/cc5Cbh8K.s 			page 21


 455:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   break;
 456:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 }
 457:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 458:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 459:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               USBH_UsrLog("Sense Key  : %x", MSC_Handle->unit[MSC_Handle->current_lun].sense.key);
 460:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               USBH_UsrLog("Additional Sense Code : %x", MSC_Handle->unit[MSC_Handle->current_lun].s
 461:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               USBH_UsrLog("Additional Sense Code Qualifier: %x", MSC_Handle->unit[MSC_Handle->curre
 462:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 463:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->current_lun++;
 464:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 465:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             if (scsi_status == USBH_FAIL)
 466:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 467:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               USBH_UsrLog("MSC Device NOT ready");
 468:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_UNRECOVERED_ERROR;
 469:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 470:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             else
 471:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 472:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               if (scsi_status == USBH_UNRECOVERED_ERROR)
 473:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 474:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].state = MSC_IDLE;
 475:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 476:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 477:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 478:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 479:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 480:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           case MSC_UNRECOVERED_ERROR:
 481:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->current_lun++;
 482:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 483:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 484:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           default:
 485:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 486:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 487:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 488:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 489:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         phost->os_msg = (uint32_t)USBH_CLASS_EVENT;
 490:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (osCMSIS < 0x20000U)
 491:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 492:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #else
 493:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 494:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 495:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 496:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 497:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       else
 498:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 499:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->current_lun = 0U;
 500:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->state = MSC_IDLE;
 501:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 502:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 503:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         phost->os_msg = (uint32_t)USBH_CLASS_EVENT;
 504:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (osCMSIS < 0x20000U)
 505:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 506:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #else
 507:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 508:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 509:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 510:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         phost->pUser(phost, HOST_USER_CLASS_ACTIVE);
 511:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
ARM GAS  /tmp/cc5Cbh8K.s 			page 22


 512:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 513:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 514:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_IDLE:
 515:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       error = USBH_OK;
 516:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 517:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 518:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     default:
 519:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 691              		.loc 1 519 7
 692 002c 8EE2     		b	.L65
 693              	.L33:
 332:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 694              		.loc 1 332 21
 695 002e 3B69     		ldr	r3, [r7, #16]
 696 0030 B3F8F820 		ldrh	r2, [r3, #248]
 332:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 697              		.loc 1 332 47
 698 0034 3B69     		ldr	r3, [r7, #16]
 699 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 332:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 700              		.loc 1 332 35
 701 0038 9BB2     		uxth	r3, r3
 332:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 702              		.loc 1 332 10
 703 003a 9A42     		cmp	r2, r3
 704 003c 80F06782 		bcs	.L36
 335:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         /* Switch MSC REQ state machine */
 705              		.loc 1 335 36
 706 0040 3B69     		ldr	r3, [r7, #16]
 707 0042 B3F8F830 		ldrh	r3, [r3, #248]
 708 0046 1946     		mov	r1, r3
 335:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         /* Switch MSC REQ state machine */
 709              		.loc 1 335 57
 710 0048 3A69     		ldr	r2, [r7, #16]
 711 004a 3423     		movs	r3, #52
 712 004c 03FB01F3 		mul	r3, r3, r1
 713 0050 1344     		add	r3, r3, r2
 714 0052 9133     		adds	r3, r3, #145
 715 0054 0122     		movs	r2, #1
 716 0056 1A70     		strb	r2, [r3]
 337:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 717              		.loc 1 337 44
 718 0058 3B69     		ldr	r3, [r7, #16]
 719 005a B3F8F830 		ldrh	r3, [r3, #248]
 720 005e 1946     		mov	r1, r3
 337:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 721              		.loc 1 337 58
 722 0060 3A69     		ldr	r2, [r7, #16]
 723 0062 3423     		movs	r3, #52
 724 0064 03FB01F3 		mul	r3, r3, r1
 725 0068 1344     		add	r3, r3, r2
 726 006a 9033     		adds	r3, r3, #144
 727 006c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 728 006e 082B     		cmp	r3, #8
 729 0070 00F23582 		bhi	.L67
 730 0074 01A2     		adr	r2, .L39
 731 0076 52F823F0 		ldr	pc, [r2, r3, lsl #2]
ARM GAS  /tmp/cc5Cbh8K.s 			page 23


 732 007a 00BF     		.p2align 2
 733              	.L39:
 734 007c A1000000 		.word	.L44+1
 735 0080 DF040000 		.word	.L67+1
 736 0084 69010000 		.word	.L43+1
 737 0088 ED020000 		.word	.L42+1
 738 008c C7000000 		.word	.L41+1
 739 0090 B9030000 		.word	.L40+1
 740 0094 DF040000 		.word	.L67+1
 741 0098 DF040000 		.word	.L67+1
 742 009c CD040000 		.word	.L38+1
 743              		.p2align 1
 744              	.L44:
 341:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->timer = phost->Timer;
 745              		.loc 1 341 40
 746 00a0 3B69     		ldr	r3, [r7, #16]
 747 00a2 B3F8F830 		ldrh	r3, [r3, #248]
 748 00a6 1946     		mov	r1, r3
 341:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             MSC_Handle->timer = phost->Timer;
 749              		.loc 1 341 61
 750 00a8 3A69     		ldr	r2, [r7, #16]
 751 00aa 3423     		movs	r3, #52
 752 00ac 03FB01F3 		mul	r3, r3, r1
 753 00b0 1344     		add	r3, r3, r2
 754 00b2 9033     		adds	r3, r3, #144
 755 00b4 0422     		movs	r2, #4
 756 00b6 1A70     		strb	r2, [r3]
 342:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 757              		.loc 1 342 38
 758 00b8 7B68     		ldr	r3, [r7, #4]
 759 00ba D3F8C424 		ldr	r2, [r3, #1220]
 342:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 760              		.loc 1 342 31
 761 00be 3B69     		ldr	r3, [r7, #16]
 762 00c0 C3F8FC20 		str	r2, [r3, #252]
 343:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 763              		.loc 1 343 13
 764 00c4 14E2     		b	.L45
 765              	.L41:
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 766              		.loc 1 346 75
 767 00c6 3B69     		ldr	r3, [r7, #16]
 768 00c8 B3F8F830 		ldrh	r3, [r3, #248]
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 769              		.loc 1 346 27
 770 00cc D9B2     		uxtb	r1, r3
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 771              		.loc 1 346 118
 772 00ce 3B69     		ldr	r3, [r7, #16]
 773 00d0 B3F8F830 		ldrh	r3, [r3, #248]
 774 00d4 1A46     		mov	r2, r3
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 775              		.loc 1 346 27
 776 00d6 3423     		movs	r3, #52
 777 00d8 03FB02F3 		mul	r3, r3, r2
 778 00dc 9833     		adds	r3, r3, #152
 779 00de 3A69     		ldr	r2, [r7, #16]
ARM GAS  /tmp/cc5Cbh8K.s 			page 24


 780 00e0 1344     		add	r3, r3, r2
 781 00e2 0733     		adds	r3, r3, #7
 782 00e4 1A46     		mov	r2, r3
 783 00e6 7868     		ldr	r0, [r7, #4]
 784 00e8 FFF7FEFF 		bl	USBH_MSC_SCSI_Inquiry
 785 00ec 0346     		mov	r3, r0
 786 00ee FB73     		strb	r3, [r7, #15]
 348:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 787              		.loc 1 348 16
 788 00f0 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 789 00f2 002B     		cmp	r3, #0
 790 00f4 0BD1     		bne	.L46
 353:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 791              		.loc 1 353 42
 792 00f6 3B69     		ldr	r3, [r7, #16]
 793 00f8 B3F8F830 		ldrh	r3, [r3, #248]
 794 00fc 1946     		mov	r1, r3
 353:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 795              		.loc 1 353 63
 796 00fe 3A69     		ldr	r2, [r7, #16]
 797 0100 3423     		movs	r3, #52
 798 0102 03FB01F3 		mul	r3, r3, r1
 799 0106 1344     		add	r3, r3, r2
 800 0108 9033     		adds	r3, r3, #144
 801 010a 0222     		movs	r2, #2
 802 010c 1A70     		strb	r2, [r3]
 803              	.L46:
 355:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 804              		.loc 1 355 16
 805 010e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 806 0110 022B     		cmp	r3, #2
 807 0112 0CD1     		bne	.L47
 357:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 808              		.loc 1 357 42
 809 0114 3B69     		ldr	r3, [r7, #16]
 810 0116 B3F8F830 		ldrh	r3, [r3, #248]
 811 011a 1946     		mov	r1, r3
 357:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 812              		.loc 1 357 63
 813 011c 3A69     		ldr	r2, [r7, #16]
 814 011e 3423     		movs	r3, #52
 815 0120 03FB01F3 		mul	r3, r3, r1
 816 0124 1344     		add	r3, r3, r2
 817 0126 9033     		adds	r3, r3, #144
 818 0128 0522     		movs	r2, #5
 819 012a 1A70     		strb	r2, [r3]
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 820              		.loc 1 367 13
 821 012c D9E1     		b	.L68
 822              	.L47:
 361:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 823              		.loc 1 361 18
 824 012e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 825 0130 042B     		cmp	r3, #4
 826 0132 40F0D681 		bne	.L68
 363:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 827              		.loc 1 363 44
ARM GAS  /tmp/cc5Cbh8K.s 			page 25


 828 0136 3B69     		ldr	r3, [r7, #16]
 829 0138 B3F8F830 		ldrh	r3, [r3, #248]
 830 013c 1946     		mov	r1, r3
 363:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 831              		.loc 1 363 65
 832 013e 3A69     		ldr	r2, [r7, #16]
 833 0140 3423     		movs	r3, #52
 834 0142 03FB01F3 		mul	r3, r3, r1
 835 0146 1344     		add	r3, r3, r2
 836 0148 9033     		adds	r3, r3, #144
 837 014a 0122     		movs	r2, #1
 838 014c 1A70     		strb	r2, [r3]
 364:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 839              		.loc 1 364 44
 840 014e 3B69     		ldr	r3, [r7, #16]
 841 0150 B3F8F830 		ldrh	r3, [r3, #248]
 842 0154 1946     		mov	r1, r3
 364:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 843              		.loc 1 364 65
 844 0156 3A69     		ldr	r2, [r7, #16]
 845 0158 3423     		movs	r3, #52
 846 015a 03FB01F3 		mul	r3, r3, r1
 847 015e 1344     		add	r3, r3, r2
 848 0160 9133     		adds	r3, r3, #145
 849 0162 0222     		movs	r2, #2
 850 0164 1A70     		strb	r2, [r3]
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 851              		.loc 1 367 13
 852 0166 BCE1     		b	.L68
 853              	.L43:
 370:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 854              		.loc 1 370 82
 855 0168 3B69     		ldr	r3, [r7, #16]
 856 016a B3F8F830 		ldrh	r3, [r3, #248]
 370:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 857              		.loc 1 370 28
 858 016e DBB2     		uxtb	r3, r3
 859 0170 1946     		mov	r1, r3
 860 0172 7868     		ldr	r0, [r7, #4]
 861 0174 FFF7FEFF 		bl	USBH_MSC_SCSI_TestUnitReady
 862 0178 0346     		mov	r3, r0
 863 017a BB73     		strb	r3, [r7, #14]
 372:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 864              		.loc 1 372 16
 865 017c BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 866 017e 002B     		cmp	r3, #0
 867 0180 49D1     		bne	.L49
 374:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 868              		.loc 1 374 46
 869 0182 3B69     		ldr	r3, [r7, #16]
 870 0184 B3F8F830 		ldrh	r3, [r3, #248]
 871 0188 1946     		mov	r1, r3
 374:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 872              		.loc 1 374 60
 873 018a 3A69     		ldr	r2, [r7, #16]
 874 018c 3423     		movs	r3, #52
 875 018e 03FB01F3 		mul	r3, r3, r1
ARM GAS  /tmp/cc5Cbh8K.s 			page 26


 876 0192 1344     		add	r3, r3, r2
 877 0194 9233     		adds	r3, r3, #146
 878 0196 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 374:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 879              		.loc 1 374 18
 880 0198 002B     		cmp	r3, #0
 881 019a 0CD0     		beq	.L50
 376:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("MSC Device ready");
 882              		.loc 1 376 44
 883 019c 3B69     		ldr	r3, [r7, #16]
 884 019e B3F8F830 		ldrh	r3, [r3, #248]
 885 01a2 1946     		mov	r1, r3
 376:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("MSC Device ready");
 886              		.loc 1 376 73
 887 01a4 3A69     		ldr	r2, [r7, #16]
 888 01a6 3423     		movs	r3, #52
 889 01a8 03FB01F3 		mul	r3, r3, r1
 890 01ac 1344     		add	r3, r3, r2
 891 01ae C133     		adds	r3, r3, #193
 892 01b0 0122     		movs	r2, #1
 893 01b2 1A70     		strb	r2, [r3]
 894 01b4 0BE0     		b	.L51
 895              	.L50:
 381:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 896              		.loc 1 381 44
 897 01b6 3B69     		ldr	r3, [r7, #16]
 898 01b8 B3F8F830 		ldrh	r3, [r3, #248]
 899 01bc 1946     		mov	r1, r3
 381:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 900              		.loc 1 381 73
 901 01be 3A69     		ldr	r2, [r7, #16]
 902 01c0 3423     		movs	r3, #52
 903 01c2 03FB01F3 		mul	r3, r3, r1
 904 01c6 1344     		add	r3, r3, r2
 905 01c8 C133     		adds	r3, r3, #193
 906 01ca 0022     		movs	r2, #0
 907 01cc 1A70     		strb	r2, [r3]
 908              	.L51:
 383:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 909              		.loc 1 383 42
 910 01ce 3B69     		ldr	r3, [r7, #16]
 911 01d0 B3F8F830 		ldrh	r3, [r3, #248]
 912 01d4 1946     		mov	r1, r3
 383:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 913              		.loc 1 383 63
 914 01d6 3A69     		ldr	r2, [r7, #16]
 915 01d8 3423     		movs	r3, #52
 916 01da 03FB01F3 		mul	r3, r3, r1
 917 01de 1344     		add	r3, r3, r2
 918 01e0 9033     		adds	r3, r3, #144
 919 01e2 0322     		movs	r2, #3
 920 01e4 1A70     		strb	r2, [r3]
 384:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_OK;
 921              		.loc 1 384 42
 922 01e6 3B69     		ldr	r3, [r7, #16]
 923 01e8 B3F8F830 		ldrh	r3, [r3, #248]
 924 01ec 1946     		mov	r1, r3
ARM GAS  /tmp/cc5Cbh8K.s 			page 27


 384:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_OK;
 925              		.loc 1 384 63
 926 01ee 3A69     		ldr	r2, [r7, #16]
 927 01f0 3423     		movs	r3, #52
 928 01f2 03FB01F3 		mul	r3, r3, r1
 929 01f6 1344     		add	r3, r3, r2
 930 01f8 9133     		adds	r3, r3, #145
 931 01fa 0022     		movs	r2, #0
 932 01fc 1A70     		strb	r2, [r3]
 385:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 933              		.loc 1 385 42
 934 01fe 3B69     		ldr	r3, [r7, #16]
 935 0200 B3F8F830 		ldrh	r3, [r3, #248]
 936 0204 1946     		mov	r1, r3
 385:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 937              		.loc 1 385 74
 938 0206 3A69     		ldr	r2, [r7, #16]
 939 0208 3423     		movs	r3, #52
 940 020a 03FB01F3 		mul	r3, r3, r1
 941 020e 1344     		add	r3, r3, r2
 942 0210 9233     		adds	r3, r3, #146
 943 0212 0022     		movs	r2, #0
 944 0214 1A70     		strb	r2, [r3]
 945              	.L49:
 387:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 946              		.loc 1 387 16
 947 0216 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 948 0218 022B     		cmp	r3, #2
 949 021a 4AD1     		bne	.L52
 390:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 950              		.loc 1 390 46
 951 021c 3B69     		ldr	r3, [r7, #16]
 952 021e B3F8F830 		ldrh	r3, [r3, #248]
 953 0222 1946     		mov	r1, r3
 390:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 954              		.loc 1 390 60
 955 0224 3A69     		ldr	r2, [r7, #16]
 956 0226 3423     		movs	r3, #52
 957 0228 03FB01F3 		mul	r3, r3, r1
 958 022c 1344     		add	r3, r3, r2
 959 022e 9233     		adds	r3, r3, #146
 960 0230 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 390:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 961              		.loc 1 390 18
 962 0232 022B     		cmp	r3, #2
 963 0234 0CD0     		beq	.L53
 392:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("MSC Device NOT ready");
 964              		.loc 1 392 44
 965 0236 3B69     		ldr	r3, [r7, #16]
 966 0238 B3F8F830 		ldrh	r3, [r3, #248]
 967 023c 1946     		mov	r1, r3
 392:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 USBH_UsrLog("MSC Device NOT ready");
 968              		.loc 1 392 73
 969 023e 3A69     		ldr	r2, [r7, #16]
 970 0240 3423     		movs	r3, #52
 971 0242 03FB01F3 		mul	r3, r3, r1
 972 0246 1344     		add	r3, r3, r2
ARM GAS  /tmp/cc5Cbh8K.s 			page 28


 973 0248 C133     		adds	r3, r3, #193
 974 024a 0122     		movs	r2, #1
 975 024c 1A70     		strb	r2, [r3]
 976 024e 0BE0     		b	.L54
 977              	.L53:
 397:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 978              		.loc 1 397 44
 979 0250 3B69     		ldr	r3, [r7, #16]
 980 0252 B3F8F830 		ldrh	r3, [r3, #248]
 981 0256 1946     		mov	r1, r3
 397:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 982              		.loc 1 397 73
 983 0258 3A69     		ldr	r2, [r7, #16]
 984 025a 3423     		movs	r3, #52
 985 025c 03FB01F3 		mul	r3, r3, r1
 986 0260 1344     		add	r3, r3, r2
 987 0262 C133     		adds	r3, r3, #193
 988 0264 0022     		movs	r2, #0
 989 0266 1A70     		strb	r2, [r3]
 990              	.L54:
 399:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 991              		.loc 1 399 42
 992 0268 3B69     		ldr	r3, [r7, #16]
 993 026a B3F8F830 		ldrh	r3, [r3, #248]
 994 026e 1946     		mov	r1, r3
 399:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_NOT_READY;
 995              		.loc 1 399 63
 996 0270 3A69     		ldr	r2, [r7, #16]
 997 0272 3423     		movs	r3, #52
 998 0274 03FB01F3 		mul	r3, r3, r1
 999 0278 1344     		add	r3, r3, r2
 1000 027a 9033     		adds	r3, r3, #144
 1001 027c 0522     		movs	r2, #5
 1002 027e 1A70     		strb	r2, [r3]
 400:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_FAIL;
 1003              		.loc 1 400 42
 1004 0280 3B69     		ldr	r3, [r7, #16]
 1005 0282 B3F8F830 		ldrh	r3, [r3, #248]
 1006 0286 1946     		mov	r1, r3
 400:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].prev_ready_state = USBH_FAIL;
 1007              		.loc 1 400 63
 1008 0288 3A69     		ldr	r2, [r7, #16]
 1009 028a 3423     		movs	r3, #52
 1010 028c 03FB01F3 		mul	r3, r3, r1
 1011 0290 1344     		add	r3, r3, r2
 1012 0292 9133     		adds	r3, r3, #145
 1013 0294 0122     		movs	r2, #1
 1014 0296 1A70     		strb	r2, [r3]
 401:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1015              		.loc 1 401 42
 1016 0298 3B69     		ldr	r3, [r7, #16]
 1017 029a B3F8F830 		ldrh	r3, [r3, #248]
 1018 029e 1946     		mov	r1, r3
 401:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1019              		.loc 1 401 74
 1020 02a0 3A69     		ldr	r2, [r7, #16]
 1021 02a2 3423     		movs	r3, #52
ARM GAS  /tmp/cc5Cbh8K.s 			page 29


 1022 02a4 03FB01F3 		mul	r3, r3, r1
 1023 02a8 1344     		add	r3, r3, r2
 1024 02aa 9233     		adds	r3, r3, #146
 1025 02ac 0222     		movs	r2, #2
 1026 02ae 1A70     		strb	r2, [r3]
 411:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1027              		.loc 1 411 13
 1028 02b0 19E1     		b	.L69
 1029              	.L52:
 405:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 1030              		.loc 1 405 18
 1031 02b2 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 1032 02b4 042B     		cmp	r3, #4
 1033 02b6 40F01681 		bne	.L69
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 1034              		.loc 1 407 44
 1035 02ba 3B69     		ldr	r3, [r7, #16]
 1036 02bc B3F8F830 		ldrh	r3, [r3, #248]
 1037 02c0 1946     		mov	r1, r3
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 1038              		.loc 1 407 65
 1039 02c2 3A69     		ldr	r2, [r7, #16]
 1040 02c4 3423     		movs	r3, #52
 1041 02c6 03FB01F3 		mul	r3, r3, r1
 1042 02ca 1344     		add	r3, r3, r2
 1043 02cc 9033     		adds	r3, r3, #144
 1044 02ce 0122     		movs	r2, #1
 1045 02d0 1A70     		strb	r2, [r3]
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 1046              		.loc 1 408 44
 1047 02d2 3B69     		ldr	r3, [r7, #16]
 1048 02d4 B3F8F830 		ldrh	r3, [r3, #248]
 1049 02d8 1946     		mov	r1, r3
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 1050              		.loc 1 408 65
 1051 02da 3A69     		ldr	r2, [r7, #16]
 1052 02dc 3423     		movs	r3, #52
 1053 02de 03FB01F3 		mul	r3, r3, r1
 1054 02e2 1344     		add	r3, r3, r2
 1055 02e4 9133     		adds	r3, r3, #145
 1056 02e6 0222     		movs	r2, #2
 1057 02e8 1A70     		strb	r2, [r3]
 411:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1058              		.loc 1 411 13
 1059 02ea FCE0     		b	.L69
 1060              	.L42:
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1061              		.loc 1 414 80
 1062 02ec 3B69     		ldr	r3, [r7, #16]
 1063 02ee B3F8F830 		ldrh	r3, [r3, #248]
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1064              		.loc 1 414 27
 1065 02f2 D9B2     		uxtb	r1, r3
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1066              		.loc 1 414 123
 1067 02f4 3B69     		ldr	r3, [r7, #16]
 1068 02f6 B3F8F830 		ldrh	r3, [r3, #248]
ARM GAS  /tmp/cc5Cbh8K.s 			page 30


 1069 02fa 1A46     		mov	r2, r3
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1070              		.loc 1 414 27
 1071 02fc 3423     		movs	r3, #52
 1072 02fe 03FB02F3 		mul	r3, r3, r2
 1073 0302 9033     		adds	r3, r3, #144
 1074 0304 3A69     		ldr	r2, [r7, #16]
 1075 0306 1344     		add	r3, r3, r2
 1076 0308 0433     		adds	r3, r3, #4
 1077 030a 1A46     		mov	r2, r3
 1078 030c 7868     		ldr	r0, [r7, #4]
 1079 030e FFF7FEFF 		bl	USBH_MSC_SCSI_ReadCapacity
 1080 0312 0346     		mov	r3, r0
 1081 0314 FB73     		strb	r3, [r7, #15]
 416:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 1082              		.loc 1 416 16
 1083 0316 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1084 0318 002B     		cmp	r3, #0
 1085 031a 20D1     		bne	.L56
 425:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 1086              		.loc 1 425 42
 1087 031c 3B69     		ldr	r3, [r7, #16]
 1088 031e B3F8F830 		ldrh	r3, [r3, #248]
 1089 0322 1946     		mov	r1, r3
 425:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_OK;
 1090              		.loc 1 425 63
 1091 0324 3A69     		ldr	r2, [r7, #16]
 1092 0326 3423     		movs	r3, #52
 1093 0328 03FB01F3 		mul	r3, r3, r1
 1094 032c 1344     		add	r3, r3, r2
 1095 032e 9033     		adds	r3, r3, #144
 1096 0330 0122     		movs	r2, #1
 1097 0332 1A70     		strb	r2, [r3]
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->current_lun++;
 1098              		.loc 1 426 42
 1099 0334 3B69     		ldr	r3, [r7, #16]
 1100 0336 B3F8F830 		ldrh	r3, [r3, #248]
 1101 033a 1946     		mov	r1, r3
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->current_lun++;
 1102              		.loc 1 426 63
 1103 033c 3A69     		ldr	r2, [r7, #16]
 1104 033e 3423     		movs	r3, #52
 1105 0340 03FB01F3 		mul	r3, r3, r1
 1106 0344 1344     		add	r3, r3, r2
 1107 0346 9133     		adds	r3, r3, #145
 1108 0348 0022     		movs	r2, #0
 1109 034a 1A70     		strb	r2, [r3]
 427:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1110              		.loc 1 427 25
 1111 034c 3B69     		ldr	r3, [r7, #16]
 1112 034e B3F8F830 		ldrh	r3, [r3, #248]
 427:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1113              		.loc 1 427 38
 1114 0352 0133     		adds	r3, r3, #1
 1115 0354 9AB2     		uxth	r2, r3
 1116 0356 3B69     		ldr	r3, [r7, #16]
 1117 0358 A3F8F820 		strh	r2, [r3, #248]	@ movhi
ARM GAS  /tmp/cc5Cbh8K.s 			page 31


 441:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1118              		.loc 1 441 13
 1119 035c C5E0     		b	.L70
 1120              	.L56:
 429:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 1121              		.loc 1 429 21
 1122 035e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1123 0360 022B     		cmp	r3, #2
 1124 0362 0CD1     		bne	.L58
 431:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1125              		.loc 1 431 42
 1126 0364 3B69     		ldr	r3, [r7, #16]
 1127 0366 B3F8F830 		ldrh	r3, [r3, #248]
 1128 036a 1946     		mov	r1, r3
 431:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1129              		.loc 1 431 63
 1130 036c 3A69     		ldr	r2, [r7, #16]
 1131 036e 3423     		movs	r3, #52
 1132 0370 03FB01F3 		mul	r3, r3, r1
 1133 0374 1344     		add	r3, r3, r2
 1134 0376 9033     		adds	r3, r3, #144
 1135 0378 0522     		movs	r2, #5
 1136 037a 1A70     		strb	r2, [r3]
 441:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1137              		.loc 1 441 13
 1138 037c B5E0     		b	.L70
 1139              	.L58:
 435:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 1140              		.loc 1 435 18
 1141 037e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1142 0380 042B     		cmp	r3, #4
 1143 0382 40F0B280 		bne	.L70
 437:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 1144              		.loc 1 437 44
 1145 0386 3B69     		ldr	r3, [r7, #16]
 1146 0388 B3F8F830 		ldrh	r3, [r3, #248]
 1147 038c 1946     		mov	r1, r3
 437:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 1148              		.loc 1 437 65
 1149 038e 3A69     		ldr	r2, [r7, #16]
 1150 0390 3423     		movs	r3, #52
 1151 0392 03FB01F3 		mul	r3, r3, r1
 1152 0396 1344     		add	r3, r3, r2
 1153 0398 9033     		adds	r3, r3, #144
 1154 039a 0122     		movs	r2, #1
 1155 039c 1A70     		strb	r2, [r3]
 438:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 1156              		.loc 1 438 44
 1157 039e 3B69     		ldr	r3, [r7, #16]
 1158 03a0 B3F8F830 		ldrh	r3, [r3, #248]
 1159 03a4 1946     		mov	r1, r3
 438:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 1160              		.loc 1 438 65
 1161 03a6 3A69     		ldr	r2, [r7, #16]
 1162 03a8 3423     		movs	r3, #52
 1163 03aa 03FB01F3 		mul	r3, r3, r1
 1164 03ae 1344     		add	r3, r3, r2
ARM GAS  /tmp/cc5Cbh8K.s 			page 32


 1165 03b0 9133     		adds	r3, r3, #145
 1166 03b2 0222     		movs	r2, #2
 1167 03b4 1A70     		strb	r2, [r3]
 441:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1168              		.loc 1 441 13
 1169 03b6 98E0     		b	.L70
 1170              	.L40:
 444:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1171              		.loc 1 444 80
 1172 03b8 3B69     		ldr	r3, [r7, #16]
 1173 03ba B3F8F830 		ldrh	r3, [r3, #248]
 444:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1174              		.loc 1 444 27
 1175 03be D9B2     		uxtb	r1, r3
 444:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1176              		.loc 1 444 123
 1177 03c0 3B69     		ldr	r3, [r7, #16]
 1178 03c2 B3F8F830 		ldrh	r3, [r3, #248]
 1179 03c6 1A46     		mov	r2, r3
 444:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1180              		.loc 1 444 27
 1181 03c8 3423     		movs	r3, #52
 1182 03ca 03FB02F3 		mul	r3, r3, r2
 1183 03ce 9833     		adds	r3, r3, #152
 1184 03d0 3A69     		ldr	r2, [r7, #16]
 1185 03d2 1344     		add	r3, r3, r2
 1186 03d4 0433     		adds	r3, r3, #4
 1187 03d6 1A46     		mov	r2, r3
 1188 03d8 7868     		ldr	r0, [r7, #4]
 1189 03da FFF7FEFF 		bl	USBH_MSC_SCSI_RequestSense
 1190 03de 0346     		mov	r3, r0
 1191 03e0 FB73     		strb	r3, [r7, #15]
 446:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 1192              		.loc 1 446 16
 1193 03e2 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1194 03e4 002B     		cmp	r3, #0
 1195 03e6 45D1     		bne	.L59
 448:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY)
 1196              		.loc 1 448 47
 1197 03e8 3B69     		ldr	r3, [r7, #16]
 1198 03ea B3F8F830 		ldrh	r3, [r3, #248]
 1199 03ee 1946     		mov	r1, r3
 448:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY)
 1200              		.loc 1 448 67
 1201 03f0 3A69     		ldr	r2, [r7, #16]
 1202 03f2 3423     		movs	r3, #52
 1203 03f4 03FB01F3 		mul	r3, r3, r1
 1204 03f8 1344     		add	r3, r3, r2
 1205 03fa 9C33     		adds	r3, r3, #156
 1206 03fc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 448:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY)
 1207              		.loc 1 448 18
 1208 03fe 062B     		cmp	r3, #6
 1209 0400 0CD0     		beq	.L60
 449:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 1210              		.loc 1 449 47 discriminator 1
 1211 0402 3B69     		ldr	r3, [r7, #16]
ARM GAS  /tmp/cc5Cbh8K.s 			page 33


 1212 0404 B3F8F830 		ldrh	r3, [r3, #248]
 1213 0408 1946     		mov	r1, r3
 449:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 1214              		.loc 1 449 67 discriminator 1
 1215 040a 3A69     		ldr	r2, [r7, #16]
 1216 040c 3423     		movs	r3, #52
 1217 040e 03FB01F3 		mul	r3, r3, r1
 1218 0412 1344     		add	r3, r3, r2
 1219 0414 9C33     		adds	r3, r3, #156
 1220 0416 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 448:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   (MSC_Handle->unit[MSC_Handle->current_lun].sense.key == SCSI_SENSE_KEY_NOT_READY)
 1221              		.loc 1 448 106 discriminator 1
 1222 0418 022B     		cmp	r3, #2
 1223 041a 17D1     		bne	.L61
 1224              	.L60:
 452:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 {
 1225              		.loc 1 452 27
 1226 041c 7B68     		ldr	r3, [r7, #4]
 1227 041e D3F8C424 		ldr	r2, [r3, #1220]
 452:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 {
 1228              		.loc 1 452 47
 1229 0422 3B69     		ldr	r3, [r7, #16]
 1230 0424 D3F8FC30 		ldr	r3, [r3, #252]
 452:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 {
 1231              		.loc 1 452 35
 1232 0428 D31A     		subs	r3, r2, r3
 452:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 {
 1233              		.loc 1 452 20
 1234 042a 42F20F72 		movw	r2, #9999
 1235 042e 9342     		cmp	r3, r2
 1236 0430 0CD8     		bhi	.L61
 454:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   break;
 1237              		.loc 1 454 46
 1238 0432 3B69     		ldr	r3, [r7, #16]
 1239 0434 B3F8F830 		ldrh	r3, [r3, #248]
 1240 0438 1946     		mov	r1, r3
 454:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                   break;
 1241              		.loc 1 454 67
 1242 043a 3A69     		ldr	r2, [r7, #16]
 1243 043c 3423     		movs	r3, #52
 1244 043e 03FB01F3 		mul	r3, r3, r1
 1245 0442 1344     		add	r3, r3, r2
 1246 0444 9033     		adds	r3, r3, #144
 1247 0446 0222     		movs	r2, #2
 1248 0448 1A70     		strb	r2, [r3]
 455:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 }
 1249              		.loc 1 455 19
 1250 044a 51E0     		b	.L45
 1251              	.L61:
 462:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->current_lun++;
 1252              		.loc 1 462 42
 1253 044c 3B69     		ldr	r3, [r7, #16]
 1254 044e B3F8F830 		ldrh	r3, [r3, #248]
 1255 0452 1946     		mov	r1, r3
 462:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               MSC_Handle->current_lun++;
 1256              		.loc 1 462 63
 1257 0454 3A69     		ldr	r2, [r7, #16]
ARM GAS  /tmp/cc5Cbh8K.s 			page 34


 1258 0456 3423     		movs	r3, #52
 1259 0458 03FB01F3 		mul	r3, r3, r1
 1260 045c 1344     		add	r3, r3, r2
 1261 045e 9033     		adds	r3, r3, #144
 1262 0460 0122     		movs	r2, #1
 1263 0462 1A70     		strb	r2, [r3]
 463:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1264              		.loc 1 463 25
 1265 0464 3B69     		ldr	r3, [r7, #16]
 1266 0466 B3F8F830 		ldrh	r3, [r3, #248]
 463:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1267              		.loc 1 463 38
 1268 046a 0133     		adds	r3, r3, #1
 1269 046c 9AB2     		uxth	r2, r3
 1270 046e 3B69     		ldr	r3, [r7, #16]
 1271 0470 A3F8F820 		strh	r2, [r3, #248]	@ movhi
 1272              	.L59:
 465:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             {
 1273              		.loc 1 465 16
 1274 0474 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1275 0476 022B     		cmp	r3, #2
 1276 0478 0CD1     		bne	.L62
 468:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1277              		.loc 1 468 42
 1278 047a 3B69     		ldr	r3, [r7, #16]
 1279 047c B3F8F830 		ldrh	r3, [r3, #248]
 1280 0480 1946     		mov	r1, r3
 468:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             }
 1281              		.loc 1 468 63
 1282 0482 3A69     		ldr	r2, [r7, #16]
 1283 0484 3423     		movs	r3, #52
 1284 0486 03FB01F3 		mul	r3, r3, r1
 1285 048a 1344     		add	r3, r3, r2
 1286 048c 9033     		adds	r3, r3, #144
 1287 048e 0822     		movs	r2, #8
 1288 0490 1A70     		strb	r2, [r3]
 478:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1289              		.loc 1 478 13
 1290 0492 2CE0     		b	.L71
 1291              	.L62:
 472:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               {
 1292              		.loc 1 472 18
 1293 0494 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1294 0496 042B     		cmp	r3, #4
 1295 0498 29D1     		bne	.L71
 474:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 1296              		.loc 1 474 44
 1297 049a 3B69     		ldr	r3, [r7, #16]
 1298 049c B3F8F830 		ldrh	r3, [r3, #248]
 1299 04a0 1946     		mov	r1, r3
 474:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                 MSC_Handle->unit[MSC_Handle->current_lun].error = MSC_ERROR;
 1300              		.loc 1 474 65
 1301 04a2 3A69     		ldr	r2, [r7, #16]
 1302 04a4 3423     		movs	r3, #52
 1303 04a6 03FB01F3 		mul	r3, r3, r1
 1304 04aa 1344     		add	r3, r3, r2
 1305 04ac 9033     		adds	r3, r3, #144
ARM GAS  /tmp/cc5Cbh8K.s 			page 35


 1306 04ae 0122     		movs	r2, #1
 1307 04b0 1A70     		strb	r2, [r3]
 475:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 1308              		.loc 1 475 44
 1309 04b2 3B69     		ldr	r3, [r7, #16]
 1310 04b4 B3F8F830 		ldrh	r3, [r3, #248]
 1311 04b8 1946     		mov	r1, r3
 475:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****               }
 1312              		.loc 1 475 65
 1313 04ba 3A69     		ldr	r2, [r7, #16]
 1314 04bc 3423     		movs	r3, #52
 1315 04be 03FB01F3 		mul	r3, r3, r1
 1316 04c2 1344     		add	r3, r3, r2
 1317 04c4 9133     		adds	r3, r3, #145
 1318 04c6 0222     		movs	r2, #2
 1319 04c8 1A70     		strb	r2, [r3]
 478:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1320              		.loc 1 478 13
 1321 04ca 10E0     		b	.L71
 1322              	.L38:
 481:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 1323              		.loc 1 481 23
 1324 04cc 3B69     		ldr	r3, [r7, #16]
 1325 04ce B3F8F830 		ldrh	r3, [r3, #248]
 481:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****             break;
 1326              		.loc 1 481 36
 1327 04d2 0133     		adds	r3, r3, #1
 1328 04d4 9AB2     		uxth	r2, r3
 1329 04d6 3B69     		ldr	r3, [r7, #16]
 1330 04d8 A3F8F820 		strh	r2, [r3, #248]	@ movhi
 482:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1331              		.loc 1 482 13
 1332 04dc 08E0     		b	.L45
 1333              	.L67:
 485:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 1334              		.loc 1 485 13
 1335 04de 00BF     		nop
 1336 04e0 06E0     		b	.L45
 1337              	.L68:
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1338              		.loc 1 367 13
 1339 04e2 00BF     		nop
 1340 04e4 04E0     		b	.L45
 1341              	.L69:
 411:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1342              		.loc 1 411 13
 1343 04e6 00BF     		nop
 1344 04e8 02E0     		b	.L45
 1345              	.L70:
 441:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1346              		.loc 1 441 13
 1347 04ea 00BF     		nop
 1348 04ec 00E0     		b	.L45
 1349              	.L71:
 478:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1350              		.loc 1 478 13
 1351 04ee 00BF     		nop
ARM GAS  /tmp/cc5Cbh8K.s 			page 36


 1352              	.L45:
 489:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (osCMSIS < 0x20000U)
 1353              		.loc 1 489 23
 1354 04f0 7B68     		ldr	r3, [r7, #4]
 1355 04f2 0422     		movs	r2, #4
 1356 04f4 C3F8E024 		str	r2, [r3, #1248]
 493:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1357              		.loc 1 493 15
 1358 04f8 7B68     		ldr	r3, [r7, #4]
 1359 04fa D3F8D804 		ldr	r0, [r3, #1240]
 493:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1360              		.loc 1 493 50
 1361 04fe 7B68     		ldr	r3, [r7, #4]
 1362 0500 03F59C61 		add	r1, r3, #1248
 493:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1363              		.loc 1 493 15
 1364 0504 0023     		movs	r3, #0
 1365 0506 0022     		movs	r2, #0
 1366 0508 FFF7FEFF 		bl	osMessageQueuePut
 512:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1367              		.loc 1 512 7
 1368 050c 1EE0     		b	.L65
 1369              	.L36:
 499:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->state = MSC_IDLE;
 1370              		.loc 1 499 33
 1371 050e 3B69     		ldr	r3, [r7, #16]
 1372 0510 0022     		movs	r2, #0
 1373 0512 A3F8F820 		strh	r2, [r3, #248]	@ movhi
 500:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1374              		.loc 1 500 27
 1375 0516 3B69     		ldr	r3, [r7, #16]
 1376 0518 0122     		movs	r2, #1
 1377 051a 1A73     		strb	r2, [r3, #12]
 503:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (osCMSIS < 0x20000U)
 1378              		.loc 1 503 23
 1379 051c 7B68     		ldr	r3, [r7, #4]
 1380 051e 0422     		movs	r2, #4
 1381 0520 C3F8E024 		str	r2, [r3, #1248]
 507:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1382              		.loc 1 507 15
 1383 0524 7B68     		ldr	r3, [r7, #4]
 1384 0526 D3F8D804 		ldr	r0, [r3, #1240]
 507:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1385              		.loc 1 507 50
 1386 052a 7B68     		ldr	r3, [r7, #4]
 1387 052c 03F59C61 		add	r1, r3, #1248
 507:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 1388              		.loc 1 507 15
 1389 0530 0023     		movs	r3, #0
 1390 0532 0022     		movs	r2, #0
 1391 0534 FFF7FEFF 		bl	osMessageQueuePut
 510:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 1392              		.loc 1 510 14
 1393 0538 7B68     		ldr	r3, [r7, #4]
 1394 053a D3F8D434 		ldr	r3, [r3, #1236]
 510:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 1395              		.loc 1 510 9
ARM GAS  /tmp/cc5Cbh8K.s 			page 37


 1396 053e 0221     		movs	r1, #2
 1397 0540 7868     		ldr	r0, [r7, #4]
 1398 0542 9847     		blx	r3
 1399              	.LVL0:
 512:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1400              		.loc 1 512 7
 1401 0544 02E0     		b	.L65
 1402              	.L34:
 515:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 1403              		.loc 1 515 13
 1404 0546 0023     		movs	r3, #0
 1405 0548 FB75     		strb	r3, [r7, #23]
 516:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 1406              		.loc 1 516 7
 1407 054a 00BF     		nop
 1408              	.L65:
 520:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 521:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return error;
 1409              		.loc 1 521 10
 1410 054c FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 522:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1411              		.loc 1 522 1
 1412 054e 1846     		mov	r0, r3
 1413 0550 1837     		adds	r7, r7, #24
 1414              	.LCFI18:
 1415              		.cfi_def_cfa_offset 8
 1416 0552 BD46     		mov	sp, r7
 1417              	.LCFI19:
 1418              		.cfi_def_cfa_register 13
 1419              		@ sp needed
 1420 0554 80BD     		pop	{r7, pc}
 1421              		.cfi_endproc
 1422              	.LFE341:
 1424 0556 00BF     		.section	.text.USBH_MSC_SOFProcess,"ax",%progbits
 1425              		.align	1
 1426              		.syntax unified
 1427              		.thumb
 1428              		.thumb_func
 1429              		.fpu fpv5-d16
 1431              	USBH_MSC_SOFProcess:
 1432              	.LFB342:
 523:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 524:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 525:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 526:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_SOFProcess
 527:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for SOF state
 528:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 529:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 530:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 531:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_SOFProcess(USBH_HandleTypeDef *phost)
 532:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1433              		.loc 1 532 1
 1434              		.cfi_startproc
 1435              		@ args = 0, pretend = 0, frame = 8
 1436              		@ frame_needed = 1, uses_anonymous_args = 0
 1437              		@ link register save eliminated.
 1438 0000 80B4     		push	{r7}
ARM GAS  /tmp/cc5Cbh8K.s 			page 38


 1439              	.LCFI20:
 1440              		.cfi_def_cfa_offset 4
 1441              		.cfi_offset 7, -4
 1442 0002 83B0     		sub	sp, sp, #12
 1443              	.LCFI21:
 1444              		.cfi_def_cfa_offset 16
 1445 0004 00AF     		add	r7, sp, #0
 1446              	.LCFI22:
 1447              		.cfi_def_cfa_register 7
 1448 0006 7860     		str	r0, [r7, #4]
 533:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Prevent unused argument(s) compilation warning */
 534:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   UNUSED(phost);
 535:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 536:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 1449              		.loc 1 536 10
 1450 0008 0023     		movs	r3, #0
 537:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1451              		.loc 1 537 1
 1452 000a 1846     		mov	r0, r3
 1453 000c 0C37     		adds	r7, r7, #12
 1454              	.LCFI23:
 1455              		.cfi_def_cfa_offset 4
 1456 000e BD46     		mov	sp, r7
 1457              	.LCFI24:
 1458              		.cfi_def_cfa_register 13
 1459              		@ sp needed
 1460 0010 5DF8047B 		ldr	r7, [sp], #4
 1461              	.LCFI25:
 1462              		.cfi_restore 7
 1463              		.cfi_def_cfa_offset 0
 1464 0014 7047     		bx	lr
 1465              		.cfi_endproc
 1466              	.LFE342:
 1468              		.section	.text.USBH_MSC_RdWrProcess,"ax",%progbits
 1469              		.align	1
 1470              		.syntax unified
 1471              		.thumb
 1472              		.thumb_func
 1473              		.fpu fpv5-d16
 1475              	USBH_MSC_RdWrProcess:
 1476              	.LFB343:
 538:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 539:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_RdWrProcess
 540:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function is for managing state machine for MSC I/O Process
 541:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 542:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 543:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 544:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 545:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** static USBH_StatusTypeDef USBH_MSC_RdWrProcess(USBH_HandleTypeDef *phost, uint8_t lun)
 546:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1477              		.loc 1 546 1
 1478              		.cfi_startproc
 1479              		@ args = 0, pretend = 0, frame = 24
 1480              		@ frame_needed = 1, uses_anonymous_args = 0
 1481 0000 80B5     		push	{r7, lr}
 1482              	.LCFI26:
 1483              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc5Cbh8K.s 			page 39


 1484              		.cfi_offset 7, -8
 1485              		.cfi_offset 14, -4
 1486 0002 88B0     		sub	sp, sp, #32
 1487              	.LCFI27:
 1488              		.cfi_def_cfa_offset 40
 1489 0004 02AF     		add	r7, sp, #8
 1490              	.LCFI28:
 1491              		.cfi_def_cfa 7, 32
 1492 0006 7860     		str	r0, [r7, #4]
 1493 0008 0B46     		mov	r3, r1
 1494 000a FB70     		strb	r3, [r7, #3]
 547:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1495              		.loc 1 547 62
 1496 000c 7B68     		ldr	r3, [r7, #4]
 1497 000e D3F87C34 		ldr	r3, [r3, #1148]
 1498              		.loc 1 547 22
 1499 0012 DB69     		ldr	r3, [r3, #28]
 1500 0014 3B61     		str	r3, [r7, #16]
 548:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef error = USBH_BUSY ;
 1501              		.loc 1 548 22
 1502 0016 0123     		movs	r3, #1
 1503 0018 FB75     		strb	r3, [r7, #23]
 549:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_StatusTypeDef scsi_status = USBH_BUSY ;
 1504              		.loc 1 549 22
 1505 001a 0123     		movs	r3, #1
 1506 001c FB73     		strb	r3, [r7, #15]
 550:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 551:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   /* Switch MSC REQ state machine */
 552:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   switch (MSC_Handle->unit[lun].state)
 1507              		.loc 1 552 32
 1508 001e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1509 0020 3A69     		ldr	r2, [r7, #16]
 1510 0022 3421     		movs	r1, #52
 1511 0024 01FB03F3 		mul	r3, r1, r3
 1512 0028 1344     		add	r3, r3, r2
 1513 002a 9033     		adds	r3, r3, #144
 1514 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1515              		.loc 1 552 3
 1516 002e 072B     		cmp	r3, #7
 1517 0030 4BD0     		beq	.L75
 1518 0032 072B     		cmp	r3, #7
 1519 0034 00F3D280 		bgt	.L88
 1520 0038 052B     		cmp	r3, #5
 1521 003a 00F08980 		beq	.L77
 1522 003e 062B     		cmp	r3, #6
 1523 0040 40F0CC80 		bne	.L88
 553:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 554:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 555:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_READ:
 556:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       scsi_status = USBH_MSC_SCSI_Read(phost, lun, 0U, NULL, 0U);
 1524              		.loc 1 556 21
 1525 0044 F978     		ldrb	r1, [r7, #3]	@ zero_extendqisi2
 1526 0046 0023     		movs	r3, #0
 1527 0048 0093     		str	r3, [sp]
 1528 004a 0023     		movs	r3, #0
 1529 004c 0022     		movs	r2, #0
 1530 004e 7868     		ldr	r0, [r7, #4]
ARM GAS  /tmp/cc5Cbh8K.s 			page 40


 1531 0050 FFF7FEFF 		bl	USBH_MSC_SCSI_Read
 1532 0054 0346     		mov	r3, r0
 1533 0056 FB73     		strb	r3, [r7, #15]
 557:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 558:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (scsi_status == USBH_OK)
 1534              		.loc 1 558 10
 1535 0058 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1536 005a 002B     		cmp	r3, #0
 1537 005c 0BD1     		bne	.L78
 559:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 560:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_IDLE;
 1538              		.loc 1 560 30
 1539 005e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1540              		.loc 1 560 37
 1541 0060 3A69     		ldr	r2, [r7, #16]
 1542 0062 3421     		movs	r1, #52
 1543 0064 01FB03F3 		mul	r3, r1, r3
 1544 0068 1344     		add	r3, r3, r2
 1545 006a 9033     		adds	r3, r3, #144
 1546 006c 0122     		movs	r2, #1
 1547 006e 1A70     		strb	r2, [r3]
 561:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_OK;
 1548              		.loc 1 561 15
 1549 0070 0023     		movs	r3, #0
 1550 0072 FB75     		strb	r3, [r7, #23]
 1551 0074 1AE0     		b	.L79
 1552              	.L78:
 562:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 563:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       else if (scsi_status == USBH_FAIL)
 1553              		.loc 1 563 15
 1554 0076 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1555 0078 022B     		cmp	r3, #2
 1556 007a 09D1     		bne	.L80
 564:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 565:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_REQUEST_SENSE;
 1557              		.loc 1 565 30
 1558 007c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1559              		.loc 1 565 37
 1560 007e 3A69     		ldr	r2, [r7, #16]
 1561 0080 3421     		movs	r1, #52
 1562 0082 01FB03F3 		mul	r3, r1, r3
 1563 0086 1344     		add	r3, r3, r2
 1564 0088 9033     		adds	r3, r3, #144
 1565 008a 0522     		movs	r2, #5
 1566 008c 1A70     		strb	r2, [r3]
 1567 008e 0DE0     		b	.L79
 1568              	.L80:
 566:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 567:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       else
 568:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 569:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if (scsi_status == USBH_UNRECOVERED_ERROR)
 1569              		.loc 1 569 12
 1570 0090 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1571 0092 042B     		cmp	r3, #4
 1572 0094 0AD1     		bne	.L79
 570:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 571:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
ARM GAS  /tmp/cc5Cbh8K.s 			page 41


 1573              		.loc 1 571 32
 1574 0096 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1575              		.loc 1 571 39
 1576 0098 3A69     		ldr	r2, [r7, #16]
 1577 009a 3421     		movs	r1, #52
 1578 009c 01FB03F3 		mul	r3, r1, r3
 1579 00a0 1344     		add	r3, r3, r2
 1580 00a2 9033     		adds	r3, r3, #144
 1581 00a4 0822     		movs	r2, #8
 1582 00a6 1A70     		strb	r2, [r3]
 572:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 1583              		.loc 1 572 17
 1584 00a8 0223     		movs	r3, #2
 1585 00aa FB75     		strb	r3, [r7, #23]
 1586              	.L79:
 573:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 574:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 575:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 576:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 577:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       phost->os_msg = (uint32_t)USBH_CLASS_EVENT;
 1587              		.loc 1 577 21
 1588 00ac 7B68     		ldr	r3, [r7, #4]
 1589 00ae 0422     		movs	r2, #4
 1590 00b0 C3F8E024 		str	r2, [r3, #1248]
 578:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (osCMSIS < 0x20000U)
 579:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 580:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #else
 581:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1591              		.loc 1 581 13
 1592 00b4 7B68     		ldr	r3, [r7, #4]
 1593 00b6 D3F8D804 		ldr	r0, [r3, #1240]
 1594              		.loc 1 581 48
 1595 00ba 7B68     		ldr	r3, [r7, #4]
 1596 00bc 03F59C61 		add	r1, r3, #1248
 1597              		.loc 1 581 13
 1598 00c0 0023     		movs	r3, #0
 1599 00c2 0022     		movs	r2, #0
 1600 00c4 FFF7FEFF 		bl	osMessageQueuePut
 582:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 583:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 584:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 1601              		.loc 1 584 7
 1602 00c8 89E0     		b	.L81
 1603              	.L75:
 585:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 586:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_WRITE:
 587:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       scsi_status = USBH_MSC_SCSI_Write(phost, lun, 0U, NULL, 0U);
 1604              		.loc 1 587 21
 1605 00ca F978     		ldrb	r1, [r7, #3]	@ zero_extendqisi2
 1606 00cc 0023     		movs	r3, #0
 1607 00ce 0093     		str	r3, [sp]
 1608 00d0 0023     		movs	r3, #0
 1609 00d2 0022     		movs	r2, #0
 1610 00d4 7868     		ldr	r0, [r7, #4]
 1611 00d6 FFF7FEFF 		bl	USBH_MSC_SCSI_Write
 1612 00da 0346     		mov	r3, r0
 1613 00dc FB73     		strb	r3, [r7, #15]
ARM GAS  /tmp/cc5Cbh8K.s 			page 42


 588:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 589:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (scsi_status == USBH_OK)
 1614              		.loc 1 589 10
 1615 00de FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1616 00e0 002B     		cmp	r3, #0
 1617 00e2 0BD1     		bne	.L82
 590:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 591:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_IDLE;
 1618              		.loc 1 591 30
 1619 00e4 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1620              		.loc 1 591 37
 1621 00e6 3A69     		ldr	r2, [r7, #16]
 1622 00e8 3421     		movs	r1, #52
 1623 00ea 01FB03F3 		mul	r3, r1, r3
 1624 00ee 1344     		add	r3, r3, r2
 1625 00f0 9033     		adds	r3, r3, #144
 1626 00f2 0122     		movs	r2, #1
 1627 00f4 1A70     		strb	r2, [r3]
 592:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_OK;
 1628              		.loc 1 592 15
 1629 00f6 0023     		movs	r3, #0
 1630 00f8 FB75     		strb	r3, [r7, #23]
 1631 00fa 1AE0     		b	.L83
 1632              	.L82:
 593:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 594:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       else if (scsi_status == USBH_FAIL)
 1633              		.loc 1 594 15
 1634 00fc FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1635 00fe 022B     		cmp	r3, #2
 1636 0100 09D1     		bne	.L84
 595:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 596:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_REQUEST_SENSE;
 1637              		.loc 1 596 30
 1638 0102 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1639              		.loc 1 596 37
 1640 0104 3A69     		ldr	r2, [r7, #16]
 1641 0106 3421     		movs	r1, #52
 1642 0108 01FB03F3 		mul	r3, r1, r3
 1643 010c 1344     		add	r3, r3, r2
 1644 010e 9033     		adds	r3, r3, #144
 1645 0110 0522     		movs	r2, #5
 1646 0112 1A70     		strb	r2, [r3]
 1647 0114 0DE0     		b	.L83
 1648              	.L84:
 597:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 598:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       else
 599:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 600:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if (scsi_status == USBH_UNRECOVERED_ERROR)
 1649              		.loc 1 600 12
 1650 0116 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1651 0118 042B     		cmp	r3, #4
 1652 011a 0AD1     		bne	.L83
 601:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
 602:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
 1653              		.loc 1 602 32
 1654 011c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1655              		.loc 1 602 39
ARM GAS  /tmp/cc5Cbh8K.s 			page 43


 1656 011e 3A69     		ldr	r2, [r7, #16]
 1657 0120 3421     		movs	r1, #52
 1658 0122 01FB03F3 		mul	r3, r1, r3
 1659 0126 1344     		add	r3, r3, r2
 1660 0128 9033     		adds	r3, r3, #144
 1661 012a 0822     		movs	r2, #8
 1662 012c 1A70     		strb	r2, [r3]
 603:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 1663              		.loc 1 603 17
 1664 012e 0223     		movs	r3, #2
 1665 0130 FB75     		strb	r3, [r7, #23]
 1666              	.L83:
 604:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 605:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 606:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 607:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 608:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       phost->os_msg = (uint32_t)USBH_CLASS_EVENT;
 1667              		.loc 1 608 21
 1668 0132 7B68     		ldr	r3, [r7, #4]
 1669 0134 0422     		movs	r2, #4
 1670 0136 C3F8E024 		str	r2, [r3, #1248]
 609:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (osCMSIS < 0x20000U)
 610:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 611:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #else
 612:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1671              		.loc 1 612 13
 1672 013a 7B68     		ldr	r3, [r7, #4]
 1673 013c D3F8D804 		ldr	r0, [r3, #1240]
 1674              		.loc 1 612 48
 1675 0140 7B68     		ldr	r3, [r7, #4]
 1676 0142 03F59C61 		add	r1, r3, #1248
 1677              		.loc 1 612 13
 1678 0146 0023     		movs	r3, #0
 1679 0148 0022     		movs	r2, #0
 1680 014a FFF7FEFF 		bl	osMessageQueuePut
 613:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 614:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 615:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 1681              		.loc 1 615 7
 1682 014e 46E0     		b	.L81
 1683              	.L77:
 616:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 617:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     case MSC_REQUEST_SENSE:
 618:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       scsi_status = USBH_MSC_SCSI_RequestSense(phost, lun, &MSC_Handle->unit[lun].sense);
 1684              		.loc 1 618 82
 1685 0150 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1686              		.loc 1 618 21
 1687 0152 3422     		movs	r2, #52
 1688 0154 02FB03F3 		mul	r3, r2, r3
 1689 0158 9833     		adds	r3, r3, #152
 1690 015a 3A69     		ldr	r2, [r7, #16]
 1691 015c 1344     		add	r3, r3, r2
 1692 015e 1A1D     		adds	r2, r3, #4
 1693 0160 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1694 0162 1946     		mov	r1, r3
 1695 0164 7868     		ldr	r0, [r7, #4]
 1696 0166 FFF7FEFF 		bl	USBH_MSC_SCSI_RequestSense
ARM GAS  /tmp/cc5Cbh8K.s 			page 44


 1697 016a 0346     		mov	r3, r0
 1698 016c FB73     		strb	r3, [r7, #15]
 619:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 620:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (scsi_status == USBH_OK)
 1699              		.loc 1 620 10
 1700 016e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1701 0170 002B     		cmp	r3, #0
 1702 0172 13D1     		bne	.L85
 621:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 622:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         USBH_UsrLog("Sense Key  : %x", MSC_Handle->unit[lun].sense.key);
 623:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         USBH_UsrLog("Additional Sense Code : %x", MSC_Handle->unit[lun].sense.asc);
 624:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         USBH_UsrLog("Additional Sense Code Qualifier: %x", MSC_Handle->unit[lun].sense.ascq);
 625:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].state = MSC_IDLE;
 1703              		.loc 1 625 30
 1704 0174 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1705              		.loc 1 625 37
 1706 0176 3A69     		ldr	r2, [r7, #16]
 1707 0178 3421     		movs	r1, #52
 1708 017a 01FB03F3 		mul	r3, r1, r3
 1709 017e 1344     		add	r3, r3, r2
 1710 0180 9033     		adds	r3, r3, #144
 1711 0182 0122     		movs	r2, #1
 1712 0184 1A70     		strb	r2, [r3]
 626:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         MSC_Handle->unit[lun].error = MSC_ERROR;
 1713              		.loc 1 626 30
 1714 0186 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1715              		.loc 1 626 37
 1716 0188 3A69     		ldr	r2, [r7, #16]
 1717 018a 3421     		movs	r1, #52
 1718 018c 01FB03F3 		mul	r3, r1, r3
 1719 0190 1344     		add	r3, r3, r2
 1720 0192 9133     		adds	r3, r3, #145
 1721 0194 0222     		movs	r2, #2
 1722 0196 1A70     		strb	r2, [r3]
 627:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 628:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         error = USBH_FAIL;
 1723              		.loc 1 628 15
 1724 0198 0223     		movs	r3, #2
 1725 019a FB75     		strb	r3, [r7, #23]
 1726              	.L85:
 629:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 630:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       if (scsi_status == USBH_FAIL)
 1727              		.loc 1 630 10
 1728 019c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1729 019e 022B     		cmp	r3, #2
 1730 01a0 0DD0     		beq	.L86
 631:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 632:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         USBH_UsrLog("MSC Device NOT ready");
 633:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 634:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       else
 635:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       {
 636:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         if (scsi_status == USBH_UNRECOVERED_ERROR)
 1731              		.loc 1 636 12
 1732 01a2 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1733 01a4 042B     		cmp	r3, #4
 1734 01a6 0AD1     		bne	.L86
 637:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         {
ARM GAS  /tmp/cc5Cbh8K.s 			page 45


 638:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           MSC_Handle->unit[lun].state = MSC_UNRECOVERED_ERROR;
 1735              		.loc 1 638 32
 1736 01a8 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1737              		.loc 1 638 39
 1738 01aa 3A69     		ldr	r2, [r7, #16]
 1739 01ac 3421     		movs	r1, #52
 1740 01ae 01FB03F3 		mul	r3, r1, r3
 1741 01b2 1344     		add	r3, r3, r2
 1742 01b4 9033     		adds	r3, r3, #144
 1743 01b6 0822     		movs	r2, #8
 1744 01b8 1A70     		strb	r2, [r3]
 639:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****           error = USBH_FAIL;
 1745              		.loc 1 639 17
 1746 01ba 0223     		movs	r3, #2
 1747 01bc FB75     		strb	r3, [r7, #23]
 1748              	.L86:
 640:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****         }
 641:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       }
 642:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 643:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (USBH_USE_OS == 1U)
 644:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       phost->os_msg = (uint32_t)USBH_CLASS_EVENT;
 1749              		.loc 1 644 21
 1750 01be 7B68     		ldr	r3, [r7, #4]
 1751 01c0 0422     		movs	r2, #4
 1752 01c2 C3F8E024 		str	r2, [r3, #1248]
 645:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #if (osCMSIS < 0x20000U)
 646:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (void)osMessagePut(phost->os_event, phost->os_msg, 0U);
 647:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #else
 648:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (void)osMessageQueuePut(phost->os_event, &phost->os_msg, 0U, NULL);
 1753              		.loc 1 648 13
 1754 01c6 7B68     		ldr	r3, [r7, #4]
 1755 01c8 D3F8D804 		ldr	r0, [r3, #1240]
 1756              		.loc 1 648 48
 1757 01cc 7B68     		ldr	r3, [r7, #4]
 1758 01ce 03F59C61 		add	r1, r3, #1248
 1759              		.loc 1 648 13
 1760 01d2 0023     		movs	r3, #0
 1761 01d4 0022     		movs	r2, #0
 1762 01d6 FFF7FEFF 		bl	osMessageQueuePut
 649:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 650:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** #endif
 651:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 1763              		.loc 1 651 7
 1764 01da 00E0     		b	.L81
 1765              	.L88:
 652:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 653:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     default:
 654:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       break;
 1766              		.loc 1 654 7
 1767 01dc 00BF     		nop
 1768              	.L81:
 655:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 656:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 657:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return error;
 1769              		.loc 1 657 10
 1770 01de FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 658:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
ARM GAS  /tmp/cc5Cbh8K.s 			page 46


 1771              		.loc 1 658 1
 1772 01e0 1846     		mov	r0, r3
 1773 01e2 1837     		adds	r7, r7, #24
 1774              	.LCFI29:
 1775              		.cfi_def_cfa_offset 8
 1776 01e4 BD46     		mov	sp, r7
 1777              	.LCFI30:
 1778              		.cfi_def_cfa_register 13
 1779              		@ sp needed
 1780 01e6 80BD     		pop	{r7, pc}
 1781              		.cfi_endproc
 1782              	.LFE343:
 1784              		.section	.text.USBH_MSC_IsReady,"ax",%progbits
 1785              		.align	1
 1786              		.global	USBH_MSC_IsReady
 1787              		.syntax unified
 1788              		.thumb
 1789              		.thumb_func
 1790              		.fpu fpv5-d16
 1792              	USBH_MSC_IsReady:
 1793              	.LFB344:
 659:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 660:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 661:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_IsReady
 662:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function check if the MSC function is ready
 663:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 664:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 665:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 666:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_IsReady(USBH_HandleTypeDef *phost)
 667:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1794              		.loc 1 667 1
 1795              		.cfi_startproc
 1796              		@ args = 0, pretend = 0, frame = 16
 1797              		@ frame_needed = 1, uses_anonymous_args = 0
 1798              		@ link register save eliminated.
 1799 0000 80B4     		push	{r7}
 1800              	.LCFI31:
 1801              		.cfi_def_cfa_offset 4
 1802              		.cfi_offset 7, -4
 1803 0002 85B0     		sub	sp, sp, #20
 1804              	.LCFI32:
 1805              		.cfi_def_cfa_offset 24
 1806 0004 00AF     		add	r7, sp, #0
 1807              	.LCFI33:
 1808              		.cfi_def_cfa_register 7
 1809 0006 7860     		str	r0, [r7, #4]
 668:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1810              		.loc 1 668 62
 1811 0008 7B68     		ldr	r3, [r7, #4]
 1812 000a D3F87C34 		ldr	r3, [r3, #1148]
 1813              		.loc 1 668 22
 1814 000e DB69     		ldr	r3, [r3, #28]
 1815 0010 BB60     		str	r3, [r7, #8]
 669:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t res;
 670:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 671:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->gState == HOST_CLASS) && (MSC_Handle->state == MSC_IDLE))
 1816              		.loc 1 671 13
ARM GAS  /tmp/cc5Cbh8K.s 			page 47


 1817 0012 7B68     		ldr	r3, [r7, #4]
 1818 0014 1B78     		ldrb	r3, [r3]
 1819 0016 DBB2     		uxtb	r3, r3
 1820              		.loc 1 671 6
 1821 0018 0B2B     		cmp	r3, #11
 1822 001a 06D1     		bne	.L90
 1823              		.loc 1 671 51 discriminator 1
 1824 001c BB68     		ldr	r3, [r7, #8]
 1825 001e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1826              		.loc 1 671 37 discriminator 1
 1827 0020 012B     		cmp	r3, #1
 1828 0022 02D1     		bne	.L90
 672:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 673:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 1U;
 1829              		.loc 1 673 9
 1830 0024 0123     		movs	r3, #1
 1831 0026 FB73     		strb	r3, [r7, #15]
 1832 0028 01E0     		b	.L91
 1833              	.L90:
 674:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 675:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 676:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 677:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 0U;
 1834              		.loc 1 677 9
 1835 002a 0023     		movs	r3, #0
 1836 002c FB73     		strb	r3, [r7, #15]
 1837              	.L91:
 678:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 679:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 680:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return res;
 1838              		.loc 1 680 10
 1839 002e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 681:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1840              		.loc 1 681 1
 1841 0030 1846     		mov	r0, r3
 1842 0032 1437     		adds	r7, r7, #20
 1843              	.LCFI34:
 1844              		.cfi_def_cfa_offset 4
 1845 0034 BD46     		mov	sp, r7
 1846              	.LCFI35:
 1847              		.cfi_def_cfa_register 13
 1848              		@ sp needed
 1849 0036 5DF8047B 		ldr	r7, [sp], #4
 1850              	.LCFI36:
 1851              		.cfi_restore 7
 1852              		.cfi_def_cfa_offset 0
 1853 003a 7047     		bx	lr
 1854              		.cfi_endproc
 1855              	.LFE344:
 1857              		.section	.text.USBH_MSC_GetMaxLUN,"ax",%progbits
 1858              		.align	1
 1859              		.global	USBH_MSC_GetMaxLUN
 1860              		.syntax unified
 1861              		.thumb
 1862              		.thumb_func
 1863              		.fpu fpv5-d16
 1865              	USBH_MSC_GetMaxLUN:
ARM GAS  /tmp/cc5Cbh8K.s 			page 48


 1866              	.LFB345:
 682:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 683:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 684:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_GetMaxLUN
 685:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function return the Max LUN supported
 686:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 687:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval logical Unit Number supported
 688:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 689:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_GetMaxLUN(USBH_HandleTypeDef *phost)
 690:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1867              		.loc 1 690 1
 1868              		.cfi_startproc
 1869              		@ args = 0, pretend = 0, frame = 16
 1870              		@ frame_needed = 1, uses_anonymous_args = 0
 1871              		@ link register save eliminated.
 1872 0000 80B4     		push	{r7}
 1873              	.LCFI37:
 1874              		.cfi_def_cfa_offset 4
 1875              		.cfi_offset 7, -4
 1876 0002 85B0     		sub	sp, sp, #20
 1877              	.LCFI38:
 1878              		.cfi_def_cfa_offset 24
 1879 0004 00AF     		add	r7, sp, #0
 1880              	.LCFI39:
 1881              		.cfi_def_cfa_register 7
 1882 0006 7860     		str	r0, [r7, #4]
 691:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1883              		.loc 1 691 62
 1884 0008 7B68     		ldr	r3, [r7, #4]
 1885 000a D3F87C34 		ldr	r3, [r3, #1148]
 1886              		.loc 1 691 22
 1887 000e DB69     		ldr	r3, [r3, #28]
 1888 0010 FB60     		str	r3, [r7, #12]
 692:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 693:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->gState == HOST_CLASS) && (MSC_Handle->state == MSC_IDLE))
 1889              		.loc 1 693 13
 1890 0012 7B68     		ldr	r3, [r7, #4]
 1891 0014 1B78     		ldrb	r3, [r3]
 1892 0016 DBB2     		uxtb	r3, r3
 1893              		.loc 1 693 6
 1894 0018 0B2B     		cmp	r3, #11
 1895 001a 06D1     		bne	.L94
 1896              		.loc 1 693 51 discriminator 1
 1897 001c FB68     		ldr	r3, [r7, #12]
 1898 001e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1899              		.loc 1 693 37 discriminator 1
 1900 0020 012B     		cmp	r3, #1
 1901 0022 02D1     		bne	.L94
 694:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 695:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return (uint8_t)MSC_Handle->max_lun;
 1902              		.loc 1 695 12
 1903 0024 FB68     		ldr	r3, [r7, #12]
 1904 0026 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1905 0028 00E0     		b	.L95
 1906              	.L94:
 696:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 697:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
ARM GAS  /tmp/cc5Cbh8K.s 			page 49


 698:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return 0xFFU;
 1907              		.loc 1 698 10
 1908 002a FF23     		movs	r3, #255
 1909              	.L95:
 699:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1910              		.loc 1 699 1
 1911 002c 1846     		mov	r0, r3
 1912 002e 1437     		adds	r7, r7, #20
 1913              	.LCFI40:
 1914              		.cfi_def_cfa_offset 4
 1915 0030 BD46     		mov	sp, r7
 1916              	.LCFI41:
 1917              		.cfi_def_cfa_register 13
 1918              		@ sp needed
 1919 0032 5DF8047B 		ldr	r7, [sp], #4
 1920              	.LCFI42:
 1921              		.cfi_restore 7
 1922              		.cfi_def_cfa_offset 0
 1923 0036 7047     		bx	lr
 1924              		.cfi_endproc
 1925              	.LFE345:
 1927              		.section	.text.USBH_MSC_UnitIsReady,"ax",%progbits
 1928              		.align	1
 1929              		.global	USBH_MSC_UnitIsReady
 1930              		.syntax unified
 1931              		.thumb
 1932              		.thumb_func
 1933              		.fpu fpv5-d16
 1935              	USBH_MSC_UnitIsReady:
 1936              	.LFB346:
 700:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 701:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 702:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_UnitIsReady
 703:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function check whether a LUN is ready
 704:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 705:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 706:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval Lun status (0: not ready / 1: ready)
 707:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 708:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** uint8_t  USBH_MSC_UnitIsReady(USBH_HandleTypeDef *phost, uint8_t lun)
 709:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 1937              		.loc 1 709 1
 1938              		.cfi_startproc
 1939              		@ args = 0, pretend = 0, frame = 16
 1940              		@ frame_needed = 1, uses_anonymous_args = 0
 1941              		@ link register save eliminated.
 1942 0000 80B4     		push	{r7}
 1943              	.LCFI43:
 1944              		.cfi_def_cfa_offset 4
 1945              		.cfi_offset 7, -4
 1946 0002 85B0     		sub	sp, sp, #20
 1947              	.LCFI44:
 1948              		.cfi_def_cfa_offset 24
 1949 0004 00AF     		add	r7, sp, #0
 1950              	.LCFI45:
 1951              		.cfi_def_cfa_register 7
 1952 0006 7860     		str	r0, [r7, #4]
 1953 0008 0B46     		mov	r3, r1
ARM GAS  /tmp/cc5Cbh8K.s 			page 50


 1954 000a FB70     		strb	r3, [r7, #3]
 710:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 1955              		.loc 1 710 62
 1956 000c 7B68     		ldr	r3, [r7, #4]
 1957 000e D3F87C34 		ldr	r3, [r3, #1148]
 1958              		.loc 1 710 22
 1959 0012 DB69     		ldr	r3, [r3, #28]
 1960 0014 BB60     		str	r3, [r7, #8]
 711:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint8_t res;
 712:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 713:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->gState == HOST_CLASS) && (MSC_Handle->unit[lun].error == MSC_OK))
 1961              		.loc 1 713 13
 1962 0016 7B68     		ldr	r3, [r7, #4]
 1963 0018 1B78     		ldrb	r3, [r3]
 1964 001a DBB2     		uxtb	r3, r3
 1965              		.loc 1 713 6
 1966 001c 0B2B     		cmp	r3, #11
 1967 001e 0CD1     		bne	.L97
 1968              		.loc 1 713 62 discriminator 1
 1969 0020 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1970 0022 BA68     		ldr	r2, [r7, #8]
 1971 0024 3421     		movs	r1, #52
 1972 0026 01FB03F3 		mul	r3, r1, r3
 1973 002a 1344     		add	r3, r3, r2
 1974 002c 9133     		adds	r3, r3, #145
 1975 002e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1976              		.loc 1 713 37 discriminator 1
 1977 0030 002B     		cmp	r3, #0
 1978 0032 02D1     		bne	.L97
 714:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 715:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 1U;
 1979              		.loc 1 715 9
 1980 0034 0123     		movs	r3, #1
 1981 0036 FB73     		strb	r3, [r7, #15]
 1982 0038 01E0     		b	.L98
 1983              	.L97:
 716:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 717:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 718:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 719:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     res = 0U;
 1984              		.loc 1 719 9
 1985 003a 0023     		movs	r3, #0
 1986 003c FB73     		strb	r3, [r7, #15]
 1987              	.L98:
 720:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 721:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 722:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return res;
 1988              		.loc 1 722 10
 1989 003e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 723:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 1990              		.loc 1 723 1
 1991 0040 1846     		mov	r0, r3
 1992 0042 1437     		adds	r7, r7, #20
 1993              	.LCFI46:
 1994              		.cfi_def_cfa_offset 4
 1995 0044 BD46     		mov	sp, r7
 1996              	.LCFI47:
ARM GAS  /tmp/cc5Cbh8K.s 			page 51


 1997              		.cfi_def_cfa_register 13
 1998              		@ sp needed
 1999 0046 5DF8047B 		ldr	r7, [sp], #4
 2000              	.LCFI48:
 2001              		.cfi_restore 7
 2002              		.cfi_def_cfa_offset 0
 2003 004a 7047     		bx	lr
 2004              		.cfi_endproc
 2005              	.LFE346:
 2007              		.section	.text.USBH_MSC_GetLUNInfo,"ax",%progbits
 2008              		.align	1
 2009              		.global	USBH_MSC_GetLUNInfo
 2010              		.syntax unified
 2011              		.thumb
 2012              		.thumb_func
 2013              		.fpu fpv5-d16
 2015              	USBH_MSC_GetLUNInfo:
 2016              	.LFB347:
 724:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 725:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 726:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_GetLUNInfo
 727:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function return a LUN information
 728:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 729:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 730:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 731:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 732:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_GetLUNInfo(USBH_HandleTypeDef *phost, uint8_t lun, MSC_LUNTypeDef *info
 733:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 2017              		.loc 1 733 1
 2018              		.cfi_startproc
 2019              		@ args = 0, pretend = 0, frame = 24
 2020              		@ frame_needed = 1, uses_anonymous_args = 0
 2021 0000 80B5     		push	{r7, lr}
 2022              	.LCFI49:
 2023              		.cfi_def_cfa_offset 8
 2024              		.cfi_offset 7, -8
 2025              		.cfi_offset 14, -4
 2026 0002 86B0     		sub	sp, sp, #24
 2027              	.LCFI50:
 2028              		.cfi_def_cfa_offset 32
 2029 0004 00AF     		add	r7, sp, #0
 2030              	.LCFI51:
 2031              		.cfi_def_cfa_register 7
 2032 0006 F860     		str	r0, [r7, #12]
 2033 0008 0B46     		mov	r3, r1
 2034 000a 7A60     		str	r2, [r7, #4]
 2035 000c FB72     		strb	r3, [r7, #11]
 734:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 2036              		.loc 1 734 62
 2037 000e FB68     		ldr	r3, [r7, #12]
 2038 0010 D3F87C34 		ldr	r3, [r3, #1148]
 2039              		.loc 1 734 22
 2040 0014 DB69     		ldr	r3, [r3, #28]
 2041 0016 7B61     		str	r3, [r7, #20]
 735:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if (phost->gState == HOST_CLASS)
 2042              		.loc 1 735 12
 2043 0018 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cc5Cbh8K.s 			page 52


 2044 001a 1B78     		ldrb	r3, [r3]
 2045 001c DBB2     		uxtb	r3, r3
 2046              		.loc 1 735 6
 2047 001e 0B2B     		cmp	r3, #11
 2048 0020 0DD1     		bne	.L101
 736:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 737:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     USBH_memcpy(info, &MSC_Handle->unit[lun], sizeof(MSC_LUNTypeDef));
 2049              		.loc 1 737 40
 2050 0022 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2051              		.loc 1 737 23
 2052 0024 3422     		movs	r2, #52
 2053 0026 02FB03F3 		mul	r3, r2, r3
 2054 002a 9033     		adds	r3, r3, #144
 2055 002c 7A69     		ldr	r2, [r7, #20]
 2056 002e 1344     		add	r3, r3, r2
 2057              		.loc 1 737 5
 2058 0030 3422     		movs	r2, #52
 2059 0032 1946     		mov	r1, r3
 2060 0034 7868     		ldr	r0, [r7, #4]
 2061 0036 FFF7FEFF 		bl	memcpy
 738:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_OK;
 2062              		.loc 1 738 12
 2063 003a 0023     		movs	r3, #0
 2064 003c 00E0     		b	.L102
 2065              	.L101:
 739:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 740:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   else
 741:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 742:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return USBH_FAIL;
 2066              		.loc 1 742 12
 2067 003e 0223     		movs	r3, #2
 2068              	.L102:
 743:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 744:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 2069              		.loc 1 744 1
 2070 0040 1846     		mov	r0, r3
 2071 0042 1837     		adds	r7, r7, #24
 2072              	.LCFI52:
 2073              		.cfi_def_cfa_offset 8
 2074 0044 BD46     		mov	sp, r7
 2075              	.LCFI53:
 2076              		.cfi_def_cfa_register 13
 2077              		@ sp needed
 2078 0046 80BD     		pop	{r7, pc}
 2079              		.cfi_endproc
 2080              	.LFE347:
 2082              		.section	.text.USBH_MSC_Read,"ax",%progbits
 2083              		.align	1
 2084              		.global	USBH_MSC_Read
 2085              		.syntax unified
 2086              		.thumb
 2087              		.thumb_func
 2088              		.fpu fpv5-d16
 2090              	USBH_MSC_Read:
 2091              	.LFB348:
 745:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 746:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
ARM GAS  /tmp/cc5Cbh8K.s 			page 53


 747:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Read
 748:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function performs a Read operation
 749:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 750:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 751:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  address: sector address
 752:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  pbuf: pointer to data
 753:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  length: number of sector to read
 754:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 755:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 756:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_Read(USBH_HandleTypeDef *phost,
 757:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                  uint8_t lun,
 758:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                  uint32_t address,
 759:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                  uint8_t *pbuf,
 760:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                  uint32_t length)
 761:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 2092              		.loc 1 761 1
 2093              		.cfi_startproc
 2094              		@ args = 4, pretend = 0, frame = 24
 2095              		@ frame_needed = 1, uses_anonymous_args = 0
 2096 0000 80B5     		push	{r7, lr}
 2097              	.LCFI54:
 2098              		.cfi_def_cfa_offset 8
 2099              		.cfi_offset 7, -8
 2100              		.cfi_offset 14, -4
 2101 0002 88B0     		sub	sp, sp, #32
 2102              	.LCFI55:
 2103              		.cfi_def_cfa_offset 40
 2104 0004 02AF     		add	r7, sp, #8
 2105              	.LCFI56:
 2106              		.cfi_def_cfa 7, 32
 2107 0006 F860     		str	r0, [r7, #12]
 2108 0008 7A60     		str	r2, [r7, #4]
 2109 000a 3B60     		str	r3, [r7]
 2110 000c 0B46     		mov	r3, r1
 2111 000e FB72     		strb	r3, [r7, #11]
 762:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint32_t timeout;
 763:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 2112              		.loc 1 763 62
 2113 0010 FB68     		ldr	r3, [r7, #12]
 2114 0012 D3F87C34 		ldr	r3, [r3, #1148]
 2115              		.loc 1 763 22
 2116 0016 DB69     		ldr	r3, [r3, #28]
 2117 0018 7B61     		str	r3, [r7, #20]
 764:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 765:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->device.is_connected == 0U) ||
 2118              		.loc 1 765 21
 2119 001a FB68     		ldr	r3, [r7, #12]
 2120 001c 93F82034 		ldrb	r3, [r3, #1056]
 2121 0020 DBB2     		uxtb	r3, r3
 2122              		.loc 1 765 6
 2123 0022 002B     		cmp	r3, #0
 2124 0024 0ED0     		beq	.L104
 766:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 2125              		.loc 1 766 13 discriminator 1
 2126 0026 FB68     		ldr	r3, [r7, #12]
 2127 0028 1B78     		ldrb	r3, [r3]
 2128 002a DBB2     		uxtb	r3, r3
ARM GAS  /tmp/cc5Cbh8K.s 			page 54


 765:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 2129              		.loc 1 765 42 discriminator 1
 2130 002c 0B2B     		cmp	r3, #11
 2131 002e 09D1     		bne	.L104
 767:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 2132              		.loc 1 767 29
 2133 0030 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2134 0032 7A69     		ldr	r2, [r7, #20]
 2135 0034 3421     		movs	r1, #52
 2136 0036 01FB03F3 		mul	r3, r1, r3
 2137 003a 1344     		add	r3, r3, r2
 2138 003c 9033     		adds	r3, r3, #144
 2139 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 766:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 2140              		.loc 1 766 37
 2141 0040 012B     		cmp	r3, #1
 2142 0042 01D0     		beq	.L105
 2143              	.L104:
 768:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 769:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  USBH_FAIL;
 2144              		.loc 1 769 13
 2145 0044 0223     		movs	r3, #2
 2146 0046 40E0     		b	.L106
 2147              	.L105:
 770:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 771:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 772:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_READ;
 2148              		.loc 1 772 21
 2149 0048 7B69     		ldr	r3, [r7, #20]
 2150 004a 0622     		movs	r2, #6
 2151 004c 1A73     		strb	r2, [r3, #12]
 773:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_READ;
 2152              		.loc 1 773 24
 2153 004e FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2154              		.loc 1 773 31
 2155 0050 7A69     		ldr	r2, [r7, #20]
 2156 0052 3421     		movs	r1, #52
 2157 0054 01FB03F3 		mul	r3, r1, r3
 2158 0058 1344     		add	r3, r3, r2
 2159 005a 9033     		adds	r3, r3, #144
 2160 005c 0622     		movs	r2, #6
 2161 005e 1A70     		strb	r2, [r3]
 774:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 2162              		.loc 1 774 22
 2163 0060 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2164 0062 9AB2     		uxth	r2, r3
 2165 0064 7B69     		ldr	r3, [r7, #20]
 2166 0066 A3F8FA20 		strh	r2, [r3, #250]	@ movhi
 775:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 776:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SCSI_Read(phost, lun, address, pbuf, length);
 2167              		.loc 1 776 3
 2168 006a F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
 2169 006c 3B6A     		ldr	r3, [r7, #32]
 2170 006e 0093     		str	r3, [sp]
 2171 0070 3B68     		ldr	r3, [r7]
 2172 0072 7A68     		ldr	r2, [r7, #4]
 2173 0074 F868     		ldr	r0, [r7, #12]
ARM GAS  /tmp/cc5Cbh8K.s 			page 55


 2174 0076 FFF7FEFF 		bl	USBH_MSC_SCSI_Read
 777:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 778:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   timeout = phost->Timer;
 2175              		.loc 1 778 11
 2176 007a FB68     		ldr	r3, [r7, #12]
 2177 007c D3F8C434 		ldr	r3, [r3, #1220]
 2178 0080 3B61     		str	r3, [r7, #16]
 779:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 780:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   while (USBH_MSC_RdWrProcess(phost, lun) == USBH_BUSY)
 2179              		.loc 1 780 9
 2180 0082 16E0     		b	.L107
 2181              	.L109:
 781:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 782:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if (((phost->Timer - timeout) > (10000U * length)) || (phost->device.is_connected == 0U))
 2182              		.loc 1 782 16
 2183 0084 FB68     		ldr	r3, [r7, #12]
 2184 0086 D3F8C424 		ldr	r2, [r3, #1220]
 2185              		.loc 1 782 24
 2186 008a 3B69     		ldr	r3, [r7, #16]
 2187 008c D21A     		subs	r2, r2, r3
 2188              		.loc 1 782 45
 2189 008e 3B6A     		ldr	r3, [r7, #32]
 2190 0090 42F21071 		movw	r1, #10000
 2191 0094 01FB03F3 		mul	r3, r1, r3
 2192              		.loc 1 782 8
 2193 0098 9A42     		cmp	r2, r3
 2194 009a 05D8     		bhi	.L108
 2195              		.loc 1 782 73 discriminator 1
 2196 009c FB68     		ldr	r3, [r7, #12]
 2197 009e 93F82034 		ldrb	r3, [r3, #1056]
 2198 00a2 DBB2     		uxtb	r3, r3
 2199              		.loc 1 782 56 discriminator 1
 2200 00a4 002B     		cmp	r3, #0
 2201 00a6 04D1     		bne	.L107
 2202              	.L108:
 783:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 784:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->state = MSC_IDLE;
 2203              		.loc 1 784 25
 2204 00a8 7B69     		ldr	r3, [r7, #20]
 2205 00aa 0122     		movs	r2, #1
 2206 00ac 1A73     		strb	r2, [r3, #12]
 785:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 2207              		.loc 1 785 14
 2208 00ae 0223     		movs	r3, #2
 2209 00b0 0BE0     		b	.L106
 2210              	.L107:
 780:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 2211              		.loc 1 780 10
 2212 00b2 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2213 00b4 1946     		mov	r1, r3
 2214 00b6 F868     		ldr	r0, [r7, #12]
 2215 00b8 FFF7FEFF 		bl	USBH_MSC_RdWrProcess
 2216 00bc 0346     		mov	r3, r0
 780:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 2217              		.loc 1 780 9
 2218 00be 012B     		cmp	r3, #1
 2219 00c0 E0D0     		beq	.L109
ARM GAS  /tmp/cc5Cbh8K.s 			page 56


 786:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 787:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 788:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_IDLE;
 2220              		.loc 1 788 21
 2221 00c2 7B69     		ldr	r3, [r7, #20]
 2222 00c4 0122     		movs	r2, #1
 2223 00c6 1A73     		strb	r2, [r3, #12]
 789:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 790:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 2224              		.loc 1 790 10
 2225 00c8 0023     		movs	r3, #0
 2226              	.L106:
 791:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 2227              		.loc 1 791 1
 2228 00ca 1846     		mov	r0, r3
 2229 00cc 1837     		adds	r7, r7, #24
 2230              	.LCFI57:
 2231              		.cfi_def_cfa_offset 8
 2232 00ce BD46     		mov	sp, r7
 2233              	.LCFI58:
 2234              		.cfi_def_cfa_register 13
 2235              		@ sp needed
 2236 00d0 80BD     		pop	{r7, pc}
 2237              		.cfi_endproc
 2238              	.LFE348:
 2240              		.section	.text.USBH_MSC_Write,"ax",%progbits
 2241              		.align	1
 2242              		.global	USBH_MSC_Write
 2243              		.syntax unified
 2244              		.thumb
 2245              		.thumb_func
 2246              		.fpu fpv5-d16
 2248              	USBH_MSC_Write:
 2249              	.LFB349:
 792:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 793:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** /**
 794:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @brief  USBH_MSC_Write
 795:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   *         The function performs a Write operation
 796:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  phost: Host handle
 797:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  lun: logical Unit Number
 798:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  address: sector address
 799:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  pbuf: pointer to data
 800:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @param  length: number of sector to write
 801:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   * @retval USBH Status
 802:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   */
 803:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** USBH_StatusTypeDef USBH_MSC_Write(USBH_HandleTypeDef *phost,
 804:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                   uint8_t lun,
 805:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                   uint32_t address,
 806:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                   uint8_t *pbuf,
 807:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****                                   uint32_t length)
 808:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** {
 2250              		.loc 1 808 1
 2251              		.cfi_startproc
 2252              		@ args = 4, pretend = 0, frame = 24
 2253              		@ frame_needed = 1, uses_anonymous_args = 0
 2254 0000 80B5     		push	{r7, lr}
 2255              	.LCFI59:
ARM GAS  /tmp/cc5Cbh8K.s 			page 57


 2256              		.cfi_def_cfa_offset 8
 2257              		.cfi_offset 7, -8
 2258              		.cfi_offset 14, -4
 2259 0002 88B0     		sub	sp, sp, #32
 2260              	.LCFI60:
 2261              		.cfi_def_cfa_offset 40
 2262 0004 02AF     		add	r7, sp, #8
 2263              	.LCFI61:
 2264              		.cfi_def_cfa 7, 32
 2265 0006 F860     		str	r0, [r7, #12]
 2266 0008 7A60     		str	r2, [r7, #4]
 2267 000a 3B60     		str	r3, [r7]
 2268 000c 0B46     		mov	r3, r1
 2269 000e FB72     		strb	r3, [r7, #11]
 809:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   uint32_t timeout;
 810:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 2270              		.loc 1 810 62
 2271 0010 FB68     		ldr	r3, [r7, #12]
 2272 0012 D3F87C34 		ldr	r3, [r3, #1148]
 2273              		.loc 1 810 22
 2274 0016 DB69     		ldr	r3, [r3, #28]
 2275 0018 7B61     		str	r3, [r7, #20]
 811:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 812:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   if ((phost->device.is_connected == 0U) ||
 2276              		.loc 1 812 21
 2277 001a FB68     		ldr	r3, [r7, #12]
 2278 001c 93F82034 		ldrb	r3, [r3, #1056]
 2279 0020 DBB2     		uxtb	r3, r3
 2280              		.loc 1 812 6
 2281 0022 002B     		cmp	r3, #0
 2282 0024 0ED0     		beq	.L111
 813:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 2283              		.loc 1 813 13 discriminator 1
 2284 0026 FB68     		ldr	r3, [r7, #12]
 2285 0028 1B78     		ldrb	r3, [r3]
 2286 002a DBB2     		uxtb	r3, r3
 812:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 2287              		.loc 1 812 42 discriminator 1
 2288 002c 0B2B     		cmp	r3, #11
 2289 002e 09D1     		bne	.L111
 814:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (MSC_Handle->unit[lun].state != MSC_IDLE))
 2290              		.loc 1 814 29
 2291 0030 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2292 0032 7A69     		ldr	r2, [r7, #20]
 2293 0034 3421     		movs	r1, #52
 2294 0036 01FB03F3 		mul	r3, r1, r3
 2295 003a 1344     		add	r3, r3, r2
 2296 003c 9033     		adds	r3, r3, #144
 2297 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 813:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       (phost->gState != HOST_CLASS) ||
 2298              		.loc 1 813 37
 2299 0040 012B     		cmp	r3, #1
 2300 0042 01D0     		beq	.L112
 2301              	.L111:
 815:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 816:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     return  USBH_FAIL;
 2302              		.loc 1 816 13
ARM GAS  /tmp/cc5Cbh8K.s 			page 58


 2303 0044 0223     		movs	r3, #2
 2304 0046 40E0     		b	.L113
 2305              	.L112:
 817:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 818:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 819:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_WRITE;
 2306              		.loc 1 819 21
 2307 0048 7B69     		ldr	r3, [r7, #20]
 2308 004a 0722     		movs	r2, #7
 2309 004c 1A73     		strb	r2, [r3, #12]
 820:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->unit[lun].state = MSC_WRITE;
 2310              		.loc 1 820 24
 2311 004e FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2312              		.loc 1 820 31
 2313 0050 7A69     		ldr	r2, [r7, #20]
 2314 0052 3421     		movs	r1, #52
 2315 0054 01FB03F3 		mul	r3, r1, r3
 2316 0058 1344     		add	r3, r3, r2
 2317 005a 9033     		adds	r3, r3, #144
 2318 005c 0722     		movs	r2, #7
 2319 005e 1A70     		strb	r2, [r3]
 821:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->rw_lun = lun;
 2320              		.loc 1 821 22
 2321 0060 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2322 0062 9AB2     		uxth	r2, r3
 2323 0064 7B69     		ldr	r3, [r7, #20]
 2324 0066 A3F8FA20 		strh	r2, [r3, #250]	@ movhi
 822:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 823:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   USBH_MSC_SCSI_Write(phost, lun, address, pbuf, length);
 2325              		.loc 1 823 3
 2326 006a F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
 2327 006c 3B6A     		ldr	r3, [r7, #32]
 2328 006e 0093     		str	r3, [sp]
 2329 0070 3B68     		ldr	r3, [r7]
 2330 0072 7A68     		ldr	r2, [r7, #4]
 2331 0074 F868     		ldr	r0, [r7, #12]
 2332 0076 FFF7FEFF 		bl	USBH_MSC_SCSI_Write
 824:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** 
 825:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   timeout = phost->Timer;
 2333              		.loc 1 825 11
 2334 007a FB68     		ldr	r3, [r7, #12]
 2335 007c D3F8C434 		ldr	r3, [r3, #1220]
 2336 0080 3B61     		str	r3, [r7, #16]
 826:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   while (USBH_MSC_RdWrProcess(phost, lun) == USBH_BUSY)
 2337              		.loc 1 826 9
 2338 0082 16E0     		b	.L114
 2339              	.L116:
 827:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 828:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     if (((phost->Timer - timeout) > (10000U * length)) || (phost->device.is_connected == 0U))
 2340              		.loc 1 828 16
 2341 0084 FB68     		ldr	r3, [r7, #12]
 2342 0086 D3F8C424 		ldr	r2, [r3, #1220]
 2343              		.loc 1 828 24
 2344 008a 3B69     		ldr	r3, [r7, #16]
 2345 008c D21A     		subs	r2, r2, r3
 2346              		.loc 1 828 45
 2347 008e 3B6A     		ldr	r3, [r7, #32]
ARM GAS  /tmp/cc5Cbh8K.s 			page 59


 2348 0090 42F21071 		movw	r1, #10000
 2349 0094 01FB03F3 		mul	r3, r1, r3
 2350              		.loc 1 828 8
 2351 0098 9A42     		cmp	r2, r3
 2352 009a 05D8     		bhi	.L115
 2353              		.loc 1 828 73 discriminator 1
 2354 009c FB68     		ldr	r3, [r7, #12]
 2355 009e 93F82034 		ldrb	r3, [r3, #1056]
 2356 00a2 DBB2     		uxtb	r3, r3
 2357              		.loc 1 828 56 discriminator 1
 2358 00a4 002B     		cmp	r3, #0
 2359 00a6 04D1     		bne	.L114
 2360              	.L115:
 829:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     {
 830:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       MSC_Handle->state = MSC_IDLE;
 2361              		.loc 1 830 25
 2362 00a8 7B69     		ldr	r3, [r7, #20]
 2363 00aa 0122     		movs	r2, #1
 2364 00ac 1A73     		strb	r2, [r3, #12]
 831:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****       return USBH_FAIL;
 2365              		.loc 1 831 14
 2366 00ae 0223     		movs	r3, #2
 2367 00b0 0BE0     		b	.L113
 2368              	.L114:
 826:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 2369              		.loc 1 826 10
 2370 00b2 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 2371 00b4 1946     		mov	r1, r3
 2372 00b6 F868     		ldr	r0, [r7, #12]
 2373 00b8 FFF7FEFF 		bl	USBH_MSC_RdWrProcess
 2374 00bc 0346     		mov	r3, r0
 826:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   {
 2375              		.loc 1 826 9
 2376 00be 012B     		cmp	r3, #1
 2377 00c0 E0D0     		beq	.L116
 832:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****     }
 833:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   }
 834:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   MSC_Handle->state = MSC_IDLE;
 2378              		.loc 1 834 21
 2379 00c2 7B69     		ldr	r3, [r7, #20]
 2380 00c4 0122     		movs	r2, #1
 2381 00c6 1A73     		strb	r2, [r3, #12]
 835:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c ****   return USBH_OK;
 2382              		.loc 1 835 10
 2383 00c8 0023     		movs	r3, #0
 2384              	.L113:
 836:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc.c **** }
 2385              		.loc 1 836 1
 2386 00ca 1846     		mov	r0, r3
 2387 00cc 1837     		adds	r7, r7, #24
 2388              	.LCFI62:
 2389              		.cfi_def_cfa_offset 8
 2390 00ce BD46     		mov	sp, r7
 2391              	.LCFI63:
 2392              		.cfi_def_cfa_register 13
 2393              		@ sp needed
 2394 00d0 80BD     		pop	{r7, pc}
ARM GAS  /tmp/cc5Cbh8K.s 			page 60


 2395              		.cfi_endproc
 2396              	.LFE349:
 2398              		.text
 2399              	.Letext0:
 2400              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 2401              		.file 3 "./Libraries/CMSIS/Core/Include/core_cm7.h"
 2402              		.file 4 "./Libraries/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 2403              		.file 5 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 2404              		.file 6 "/usr/include/newlib/sys/_types.h"
 2405              		.file 7 "/usr/include/newlib/sys/reent.h"
 2406              		.file 8 "/usr/include/newlib/sys/lock.h"
 2407              		.file 9 "/usr/include/newlib/math.h"
 2408              		.file 10 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 2409              		.file 11 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 2410              		.file 12 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 2411              		.file 13 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 2412              		.file 14 "/usr/include/newlib/stdlib.h"
 2413              		.file 15 "./Libraries/FreeRTOS/Source/CMSIS_RTOS/cmsis_os2.h"
 2414              		.file 16 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 2415              		.file 17 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 2416              		.file 18 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_bot.h"
 2417              		.file 19 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_scsi.h"
 2418              		.file 20 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
ARM GAS  /tmp/cc5Cbh8K.s 			page 61


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbh_msc.c
     /tmp/cc5Cbh8K.s:25     .data.USBH_msc:0000000000000000 USBH_msc
     /tmp/cc5Cbh8K.s:18     .rodata:0000000000000000 $d
     /tmp/cc5Cbh8K.s:22     .data.USBH_msc:0000000000000000 $d
     /tmp/cc5Cbh8K.s:43     .text.USBH_MSC_InterfaceInit:0000000000000000 USBH_MSC_InterfaceInit
     /tmp/cc5Cbh8K.s:362    .text.USBH_MSC_InterfaceDeInit:0000000000000000 USBH_MSC_InterfaceDeInit
     /tmp/cc5Cbh8K.s:476    .text.USBH_MSC_ClassRequest:0000000000000000 USBH_MSC_ClassRequest
     /tmp/cc5Cbh8K.s:650    .text.USBH_MSC_Process:0000000000000000 USBH_MSC_Process
     /tmp/cc5Cbh8K.s:1431   .text.USBH_MSC_SOFProcess:0000000000000000 USBH_MSC_SOFProcess
     /tmp/cc5Cbh8K.s:36     .text.USBH_MSC_InterfaceInit:0000000000000000 $t
     /tmp/cc5Cbh8K.s:356    .text.USBH_MSC_InterfaceDeInit:0000000000000000 $t
     /tmp/cc5Cbh8K.s:470    .text.USBH_MSC_ClassRequest:0000000000000000 $t
     /tmp/cc5Cbh8K.s:644    .text.USBH_MSC_Process:0000000000000000 $t
     /tmp/cc5Cbh8K.s:734    .text.USBH_MSC_Process:000000000000007c $d
     /tmp/cc5Cbh8K.s:743    .text.USBH_MSC_Process:00000000000000a0 $t
     /tmp/cc5Cbh8K.s:1425   .text.USBH_MSC_SOFProcess:0000000000000000 $t
     /tmp/cc5Cbh8K.s:1469   .text.USBH_MSC_RdWrProcess:0000000000000000 $t
     /tmp/cc5Cbh8K.s:1475   .text.USBH_MSC_RdWrProcess:0000000000000000 USBH_MSC_RdWrProcess
     /tmp/cc5Cbh8K.s:1785   .text.USBH_MSC_IsReady:0000000000000000 $t
     /tmp/cc5Cbh8K.s:1792   .text.USBH_MSC_IsReady:0000000000000000 USBH_MSC_IsReady
     /tmp/cc5Cbh8K.s:1858   .text.USBH_MSC_GetMaxLUN:0000000000000000 $t
     /tmp/cc5Cbh8K.s:1865   .text.USBH_MSC_GetMaxLUN:0000000000000000 USBH_MSC_GetMaxLUN
     /tmp/cc5Cbh8K.s:1928   .text.USBH_MSC_UnitIsReady:0000000000000000 $t
     /tmp/cc5Cbh8K.s:1935   .text.USBH_MSC_UnitIsReady:0000000000000000 USBH_MSC_UnitIsReady
     /tmp/cc5Cbh8K.s:2008   .text.USBH_MSC_GetLUNInfo:0000000000000000 $t
     /tmp/cc5Cbh8K.s:2015   .text.USBH_MSC_GetLUNInfo:0000000000000000 USBH_MSC_GetLUNInfo
     /tmp/cc5Cbh8K.s:2083   .text.USBH_MSC_Read:0000000000000000 $t
     /tmp/cc5Cbh8K.s:2090   .text.USBH_MSC_Read:0000000000000000 USBH_MSC_Read
     /tmp/cc5Cbh8K.s:2241   .text.USBH_MSC_Write:0000000000000000 $t
     /tmp/cc5Cbh8K.s:2248   .text.USBH_MSC_Write:0000000000000000 USBH_MSC_Write

UNDEFINED SYMBOLS
USBH_FindInterface
USBH_SelectInterface
pvPortMalloc
memset
USBH_AllocPipe
USBH_MSC_BOT_Init
USBH_OpenPipe
USBH_LL_SetToggle
USBH_ClosePipe
USBH_FreePipe
vPortFree
USBH_MSC_BOT_REQ_GetMaxLUN
USBH_ClrFeature
USBH_MSC_SCSI_Inquiry
USBH_MSC_SCSI_TestUnitReady
USBH_MSC_SCSI_ReadCapacity
USBH_MSC_SCSI_RequestSense
osMessageQueuePut
USBH_MSC_SCSI_Read
USBH_MSC_SCSI_Write
memcpy
