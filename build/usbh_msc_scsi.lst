ARM GAS  /tmp/ccq9Yqm5.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 2
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"usbh_msc_scsi.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.USBH_MSC_SCSI_TestUnitReady,"ax",%progbits
  17              		.align	1
  18              		.p2align 2,,3
  19              		.global	USBH_MSC_SCSI_TestUnitReady
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv5-d16
  26              	USBH_MSC_SCSI_TestUnitReady:
  27              	.LVL0:
  28              	.LFB338:
  29              		.file 1 "./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c"
   1:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
   2:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   ******************************************************************************
   3:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @file    usbh_msc_scsi.c
   4:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @author  MCD Application Team
   5:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief   This file implements the SCSI commands
   6:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   ******************************************************************************
   7:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @attention
   8:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *
   9:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * <h2><center>&copy; Copyright (c) 2015 STMicroelectronics.
  10:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * All rights reserved.</center></h2>
  11:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *
  12:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * This software component is licensed by ST under Ultimate Liberty license
  13:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * SLA0044, the "License"; You may not use this file except in compliance with
  14:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * the License. You may obtain a copy of the License at:
  15:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *                      www.st.com/SLA0044
  16:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *
  17:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   ******************************************************************************
  18:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  19:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  20:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /* BSPDependencies
  21:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** - "stm32xxxxx_{eval}{discovery}{nucleo_144}.c"
  22:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** - "stm32xxxxx_{eval}{discovery}_io.c"
  23:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** - "stm32xxxxx_{eval}{discovery}{adafruit}_lcd.c"
  24:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** - "stm32xxxxx_{eval}{discovery}_sdram.c"
  25:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** EndBSPDependencies */
  26:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  27:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /* Includes ------------------------------------------------------------------*/
  28:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** #include "usbh_msc.h"
  29:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** #include "usbh_msc_scsi.h"
ARM GAS  /tmp/ccq9Yqm5.s 			page 2


  30:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** #include "usbh_msc_bot.h"
  31:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  32:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  33:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @addtogroup USBH_LIB
  34:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  35:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  36:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  37:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @addtogroup USBH_CLASS
  38:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  39:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  40:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  41:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @addtogroup USBH_MSC_CLASS
  42:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  43:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  44:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  45:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @defgroup USBH_MSC_SCSI
  46:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief    This file includes the mass storage related functions
  47:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  48:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  49:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  50:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  51:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @defgroup USBH_MSC_SCSI_Private_TypesDefinitions
  52:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  53:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  54:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  55:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
  56:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @}
  57:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  58:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  59:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @defgroup USBH_MSC_SCSI_Private_Defines
  60:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  61:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  62:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
  63:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @}
  64:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  65:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  66:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @defgroup USBH_MSC_SCSI_Private_Macros
  67:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  68:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  69:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
  70:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @}
  71:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  72:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  73:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  74:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @defgroup USBH_MSC_SCSI_Private_FunctionPrototypes
  75:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  76:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  77:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
  78:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @}
  79:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  80:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  81:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  82:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @defgroup USBH_MSC_SCSI_Exported_Variables
  83:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  84:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  85:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  86:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
ARM GAS  /tmp/ccq9Yqm5.s 			page 3


  87:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @}
  88:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  89:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  90:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  91:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /** @defgroup USBH_MSC_SCSI_Private_Functions
  92:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @{
  93:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
  94:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  95:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  96:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
  97:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief  USBH_MSC_SCSI_TestUnitReady
  98:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *         Issue TestUnitReady command.
  99:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  phost: Host handle
 100:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  lun: Logical Unit Number
 101:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @retval USBH Status
 102:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
 103:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** USBH_StatusTypeDef USBH_MSC_SCSI_TestUnitReady(USBH_HandleTypeDef *phost,
 104:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                                uint8_t lun)
 105:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** {
  30              		.loc 1 105 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
 106:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
  35              		.loc 1 106 3 view .LVU1
 107:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
  36              		.loc 1 107 3 view .LVU2
  37              		.loc 1 107 22 is_stmt 0 view .LVU3
  38 0000 D0F87C34 		ldr	r3, [r0, #1148]
  39 0004 DB69     		ldr	r3, [r3, #28]
  40              	.LVL1:
 108:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 109:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   switch (MSC_Handle->hbot.cmd_state)
  41              		.loc 1 109 3 is_stmt 1 view .LVU4
  42              		.loc 1 109 27 is_stmt 0 view .LVU5
  43 0006 93F85220 		ldrb	r2, [r3, #82]	@ zero_extendqisi2
  44              		.loc 1 109 3 view .LVU6
  45 000a 012A     		cmp	r2, #1
  46 000c 06D0     		beq	.L2
  47 000e 022A     		cmp	r2, #2
  48 0010 01D1     		bne	.L9
 110:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 111:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_SEND:
 112:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 113:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Prepare the CBW and relevent field*/
 114:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.DataTransferLength = DATA_LEN_MODE_TEST_UNIT_READY;
 115:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
 116:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 117:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 118:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       USBH_memset(MSC_Handle->hbot.cbw.field.CB, 0, CBW_CB_LENGTH);
 119:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_TEST_UNIT_READY;
 120:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 121:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.state = BOT_SEND_CBW;
 122:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 123:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 124:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
ARM GAS  /tmp/ccq9Yqm5.s 			page 4


 125:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 126:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_WAIT:
 127:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_MSC_BOT_Process(phost, lun);
  49              		.loc 1 127 7 is_stmt 1 view .LVU7
  50              		.loc 1 127 15 is_stmt 0 view .LVU8
  51 0012 FFF7FEBF 		b	USBH_MSC_BOT_Process
  52              	.LVL2:
  53              	.L9:
 109:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
  54              		.loc 1 109 3 view .LVU9
  55 0016 0222     		movs	r2, #2
  56              	.LVL3:
 128:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 129:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 130:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     default:
 131:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 132:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   }
 133:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 134:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   return error;
  57              		.loc 1 134 3 is_stmt 1 view .LVU10
 135:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
  58              		.loc 1 135 1 is_stmt 0 view .LVU11
  59 0018 1046     		mov	r0, r2
  60              	.LVL4:
  61              		.loc 1 135 1 view .LVU12
  62 001a 7047     		bx	lr
  63              	.LVL5:
  64              	.L2:
 114:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
  65              		.loc 1 114 7 is_stmt 1 view .LVU13
 114:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
  66              		.loc 1 114 53 is_stmt 0 view .LVU14
  67 001c 0021     		movs	r1, #0
  68              	.LVL6:
 122:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
  69              		.loc 1 122 34 view .LVU15
  70 001e 0220     		movs	r0, #2
  71              	.LVL7:
 105:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
  72              		.loc 1 105 1 view .LVU16
  73 0020 10B4     		push	{r4}
  74              	.LCFI0:
  75              		.cfi_def_cfa_offset 4
  76              		.cfi_offset 4, -4
 116:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  77              		.loc 1 116 43 view .LVU17
  78 0022 0A24     		movs	r4, #10
 118:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_TEST_UNIT_READY;
  79              		.loc 1 118 7 view .LVU18
  80 0024 C3F86310 		str	r1, [r3, #99]	@ unaligned
 122:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
  81              		.loc 1 122 34 view .LVU19
  82 0028 83F85200 		strb	r0, [r3, #82]
  83              		.loc 1 135 1 view .LVU20
  84 002c 1046     		mov	r0, r2
 121:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
  85              		.loc 1 121 30 view .LVU21
ARM GAS  /tmp/ccq9Yqm5.s 			page 5


  86 002e 83F85020 		strb	r2, [r3, #80]
 118:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_TEST_UNIT_READY;
  87              		.loc 1 118 7 view .LVU22
  88 0032 C3F86710 		str	r1, [r3, #103]	@ unaligned
  89 0036 C3F86B10 		str	r1, [r3, #107]	@ unaligned
  90 003a C3F86F10 		str	r1, [r3, #111]	@ unaligned
 116:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
  91              		.loc 1 116 43 view .LVU23
  92 003e A3F86240 		strh	r4, [r3, #98]	@ movhi
 114:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
  93              		.loc 1 114 53 view .LVU24
  94 0042 D965     		str	r1, [r3, #92]
 115:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
  95              		.loc 1 115 7 is_stmt 1 view .LVU25
  96              		.loc 1 135 1 is_stmt 0 view .LVU26
  97 0044 5DF8044B 		ldr	r4, [sp], #4
  98              	.LCFI1:
  99              		.cfi_restore 4
 100              		.cfi_def_cfa_offset 0
 115:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 101              		.loc 1 115 40 view .LVU27
 102 0048 83F86010 		strb	r1, [r3, #96]
 116:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 103              		.loc 1 116 7 is_stmt 1 view .LVU28
 118:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_TEST_UNIT_READY;
 104              		.loc 1 118 7 view .LVU29
 119:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 105              		.loc 1 119 7 view .LVU30
 121:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 106              		.loc 1 121 7 view .LVU31
 122:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 107              		.loc 1 122 7 view .LVU32
 123:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 108              		.loc 1 123 7 view .LVU33
 109              	.LVL8:
 124:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 110              		.loc 1 124 7 view .LVU34
 134:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 111              		.loc 1 134 3 view .LVU35
 112              		.loc 1 135 1 is_stmt 0 view .LVU36
 113 004c 7047     		bx	lr
 114              		.cfi_endproc
 115              	.LFE338:
 117 004e 00BF     		.section	.text.USBH_MSC_SCSI_ReadCapacity,"ax",%progbits
 118              		.align	1
 119              		.p2align 2,,3
 120              		.global	USBH_MSC_SCSI_ReadCapacity
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
 124              		.fpu fpv5-d16
 126              	USBH_MSC_SCSI_ReadCapacity:
 127              	.LVL9:
 128              	.LFB339:
 136:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 137:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
 138:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief  USBH_MSC_SCSI_ReadCapacity
ARM GAS  /tmp/ccq9Yqm5.s 			page 6


 139:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *         Issue Read Capacity command.
 140:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  phost: Host handle
 141:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  lun: Logical Unit Number
 142:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  capacity: pointer to the capacity structure
 143:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @retval USBH Status
 144:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
 145:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** USBH_StatusTypeDef USBH_MSC_SCSI_ReadCapacity(USBH_HandleTypeDef *phost,
 146:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                               uint8_t lun,
 147:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                               SCSI_CapacityTypeDef *capacity)
 148:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** {
 129              		.loc 1 148 1 is_stmt 1 view -0
 130              		.cfi_startproc
 131              		@ args = 0, pretend = 0, frame = 0
 132              		@ frame_needed = 0, uses_anonymous_args = 0
 149:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_BUSY ;
 133              		.loc 1 149 3 view .LVU38
 150:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 134              		.loc 1 150 3 view .LVU39
 148:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_BUSY ;
 135              		.loc 1 148 1 is_stmt 0 view .LVU40
 136 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 137              	.LCFI2:
 138              		.cfi_def_cfa_offset 24
 139              		.cfi_offset 3, -24
 140              		.cfi_offset 4, -20
 141              		.cfi_offset 5, -16
 142              		.cfi_offset 6, -12
 143              		.cfi_offset 7, -8
 144              		.cfi_offset 14, -4
 145              		.loc 1 150 22 view .LVU41
 146 0002 D0F87C34 		ldr	r3, [r0, #1148]
 147 0006 DC69     		ldr	r4, [r3, #28]
 148              	.LVL10:
 151:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 152:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   switch (MSC_Handle->hbot.cmd_state)
 149              		.loc 1 152 3 is_stmt 1 view .LVU42
 150              		.loc 1 152 27 is_stmt 0 view .LVU43
 151 0008 94F85230 		ldrb	r3, [r4, #82]	@ zero_extendqisi2
 152              		.loc 1 152 3 view .LVU44
 153 000c 012B     		cmp	r3, #1
 154 000e 13D0     		beq	.L11
 155 0010 022B     		cmp	r3, #2
 156 0012 0ED1     		bne	.L15
 153:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 154:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_SEND:
 155:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 156:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Prepare the CBW and relevent field*/
 157:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.DataTransferLength = DATA_LEN_READ_CAPACITY10;
 158:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 159:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 160:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 161:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       USBH_memset(MSC_Handle->hbot.cbw.field.CB, 0, CBW_CB_LENGTH);
 162:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ_CAPACITY10;
 163:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 164:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.state = BOT_SEND_CBW;
 165:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 166:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
ARM GAS  /tmp/ccq9Yqm5.s 			page 7


 167:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 168:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 169:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 170:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 171:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_WAIT:
 172:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 173:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_MSC_BOT_Process(phost, lun);
 157              		.loc 1 173 7 is_stmt 1 view .LVU45
 158 0014 1546     		mov	r5, r2
 159              		.loc 1 173 15 is_stmt 0 view .LVU46
 160 0016 FFF7FEFF 		bl	USBH_MSC_BOT_Process
 161              	.LVL11:
 174:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 175:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       if (error == USBH_OK)
 162              		.loc 1 175 7 is_stmt 1 view .LVU47
 163              		.loc 1 175 10 is_stmt 0 view .LVU48
 164 001a 0346     		mov	r3, r0
 165 001c 38B9     		cbnz	r0, .L13
 176:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       {
 177:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         /*assign the capacity*/
 178:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         capacity->block_nbr = MSC_Handle->hbot.pbuf[3] | ((uint32_t)MSC_Handle->hbot.pbuf[2] << 8U)
 166              		.loc 1 178 9 is_stmt 1 view .LVU49
 167              		.loc 1 178 47 is_stmt 0 view .LVU50
 168 001e D4F88C10 		ldr	r1, [r4, #140]
 169 0022 0A68     		ldr	r2, [r1]	@ unaligned
 170 0024 12BA     		rev	r2, r2
 171              		.loc 1 178 29 view .LVU51
 172 0026 2A60     		str	r2, [r5]
 179:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                               ((uint32_t)MSC_Handle->hbot.pbuf[1] << 16U) | ((uint32_t)MSC_Handle->
 180:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 181:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         /*assign the page length*/
 182:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         capacity->block_size = (uint16_t)(MSC_Handle->hbot.pbuf[7] | ((uint32_t)MSC_Handle->hbot.pb
 173              		.loc 1 182 9 is_stmt 1 view .LVU52
 174              		.loc 1 182 30 is_stmt 0 view .LVU53
 175 0028 CA88     		ldrh	r2, [r1, #6]	@ unaligned
 176 002a 52BA     		rev16	r2, r2
 177 002c AA80     		strh	r2, [r5, #4]	@ movhi
 178              	.L13:
 179              	.LVL12:
 183:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       }
 184:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 185:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 186:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     default:
 187:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 188:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   }
 189:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 190:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   return error;
 180              		.loc 1 190 3 is_stmt 1 view .LVU54
 191:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 181              		.loc 1 191 1 is_stmt 0 view .LVU55
 182 002e 1846     		mov	r0, r3
 183 0030 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 184              	.LVL13:
 185              	.L15:
 152:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 186              		.loc 1 152 3 view .LVU56
 187 0032 0123     		movs	r3, #1
ARM GAS  /tmp/ccq9Yqm5.s 			page 8


 188              	.LVL14:
 190:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 189              		.loc 1 190 3 is_stmt 1 view .LVU57
 190              		.loc 1 191 1 is_stmt 0 view .LVU58
 191 0034 1846     		mov	r0, r3
 192              	.LVL15:
 193              		.loc 1 191 1 view .LVU59
 194 0036 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 195              	.LVL16:
 196              	.L11:
 157:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 197              		.loc 1 157 7 is_stmt 1 view .LVU60
 161:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ_CAPACITY10;
 198              		.loc 1 161 7 is_stmt 0 view .LVU61
 199 0038 0022     		movs	r2, #0
 200              	.LVL17:
 157:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 201              		.loc 1 157 53 view .LVU62
 202 003a 0827     		movs	r7, #8
 158:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 203              		.loc 1 158 40 view .LVU63
 204 003c 8026     		movs	r6, #128
 159:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 205              		.loc 1 159 43 view .LVU64
 206 003e 42F20A55 		movw	r5, #9482
 166:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 207              		.loc 1 166 34 view .LVU65
 208 0042 0220     		movs	r0, #2
 209              	.LVL18:
 167:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 210              		.loc 1 167 50 view .LVU66
 211 0044 04F11001 		add	r1, r4, #16
 212              	.LVL19:
 161:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ_CAPACITY10;
 213              		.loc 1 161 7 view .LVU67
 214 0048 C4F86320 		str	r2, [r4, #99]	@ unaligned
 166:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 215              		.loc 1 166 34 view .LVU68
 216 004c 84F85200 		strb	r0, [r4, #82]
 217              		.loc 1 191 1 view .LVU69
 218 0050 1846     		mov	r0, r3
 164:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 219              		.loc 1 164 30 view .LVU70
 220 0052 84F85030 		strb	r3, [r4, #80]
 161:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ_CAPACITY10;
 221              		.loc 1 161 7 view .LVU71
 222 0056 C4F86720 		str	r2, [r4, #103]	@ unaligned
 223 005a C4F86B20 		str	r2, [r4, #107]	@ unaligned
 224 005e C4F86F20 		str	r2, [r4, #111]	@ unaligned
 157:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 225              		.loc 1 157 53 view .LVU72
 226 0062 E765     		str	r7, [r4, #92]
 158:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 227              		.loc 1 158 7 is_stmt 1 view .LVU73
 158:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 228              		.loc 1 158 40 is_stmt 0 view .LVU74
 229 0064 84F86060 		strb	r6, [r4, #96]
ARM GAS  /tmp/ccq9Yqm5.s 			page 9


 159:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 230              		.loc 1 159 7 is_stmt 1 view .LVU75
 161:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ_CAPACITY10;
 231              		.loc 1 161 7 view .LVU76
 162:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 232              		.loc 1 162 7 view .LVU77
 159:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 233              		.loc 1 159 43 is_stmt 0 view .LVU78
 234 0068 A4F86250 		strh	r5, [r4, #98]	@ movhi
 164:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 235              		.loc 1 164 7 is_stmt 1 view .LVU79
 166:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 236              		.loc 1 166 7 view .LVU80
 167:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 237              		.loc 1 167 7 view .LVU81
 167:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 238              		.loc 1 167 29 is_stmt 0 view .LVU82
 239 006c C4F88C10 		str	r1, [r4, #140]
 168:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 240              		.loc 1 168 7 is_stmt 1 view .LVU83
 169:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 241              		.loc 1 169 7 view .LVU84
 242              	.LVL20:
 190:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 243              		.loc 1 190 3 view .LVU85
 244              		.loc 1 191 1 is_stmt 0 view .LVU86
 245 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 246              		.loc 1 191 1 view .LVU87
 247              		.cfi_endproc
 248              	.LFE339:
 250 0072 00BF     		.section	.text.USBH_MSC_SCSI_Inquiry,"ax",%progbits
 251              		.align	1
 252              		.p2align 2,,3
 253              		.global	USBH_MSC_SCSI_Inquiry
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 257              		.fpu fpv5-d16
 259              	USBH_MSC_SCSI_Inquiry:
 260              	.LVL21:
 261              	.LFB340:
 192:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 193:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
 194:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief  USBH_MSC_SCSI_Inquiry
 195:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *         Issue Inquiry command.
 196:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  phost: Host handle
 197:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  lun: Logical Unit Number
 198:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  capacity: pointer to the inquiry structure
 199:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @retval USBH Status
 200:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
 201:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** USBH_StatusTypeDef USBH_MSC_SCSI_Inquiry(USBH_HandleTypeDef *phost, uint8_t lun,
 202:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                          SCSI_StdInquiryDataTypeDef *inquiry)
 203:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** {
 262              		.loc 1 203 1 is_stmt 1 view -0
 263              		.cfi_startproc
 264              		@ args = 0, pretend = 0, frame = 0
 265              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccq9Yqm5.s 			page 10


 204:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef error = USBH_FAIL;
 266              		.loc 1 204 3 view .LVU89
 205:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 267              		.loc 1 205 3 view .LVU90
 203:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef error = USBH_FAIL;
 268              		.loc 1 203 1 is_stmt 0 view .LVU91
 269 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 270              	.LCFI3:
 271              		.cfi_def_cfa_offset 24
 272              		.cfi_offset 3, -24
 273              		.cfi_offset 4, -20
 274              		.cfi_offset 5, -16
 275              		.cfi_offset 6, -12
 276              		.cfi_offset 7, -8
 277              		.cfi_offset 14, -4
 278              		.loc 1 205 22 view .LVU92
 279 0002 D0F87C44 		ldr	r4, [r0, #1148]
 280 0006 E469     		ldr	r4, [r4, #28]
 281              	.LVL22:
 206:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 207:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   switch (MSC_Handle->hbot.cmd_state)
 282              		.loc 1 207 3 is_stmt 1 view .LVU93
 283              		.loc 1 207 27 is_stmt 0 view .LVU94
 284 0008 94F85250 		ldrb	r5, [r4, #82]	@ zero_extendqisi2
 285              		.loc 1 207 3 view .LVU95
 286 000c 012D     		cmp	r5, #1
 287 000e 0BD0     		beq	.L17
 288 0010 022D     		cmp	r5, #2
 289 0012 06D1     		bne	.L21
 208:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 209:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_SEND:
 210:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 211:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Prepare the CBW and relevent field*/
 212:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.DataTransferLength = DATA_LEN_INQUIRY;
 213:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 214:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 215:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 216:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       USBH_memset(MSC_Handle->hbot.cbw.field.CB, 0, CBW_LENGTH);
 217:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_INQUIRY;
 218:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[1]  = (lun << 5);
 219:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
 220:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = 0U;
 221:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = 0x24U;
 222:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = 0U;
 223:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 224:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.state = BOT_SEND_CBW;
 225:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 226:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 227:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 228:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 229:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 230:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 231:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_WAIT:
 232:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 233:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_MSC_BOT_Process(phost, lun);
 290              		.loc 1 233 7 is_stmt 1 view .LVU96
 291 0014 1646     		mov	r6, r2
ARM GAS  /tmp/ccq9Yqm5.s 			page 11


 292              		.loc 1 233 15 is_stmt 0 view .LVU97
 293 0016 FFF7FEFF 		bl	USBH_MSC_BOT_Process
 294              	.LVL23:
 234:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 235:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       if (error == USBH_OK)
 295              		.loc 1 235 7 is_stmt 1 view .LVU98
 296              		.loc 1 235 10 is_stmt 0 view .LVU99
 297 001a 0546     		mov	r5, r0
 298 001c 30B3     		cbz	r0, .L22
 299              	.LVL24:
 236:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       {
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memset(inquiry, 0, sizeof(SCSI_StdInquiryDataTypeDef));
 238:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         /*assign Inquiry Data */
 239:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         inquiry->DeviceType = MSC_Handle->hbot.pbuf[0] & 0x1FU;
 240:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         inquiry->PeripheralQualifier = MSC_Handle->hbot.pbuf[0] >> 5U;
 241:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 242:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         if (((uint32_t)MSC_Handle->hbot.pbuf[1] & 0x80U) == 0x80U)
 243:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         {
 244:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****           inquiry->RemovableMedia = 1U;
 245:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         }
 246:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         else
 247:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         {
 248:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****           inquiry->RemovableMedia = 0U;
 249:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         }
 250:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 251:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->vendor_id, &MSC_Handle->hbot.pbuf[8], 8U);
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->product_id, &MSC_Handle->hbot.pbuf[16], 16U);
 253:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->revision_id, &MSC_Handle->hbot.pbuf[32], 4U);
 254:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       }
 255:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 256:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 257:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     default:
 258:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 259:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   }
 260:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 261:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   return error;
 300              		.loc 1 261 3 is_stmt 1 view .LVU100
 262:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 301              		.loc 1 262 1 is_stmt 0 view .LVU101
 302 001e 2846     		mov	r0, r5
 303 0020 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 304              	.LVL25:
 305              	.L21:
 207:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 306              		.loc 1 207 3 view .LVU102
 307 0022 0225     		movs	r5, #2
 308              	.LVL26:
 261:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 309              		.loc 1 261 3 is_stmt 1 view .LVU103
 310              		.loc 1 262 1 is_stmt 0 view .LVU104
 311 0024 2846     		mov	r0, r5
 312              	.LVL27:
 313              		.loc 1 262 1 view .LVU105
 314 0026 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 315              	.LVL28:
 316              	.L17:
 212:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
ARM GAS  /tmp/ccq9Yqm5.s 			page 12


 317              		.loc 1 212 7 is_stmt 1 view .LVU106
 218:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
 318              		.loc 1 218 48 is_stmt 0 view .LVU107
 319 0028 4901     		lsls	r1, r1, #5
 320              	.LVL29:
 213:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 321              		.loc 1 213 40 view .LVU108
 322 002a 8022     		movs	r2, #128
 323              	.LVL30:
 216:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_INQUIRY;
 324              		.loc 1 216 7 view .LVU109
 325 002c 0023     		movs	r3, #0
 212:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 326              		.loc 1 212 53 view .LVU110
 327 002e 2427     		movs	r7, #36
 214:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 328              		.loc 1 214 43 view .LVU111
 329 0030 41F20A26 		movw	r6, #4618
 220:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = 0x24U;
 330              		.loc 1 220 41 view .LVU112
 331 0034 4FF41050 		mov	r0, #9216
 332              	.LVL31:
 218:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
 333              		.loc 1 218 41 view .LVU113
 334 0038 84F86410 		strb	r1, [r4, #100]
 226:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 335              		.loc 1 226 34 view .LVU114
 336 003c 0221     		movs	r1, #2
 213:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 337              		.loc 1 213 40 view .LVU115
 338 003e 84F86020 		strb	r2, [r4, #96]
 227:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 339              		.loc 1 227 50 view .LVU116
 340 0042 04F11002 		add	r2, r4, #16
 220:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = 0x24U;
 341              		.loc 1 220 41 view .LVU117
 342 0046 A4F86600 		strh	r0, [r4, #102]	@ movhi
 343              		.loc 1 262 1 view .LVU118
 344 004a 2846     		mov	r0, r5
 224:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 345              		.loc 1 224 30 view .LVU119
 346 004c 84F85050 		strb	r5, [r4, #80]
 212:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 347              		.loc 1 212 53 view .LVU120
 348 0050 E765     		str	r7, [r4, #92]
 213:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 349              		.loc 1 213 7 is_stmt 1 view .LVU121
 214:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 350              		.loc 1 214 7 view .LVU122
 216:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_INQUIRY;
 351              		.loc 1 216 7 view .LVU123
 352 0052 C4F86930 		str	r3, [r4, #105]	@ unaligned
 217:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[1]  = (lun << 5);
 353              		.loc 1 217 7 view .LVU124
 219:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = 0U;
 354              		.loc 1 219 41 is_stmt 0 view .LVU125
 355 0056 84F86530 		strb	r3, [r4, #101]
ARM GAS  /tmp/ccq9Yqm5.s 			page 13


 222:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 356              		.loc 1 222 41 view .LVU126
 357 005a 84F86830 		strb	r3, [r4, #104]
 214:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 358              		.loc 1 214 43 view .LVU127
 359 005e A4F86260 		strh	r6, [r4, #98]	@ movhi
 218:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
 360              		.loc 1 218 7 is_stmt 1 view .LVU128
 219:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = 0U;
 361              		.loc 1 219 7 view .LVU129
 220:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = 0x24U;
 362              		.loc 1 220 7 view .LVU130
 221:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = 0U;
 363              		.loc 1 221 7 view .LVU131
 222:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 364              		.loc 1 222 7 view .LVU132
 224:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 365              		.loc 1 224 7 view .LVU133
 226:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 366              		.loc 1 226 7 view .LVU134
 226:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 367              		.loc 1 226 34 is_stmt 0 view .LVU135
 368 0062 84F85210 		strb	r1, [r4, #82]
 227:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 369              		.loc 1 227 7 is_stmt 1 view .LVU136
 227:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 370              		.loc 1 227 29 is_stmt 0 view .LVU137
 371 0066 C4F88C20 		str	r2, [r4, #140]
 228:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 372              		.loc 1 228 7 is_stmt 1 view .LVU138
 373              	.LVL32:
 229:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 374              		.loc 1 229 7 view .LVU139
 261:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 375              		.loc 1 261 3 view .LVU140
 376              		.loc 1 262 1 is_stmt 0 view .LVU141
 377 006a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 378              	.LVL33:
 379              	.L22:
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         /*assign Inquiry Data */
 380              		.loc 1 237 9 is_stmt 1 view .LVU142
 381 006c 0146     		mov	r1, r0
 382 006e 2222     		movs	r2, #34
 383 0070 3046     		mov	r0, r6
 384              	.LVL34:
 237:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         /*assign Inquiry Data */
 385              		.loc 1 237 9 is_stmt 0 view .LVU143
 386 0072 FFF7FEFF 		bl	memset
 387              	.LVL35:
 239:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         inquiry->PeripheralQualifier = MSC_Handle->hbot.pbuf[0] >> 5U;
 388              		.loc 1 239 9 is_stmt 1 view .LVU144
 239:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         inquiry->PeripheralQualifier = MSC_Handle->hbot.pbuf[0] >> 5U;
 389              		.loc 1 239 52 is_stmt 0 view .LVU145
 390 0076 D4F88C30 		ldr	r3, [r4, #140]
 239:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         inquiry->PeripheralQualifier = MSC_Handle->hbot.pbuf[0] >> 5U;
 391              		.loc 1 239 56 view .LVU146
 392 007a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccq9Yqm5.s 			page 14


 393 007c 03F01F03 		and	r3, r3, #31
 239:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         inquiry->PeripheralQualifier = MSC_Handle->hbot.pbuf[0] >> 5U;
 394              		.loc 1 239 29 view .LVU147
 395 0080 7370     		strb	r3, [r6, #1]
 240:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 396              		.loc 1 240 9 is_stmt 1 view .LVU148
 240:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 397              		.loc 1 240 61 is_stmt 0 view .LVU149
 398 0082 D4F88C30 		ldr	r3, [r4, #140]
 240:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 399              		.loc 1 240 38 view .LVU150
 400 0086 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 401 0088 5B09     		lsrs	r3, r3, #5
 402 008a 3370     		strb	r3, [r6]
 242:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         {
 403              		.loc 1 242 9 is_stmt 1 view .LVU151
 242:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         {
 404              		.loc 1 242 45 is_stmt 0 view .LVU152
 405 008c D4F88C30 		ldr	r3, [r4, #140]
 242:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         {
 406              		.loc 1 242 12 view .LVU153
 407 0090 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 408 0092 DB09     		lsrs	r3, r3, #7
 409 0094 B370     		strb	r3, [r6, #2]
 251:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->product_id, &MSC_Handle->hbot.pbuf[16], 16U);
 410              		.loc 1 251 9 is_stmt 1 view .LVU154
 251:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->product_id, &MSC_Handle->hbot.pbuf[16], 16U);
 411              		.loc 1 251 41 is_stmt 0 view .LVU155
 412 0096 D4F88C30 		ldr	r3, [r4, #140]
 251:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->product_id, &MSC_Handle->hbot.pbuf[16], 16U);
 413              		.loc 1 251 9 view .LVU156
 414 009a 53F8082F 		ldr	r2, [r3, #8]!	@ unaligned
 415 009e 5B68     		ldr	r3, [r3, #4]	@ unaligned
 416 00a0 C6F80320 		str	r2, [r6, #3]	@ unaligned
 417 00a4 C6F80730 		str	r3, [r6, #7]	@ unaligned
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->revision_id, &MSC_Handle->hbot.pbuf[32], 4U);
 418              		.loc 1 252 9 is_stmt 1 view .LVU157
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->revision_id, &MSC_Handle->hbot.pbuf[32], 4U);
 419              		.loc 1 252 42 is_stmt 0 view .LVU158
 420 00a8 D4F88C30 		ldr	r3, [r4, #140]
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->revision_id, &MSC_Handle->hbot.pbuf[32], 4U);
 421              		.loc 1 252 9 view .LVU159
 422 00ac 53F8100F 		ldr	r0, [r3, #16]!	@ unaligned
 423 00b0 5968     		ldr	r1, [r3, #4]	@ unaligned
 424 00b2 9A68     		ldr	r2, [r3, #8]	@ unaligned
 425 00b4 DB68     		ldr	r3, [r3, #12]	@ unaligned
 426 00b6 F060     		str	r0, [r6, #12]	@ unaligned
 427              		.loc 1 262 1 view .LVU160
 428 00b8 2846     		mov	r0, r5
 252:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         USBH_memcpy(inquiry->revision_id, &MSC_Handle->hbot.pbuf[32], 4U);
 429              		.loc 1 252 9 view .LVU161
 430 00ba 3161     		str	r1, [r6, #16]	@ unaligned
 431 00bc 7261     		str	r2, [r6, #20]	@ unaligned
 432 00be B361     		str	r3, [r6, #24]	@ unaligned
 253:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       }
 433              		.loc 1 253 9 is_stmt 1 view .LVU162
 434 00c0 D4F88C30 		ldr	r3, [r4, #140]
ARM GAS  /tmp/ccq9Yqm5.s 			page 15


 435 00c4 1B6A     		ldr	r3, [r3, #32]	@ unaligned
 436 00c6 C6F81D30 		str	r3, [r6, #29]	@ unaligned
 437              	.LVL36:
 261:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 438              		.loc 1 261 3 view .LVU163
 439              		.loc 1 262 1 is_stmt 0 view .LVU164
 440 00ca F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 441              		.loc 1 262 1 view .LVU165
 442              		.cfi_endproc
 443              	.LFE340:
 445              		.section	.text.USBH_MSC_SCSI_RequestSense,"ax",%progbits
 446              		.align	1
 447              		.p2align 2,,3
 448              		.global	USBH_MSC_SCSI_RequestSense
 449              		.syntax unified
 450              		.thumb
 451              		.thumb_func
 452              		.fpu fpv5-d16
 454              	USBH_MSC_SCSI_RequestSense:
 455              	.LVL37:
 456              	.LFB341:
 263:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 264:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
 265:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief  USBH_MSC_SCSI_RequestSense
 266:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *         Issue RequestSense command.
 267:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  phost: Host handle
 268:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  lun: Logical Unit Number
 269:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  capacity: pointer to the sense data structure
 270:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @retval USBH Status
 271:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
 272:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** USBH_StatusTypeDef USBH_MSC_SCSI_RequestSense(USBH_HandleTypeDef *phost,
 273:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                               uint8_t lun,
 274:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                               SCSI_SenseTypeDef *sense_data)
 275:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** {
 457              		.loc 1 275 1 is_stmt 1 view -0
 458              		.cfi_startproc
 459              		@ args = 0, pretend = 0, frame = 0
 460              		@ frame_needed = 0, uses_anonymous_args = 0
 276:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 461              		.loc 1 276 3 view .LVU167
 277:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 462              		.loc 1 277 3 view .LVU168
 275:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 463              		.loc 1 275 1 is_stmt 0 view .LVU169
 464 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 465              	.LCFI4:
 466              		.cfi_def_cfa_offset 24
 467              		.cfi_offset 3, -24
 468              		.cfi_offset 4, -20
 469              		.cfi_offset 5, -16
 470              		.cfi_offset 6, -12
 471              		.cfi_offset 7, -8
 472              		.cfi_offset 14, -4
 473              		.loc 1 277 22 view .LVU170
 474 0002 D0F87C34 		ldr	r3, [r0, #1148]
 475 0006 DC69     		ldr	r4, [r3, #28]
 476              	.LVL38:
ARM GAS  /tmp/ccq9Yqm5.s 			page 16


 278:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 279:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   switch (MSC_Handle->hbot.cmd_state)
 477              		.loc 1 279 3 is_stmt 1 view .LVU171
 478              		.loc 1 279 27 is_stmt 0 view .LVU172
 479 0008 94F85230 		ldrb	r3, [r4, #82]	@ zero_extendqisi2
 480              		.loc 1 279 3 view .LVU173
 481 000c 012B     		cmp	r3, #1
 482 000e 19D0     		beq	.L24
 483 0010 022B     		cmp	r3, #2
 484 0012 14D1     		bne	.L28
 280:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 281:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_SEND:
 282:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 283:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Prepare the CBW and relevent field*/
 284:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.DataTransferLength = DATA_LEN_REQUEST_SENSE;
 285:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 286:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 287:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       USBH_memset(MSC_Handle->hbot.cbw.field.CB, 0, CBW_CB_LENGTH);
 289:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_REQUEST_SENSE;
 290:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[1]  = (lun << 5);
 291:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = 0U;
 293:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = DATA_LEN_REQUEST_SENSE;
 294:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = 0U;
 295:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 296:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.state = BOT_SEND_CBW;
 297:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 299:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 300:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 301:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 302:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_WAIT:
 303:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 304:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_MSC_BOT_Process(phost, lun);
 485              		.loc 1 304 7 is_stmt 1 view .LVU174
 486 0014 1646     		mov	r6, r2
 487              		.loc 1 304 15 is_stmt 0 view .LVU175
 488 0016 FFF7FEFF 		bl	USBH_MSC_BOT_Process
 489              	.LVL39:
 305:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 306:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       if (error == USBH_OK)
 490              		.loc 1 306 7 is_stmt 1 view .LVU176
 491              		.loc 1 306 10 is_stmt 0 view .LVU177
 492 001a 0346     		mov	r3, r0
 493 001c 68B9     		cbnz	r0, .L26
 307:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       {
 308:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         sense_data->key  = MSC_Handle->hbot.pbuf[2] & 0x0FU;
 494              		.loc 1 308 9 is_stmt 1 view .LVU178
 495              		.loc 1 308 49 is_stmt 0 view .LVU179
 496 001e D4F88C20 		ldr	r2, [r4, #140]
 497              		.loc 1 308 53 view .LVU180
 498 0022 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 499 0024 02F00F02 		and	r2, r2, #15
 500              		.loc 1 308 26 view .LVU181
 501 0028 3270     		strb	r2, [r6]
 309:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         sense_data->asc  = MSC_Handle->hbot.pbuf[12];
ARM GAS  /tmp/ccq9Yqm5.s 			page 17


 502              		.loc 1 309 9 is_stmt 1 view .LVU182
 503              		.loc 1 309 26 is_stmt 0 view .LVU183
 504 002a D4F88C20 		ldr	r2, [r4, #140]
 505 002e 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 506 0030 7270     		strb	r2, [r6, #1]
 310:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****         sense_data->ascq = MSC_Handle->hbot.pbuf[13];
 507              		.loc 1 310 9 is_stmt 1 view .LVU184
 508              		.loc 1 310 26 is_stmt 0 view .LVU185
 509 0032 D4F88C20 		ldr	r2, [r4, #140]
 510 0036 527B     		ldrb	r2, [r2, #13]	@ zero_extendqisi2
 511 0038 B270     		strb	r2, [r6, #2]
 512              	.L26:
 513              	.LVL40:
 311:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       }
 312:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 313:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 314:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     default:
 315:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 316:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   }
 317:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 318:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   return error;
 514              		.loc 1 318 3 is_stmt 1 view .LVU186
 319:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 515              		.loc 1 319 1 is_stmt 0 view .LVU187
 516 003a 1846     		mov	r0, r3
 517 003c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 518              	.LVL41:
 519              	.L28:
 279:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 520              		.loc 1 279 3 view .LVU188
 521 003e 0223     		movs	r3, #2
 522              	.LVL42:
 318:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 523              		.loc 1 318 3 is_stmt 1 view .LVU189
 524              		.loc 1 319 1 is_stmt 0 view .LVU190
 525 0040 1846     		mov	r0, r3
 526              	.LVL43:
 527              		.loc 1 319 1 view .LVU191
 528 0042 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 529              	.LVL44:
 530              	.L24:
 284:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 531              		.loc 1 284 7 is_stmt 1 view .LVU192
 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_REQUEST_SENSE;
 532              		.loc 1 288 7 is_stmt 0 view .LVU193
 533 0044 0022     		movs	r2, #0
 534              	.LVL45:
 290:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
 535              		.loc 1 290 48 view .LVU194
 536 0046 4901     		lsls	r1, r1, #5
 537              	.LVL46:
 284:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 538              		.loc 1 284 53 view .LVU195
 539 0048 0E27     		movs	r7, #14
 285:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 540              		.loc 1 285 40 view .LVU196
 541 004a 8026     		movs	r6, #128
ARM GAS  /tmp/ccq9Yqm5.s 			page 18


 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_REQUEST_SENSE;
 542              		.loc 1 288 7 view .LVU197
 543 004c C4F86720 		str	r2, [r4, #103]	@ unaligned
 286:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 544              		.loc 1 286 43 view .LVU198
 545 0050 40F20A35 		movw	r5, #778
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = DATA_LEN_REQUEST_SENSE;
 546              		.loc 1 292 41 view .LVU199
 547 0054 4FF46060 		mov	r0, #3584
 548              	.LVL47:
 290:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
 549              		.loc 1 290 41 view .LVU200
 550 0058 84F86410 		strb	r1, [r4, #100]
 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_REQUEST_SENSE;
 551              		.loc 1 288 7 view .LVU201
 552 005c C4F86B20 		str	r2, [r4, #107]	@ unaligned
 297:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 553              		.loc 1 297 34 view .LVU202
 554 0060 0221     		movs	r1, #2
 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_REQUEST_SENSE;
 555              		.loc 1 288 7 view .LVU203
 556 0062 C4F86F20 		str	r2, [r4, #111]	@ unaligned
 291:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = 0U;
 557              		.loc 1 291 41 view .LVU204
 558 0066 84F86520 		strb	r2, [r4, #101]
 294:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 559              		.loc 1 294 41 view .LVU205
 560 006a 84F86820 		strb	r2, [r4, #104]
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 561              		.loc 1 298 50 view .LVU206
 562 006e 04F11002 		add	r2, r4, #16
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = DATA_LEN_REQUEST_SENSE;
 563              		.loc 1 292 41 view .LVU207
 564 0072 A4F86600 		strh	r0, [r4, #102]	@ movhi
 565              		.loc 1 319 1 view .LVU208
 566 0076 1846     		mov	r0, r3
 296:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 567              		.loc 1 296 30 view .LVU209
 568 0078 84F85030 		strb	r3, [r4, #80]
 284:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 569              		.loc 1 284 53 view .LVU210
 570 007c E765     		str	r7, [r4, #92]
 285:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 571              		.loc 1 285 7 is_stmt 1 view .LVU211
 285:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 572              		.loc 1 285 40 is_stmt 0 view .LVU212
 573 007e 84F86060 		strb	r6, [r4, #96]
 286:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 574              		.loc 1 286 7 is_stmt 1 view .LVU213
 288:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_REQUEST_SENSE;
 575              		.loc 1 288 7 view .LVU214
 289:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[1]  = (lun << 5);
 576              		.loc 1 289 7 view .LVU215
 286:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 577              		.loc 1 286 43 is_stmt 0 view .LVU216
 578 0082 A4F86250 		strh	r5, [r4, #98]	@ movhi
 290:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = 0U;
ARM GAS  /tmp/ccq9Yqm5.s 			page 19


 579              		.loc 1 290 7 is_stmt 1 view .LVU217
 291:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = 0U;
 580              		.loc 1 291 7 view .LVU218
 292:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = DATA_LEN_REQUEST_SENSE;
 581              		.loc 1 292 7 view .LVU219
 293:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = 0U;
 582              		.loc 1 293 7 view .LVU220
 294:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 583              		.loc 1 294 7 view .LVU221
 296:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 584              		.loc 1 296 7 view .LVU222
 297:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 585              		.loc 1 297 7 view .LVU223
 297:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = (uint8_t *)(void *)MSC_Handle->hbot.data;
 586              		.loc 1 297 34 is_stmt 0 view .LVU224
 587 0086 84F85210 		strb	r1, [r4, #82]
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 588              		.loc 1 298 7 is_stmt 1 view .LVU225
 298:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 589              		.loc 1 298 29 is_stmt 0 view .LVU226
 590 008a C4F88C20 		str	r2, [r4, #140]
 299:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 591              		.loc 1 299 7 is_stmt 1 view .LVU227
 592              	.LVL48:
 300:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 593              		.loc 1 300 7 view .LVU228
 318:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 594              		.loc 1 318 3 view .LVU229
 595              		.loc 1 319 1 is_stmt 0 view .LVU230
 596 008e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 597              		.loc 1 319 1 view .LVU231
 598              		.cfi_endproc
 599              	.LFE341:
 601              		.section	.text.USBH_MSC_SCSI_Write,"ax",%progbits
 602              		.align	1
 603              		.p2align 2,,3
 604              		.global	USBH_MSC_SCSI_Write
 605              		.syntax unified
 606              		.thumb
 607              		.thumb_func
 608              		.fpu fpv5-d16
 610              	USBH_MSC_SCSI_Write:
 611              	.LVL49:
 612              	.LFB342:
 320:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 321:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
 322:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief  USBH_MSC_SCSI_Write
 323:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *         Issue write10 command.
 324:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  phost: Host handle
 325:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  lun: Logical Unit Number
 326:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  address: sector address
 327:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  pbuf: pointer to data
 328:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  length: number of sector to write
 329:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @retval USBH Status
 330:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
 331:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** USBH_StatusTypeDef USBH_MSC_SCSI_Write(USBH_HandleTypeDef *phost,
 332:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                        uint8_t lun,
ARM GAS  /tmp/ccq9Yqm5.s 			page 20


 333:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                        uint32_t address,
 334:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                        uint8_t *pbuf,
 335:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                        uint32_t length)
 336:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** {
 613              		.loc 1 336 1 is_stmt 1 view -0
 614              		.cfi_startproc
 615              		@ args = 4, pretend = 0, frame = 0
 616              		@ frame_needed = 0, uses_anonymous_args = 0
 617              		@ link register save eliminated.
 337:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 618              		.loc 1 337 3 view .LVU233
 338:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 339:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 619              		.loc 1 339 3 view .LVU234
 336:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 620              		.loc 1 336 1 is_stmt 0 view .LVU235
 621 0000 F0B4     		push	{r4, r5, r6, r7}
 622              	.LCFI5:
 623              		.cfi_def_cfa_offset 16
 624              		.cfi_offset 4, -16
 625              		.cfi_offset 5, -12
 626              		.cfi_offset 6, -8
 627              		.cfi_offset 7, -4
 628              		.loc 1 339 22 view .LVU236
 629 0002 D0F87C44 		ldr	r4, [r0, #1148]
 336:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 630              		.loc 1 336 1 view .LVU237
 631 0006 049E     		ldr	r6, [sp, #16]
 632              		.loc 1 339 22 view .LVU238
 633 0008 E469     		ldr	r4, [r4, #28]
 634              	.LVL50:
 340:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 341:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   switch (MSC_Handle->hbot.cmd_state)
 635              		.loc 1 341 3 is_stmt 1 view .LVU239
 636              		.loc 1 341 27 is_stmt 0 view .LVU240
 637 000a 94F85250 		ldrb	r5, [r4, #82]	@ zero_extendqisi2
 638              		.loc 1 341 3 view .LVU241
 639 000e 012D     		cmp	r5, #1
 640 0010 08D0     		beq	.L30
 641 0012 022D     		cmp	r5, #2
 642 0014 02D1     		bne	.L34
 342:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 343:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_SEND:
 344:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 345:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Prepare the CBW and relevent field*/
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.DataTransferLength = length * MSC_Handle->unit[0].capacity.block_s
 347:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
 348:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 349:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 350:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       USBH_memset(MSC_Handle->hbot.cbw.field.CB, 0, CBW_CB_LENGTH);
 351:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_WRITE10;
 352:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 353:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*logical block address*/
 354:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = (((uint8_t *)(void *)&address)[3]);
 355:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 356:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 357:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
ARM GAS  /tmp/ccq9Yqm5.s 			page 21


 358:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 359:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 360:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Transfer length */
 361:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[7]  = (((uint8_t *)(void *)&length)[1]) ;
 362:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
 363:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 364:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 365:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.state = BOT_SEND_CBW;
 366:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 368:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 369:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 370:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 371:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_WAIT:
 372:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_MSC_BOT_Process(phost, lun);
 643              		.loc 1 372 7 is_stmt 1 view .LVU242
 373:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 374:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 375:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     default:
 376:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 377:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   }
 378:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 379:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   return error;
 380:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 644              		.loc 1 380 1 is_stmt 0 view .LVU243
 645 0016 F0BC     		pop	{r4, r5, r6, r7}
 646              	.LCFI6:
 647              		.cfi_remember_state
 648              		.cfi_restore 7
 649              		.cfi_restore 6
 650              		.cfi_restore 5
 651              		.cfi_restore 4
 652              		.cfi_def_cfa_offset 0
 653              	.LVL51:
 372:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 654              		.loc 1 372 15 view .LVU244
 655 0018 FFF7FEBF 		b	USBH_MSC_BOT_Process
 656              	.LVL52:
 657              	.L34:
 658              	.LCFI7:
 659              		.cfi_restore_state
 341:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 660              		.loc 1 341 3 view .LVU245
 661 001c 0225     		movs	r5, #2
 662              	.LVL53:
 379:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 663              		.loc 1 379 3 is_stmt 1 view .LVU246
 664              		.loc 1 380 1 is_stmt 0 view .LVU247
 665 001e 2846     		mov	r0, r5
 666              	.LVL54:
 667              		.loc 1 380 1 view .LVU248
 668 0020 F0BC     		pop	{r4, r5, r6, r7}
 669              	.LCFI8:
 670              		.cfi_remember_state
 671              		.cfi_restore 7
 672              		.cfi_restore 6
 673              		.cfi_restore 5
ARM GAS  /tmp/ccq9Yqm5.s 			page 22


 674              		.cfi_restore 4
 675              		.cfi_def_cfa_offset 0
 676              	.LVL55:
 677              		.loc 1 380 1 view .LVU249
 678 0022 7047     		bx	lr
 679              	.LVL56:
 680              	.L30:
 681              	.LCFI9:
 682              		.cfi_restore_state
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
 683              		.loc 1 346 7 is_stmt 1 view .LVU250
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
 684              		.loc 1 346 92 is_stmt 0 view .LVU251
 685 0024 B4F89810 		ldrh	r1, [r4, #152]
 686              	.LVL57:
 361:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
 687              		.loc 1 361 41 view .LVU252
 688 0028 70BA     		rev16	r0, r6
 689              	.LVL58:
 354:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 690              		.loc 1 354 41 view .LVU253
 691 002a C2F30767 		ubfx	r7, r2, #24, #8
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 692              		.loc 1 367 29 view .LVU254
 693 002e C4F88C30 		str	r3, [r4, #140]
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
 694              		.loc 1 346 62 view .LVU255
 695 0032 06FB01F6 		mul	r6, r6, r1
 347:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 696              		.loc 1 347 40 view .LVU256
 697 0036 0021     		movs	r1, #0
 348:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 698              		.loc 1 348 43 view .LVU257
 699 0038 42F60A2C 		movw	ip, #10762
 366:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 700              		.loc 1 366 34 view .LVU258
 701 003c 0223     		movs	r3, #2
 702              	.LVL59:
 350:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_WRITE10;
 703              		.loc 1 350 7 view .LVU259
 704 003e C4F86710 		str	r1, [r4, #103]	@ unaligned
 346:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_OUT;
 705              		.loc 1 346 53 view .LVU260
 706 0042 E665     		str	r6, [r4, #92]
 347:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 707              		.loc 1 347 7 is_stmt 1 view .LVU261
 355:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 708              		.loc 1 355 41 is_stmt 0 view .LVU262
 709 0044 C2F30746 		ubfx	r6, r2, #16, #8
 350:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_WRITE10;
 710              		.loc 1 350 7 view .LVU263
 711 0048 C4F86B10 		str	r1, [r4, #107]	@ unaligned
 361:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
 712              		.loc 1 361 41 view .LVU264
 713 004c A4F86A00 		strh	r0, [r4, #106]	@ movhi
 356:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
 714              		.loc 1 356 41 view .LVU265
ARM GAS  /tmp/ccq9Yqm5.s 			page 23


 715 0050 C2F30720 		ubfx	r0, r2, #8, #8
 350:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_WRITE10;
 716              		.loc 1 350 7 view .LVU266
 717 0054 C4F86310 		str	r1, [r4, #99]	@ unaligned
 356:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
 718              		.loc 1 356 41 view .LVU267
 719 0058 84F86700 		strb	r0, [r4, #103]
 720              		.loc 1 380 1 view .LVU268
 721 005c 2846     		mov	r0, r5
 365:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 722              		.loc 1 365 30 view .LVU269
 723 005e 84F85050 		strb	r5, [r4, #80]
 347:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 724              		.loc 1 347 40 view .LVU270
 725 0062 84F86010 		strb	r1, [r4, #96]
 348:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 726              		.loc 1 348 7 is_stmt 1 view .LVU271
 350:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_WRITE10;
 727              		.loc 1 350 7 view .LVU272
 728 0066 C4F86F10 		str	r1, [r4, #111]	@ unaligned
 351:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 729              		.loc 1 351 7 view .LVU273
 357:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 730              		.loc 1 357 73 is_stmt 0 view .LVU274
 731 006a 84F86820 		strb	r2, [r4, #104]
 348:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 732              		.loc 1 348 43 view .LVU275
 733 006e A4F862C0 		strh	ip, [r4, #98]	@ movhi
 354:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 734              		.loc 1 354 7 is_stmt 1 view .LVU276
 354:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 735              		.loc 1 354 41 is_stmt 0 view .LVU277
 736 0072 84F86570 		strb	r7, [r4, #101]
 355:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 737              		.loc 1 355 7 is_stmt 1 view .LVU278
 355:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 738              		.loc 1 355 41 is_stmt 0 view .LVU279
 739 0076 84F86660 		strb	r6, [r4, #102]
 356:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
 740              		.loc 1 356 7 is_stmt 1 view .LVU280
 357:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 741              		.loc 1 357 7 view .LVU281
 361:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
 742              		.loc 1 361 7 view .LVU282
 362:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 743              		.loc 1 362 7 view .LVU283
 365:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 744              		.loc 1 365 7 view .LVU284
 366:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 745              		.loc 1 366 7 view .LVU285
 366:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 746              		.loc 1 366 34 is_stmt 0 view .LVU286
 747 007a 84F85230 		strb	r3, [r4, #82]
 367:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 748              		.loc 1 367 7 is_stmt 1 view .LVU287
 368:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 749              		.loc 1 368 7 view .LVU288
ARM GAS  /tmp/ccq9Yqm5.s 			page 24


 750              	.LVL60:
 369:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 751              		.loc 1 369 7 view .LVU289
 379:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 752              		.loc 1 379 3 view .LVU290
 753              		.loc 1 380 1 is_stmt 0 view .LVU291
 754 007e F0BC     		pop	{r4, r5, r6, r7}
 755              	.LCFI10:
 756              		.cfi_restore 7
 757              		.cfi_restore 6
 758              		.cfi_restore 5
 759              		.cfi_restore 4
 760              		.cfi_def_cfa_offset 0
 761              	.LVL61:
 762              		.loc 1 380 1 view .LVU292
 763 0080 7047     		bx	lr
 764              		.cfi_endproc
 765              	.LFE342:
 767 0082 00BF     		.section	.text.USBH_MSC_SCSI_Read,"ax",%progbits
 768              		.align	1
 769              		.p2align 2,,3
 770              		.global	USBH_MSC_SCSI_Read
 771              		.syntax unified
 772              		.thumb
 773              		.thumb_func
 774              		.fpu fpv5-d16
 776              	USBH_MSC_SCSI_Read:
 777              	.LVL62:
 778              	.LFB343:
 381:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 382:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** /**
 383:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @brief  USBH_MSC_SCSI_Read
 384:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   *         Issue Read10 command.
 385:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  phost: Host handle
 386:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  lun: Logical Unit Number
 387:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  address: sector address
 388:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  pbuf: pointer to data
 389:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @param  length: number of sector to read
 390:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   * @retval USBH Status
 391:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   */
 392:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** USBH_StatusTypeDef USBH_MSC_SCSI_Read(USBH_HandleTypeDef *phost,
 393:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                       uint8_t lun,
 394:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                       uint32_t address,
 395:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                       uint8_t *pbuf,
 396:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****                                       uint32_t length)
 397:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** {
 779              		.loc 1 397 1 is_stmt 1 view -0
 780              		.cfi_startproc
 781              		@ args = 4, pretend = 0, frame = 0
 782              		@ frame_needed = 0, uses_anonymous_args = 0
 783              		@ link register save eliminated.
 398:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 784              		.loc 1 398 3 view .LVU294
 399:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   MSC_HandleTypeDef *MSC_Handle = (MSC_HandleTypeDef *) phost->pActiveClass->pData;
 785              		.loc 1 399 3 view .LVU295
 397:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 786              		.loc 1 397 1 is_stmt 0 view .LVU296
ARM GAS  /tmp/ccq9Yqm5.s 			page 25


 787 0000 F0B4     		push	{r4, r5, r6, r7}
 788              	.LCFI11:
 789              		.cfi_def_cfa_offset 16
 790              		.cfi_offset 4, -16
 791              		.cfi_offset 5, -12
 792              		.cfi_offset 6, -8
 793              		.cfi_offset 7, -4
 794              		.loc 1 399 22 view .LVU297
 795 0002 D0F87C44 		ldr	r4, [r0, #1148]
 397:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   USBH_StatusTypeDef    error = USBH_FAIL ;
 796              		.loc 1 397 1 view .LVU298
 797 0006 049E     		ldr	r6, [sp, #16]
 798              		.loc 1 399 22 view .LVU299
 799 0008 E469     		ldr	r4, [r4, #28]
 800              	.LVL63:
 400:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 401:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   switch (MSC_Handle->hbot.cmd_state)
 801              		.loc 1 401 3 is_stmt 1 view .LVU300
 802              		.loc 1 401 27 is_stmt 0 view .LVU301
 803 000a 94F85250 		ldrb	r5, [r4, #82]	@ zero_extendqisi2
 804              		.loc 1 401 3 view .LVU302
 805 000e 012D     		cmp	r5, #1
 806 0010 08D0     		beq	.L36
 807 0012 022D     		cmp	r5, #2
 808 0014 02D1     		bne	.L40
 402:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 403:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_SEND:
 404:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 405:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Prepare the CBW and relevent field*/
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.DataTransferLength = length * MSC_Handle->unit[0].capacity.block_s
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 409:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       USBH_memset(MSC_Handle->hbot.cbw.field.CB, 0, CBW_CB_LENGTH);
 411:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ10;
 412:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 413:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*logical block address*/
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[2]  = (((uint8_t *)(void *)&address)[3]);
 415:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 416:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 417:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
 418:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 419:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 420:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       /*Transfer length */
 421:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[7]  = (((uint8_t *)(void *)&length)[1]) ;
 422:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
 423:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 424:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 425:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.state = BOT_SEND_CBW;
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 427:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 428:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 429:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 430:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 431:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     case BOT_CMD_WAIT:
 432:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_MSC_BOT_Process(phost, lun);
 809              		.loc 1 432 7 is_stmt 1 view .LVU303
ARM GAS  /tmp/ccq9Yqm5.s 			page 26


 433:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 434:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 435:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****     default:
 436:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 437:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   }
 438:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 439:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   return error;
 440:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 810              		.loc 1 440 1 is_stmt 0 view .LVU304
 811 0016 F0BC     		pop	{r4, r5, r6, r7}
 812              	.LCFI12:
 813              		.cfi_remember_state
 814              		.cfi_restore 7
 815              		.cfi_restore 6
 816              		.cfi_restore 5
 817              		.cfi_restore 4
 818              		.cfi_def_cfa_offset 0
 819              	.LVL64:
 432:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 820              		.loc 1 432 15 view .LVU305
 821 0018 FFF7FEBF 		b	USBH_MSC_BOT_Process
 822              	.LVL65:
 823              	.L40:
 824              	.LCFI13:
 825              		.cfi_restore_state
 401:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****   {
 826              		.loc 1 401 3 view .LVU306
 827 001c 0225     		movs	r5, #2
 828              	.LVL66:
 439:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 829              		.loc 1 439 3 is_stmt 1 view .LVU307
 830              		.loc 1 440 1 is_stmt 0 view .LVU308
 831 001e 2846     		mov	r0, r5
 832              	.LVL67:
 833              		.loc 1 440 1 view .LVU309
 834 0020 F0BC     		pop	{r4, r5, r6, r7}
 835              	.LCFI14:
 836              		.cfi_remember_state
 837              		.cfi_restore 7
 838              		.cfi_restore 6
 839              		.cfi_restore 5
 840              		.cfi_restore 4
 841              		.cfi_def_cfa_offset 0
 842              	.LVL68:
 843              		.loc 1 440 1 view .LVU310
 844 0022 7047     		bx	lr
 845              	.LVL69:
 846              	.L36:
 847              	.LCFI15:
 848              		.cfi_restore_state
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 849              		.loc 1 406 7 is_stmt 1 view .LVU311
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 850              		.loc 1 406 92 is_stmt 0 view .LVU312
 851 0024 B4F89810 		ldrh	r1, [r4, #152]
 852              	.LVL70:
 421:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
ARM GAS  /tmp/ccq9Yqm5.s 			page 27


 853              		.loc 1 421 41 view .LVU313
 854 0028 70BA     		rev16	r0, r6
 855              	.LVL71:
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 856              		.loc 1 408 43 view .LVU314
 857 002a 42F60A07 		movw	r7, #10250
 427:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 858              		.loc 1 427 29 view .LVU315
 859 002e C4F88C30 		str	r3, [r4, #140]
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 860              		.loc 1 406 62 view .LVU316
 861 0032 06FB01F6 		mul	r6, r6, r1
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ10;
 862              		.loc 1 410 7 view .LVU317
 863 0036 0021     		movs	r1, #0
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 864              		.loc 1 407 40 view .LVU318
 865 0038 4FF0800C 		mov	ip, #128
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 866              		.loc 1 426 34 view .LVU319
 867 003c 0223     		movs	r3, #2
 868              	.LVL72:
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ10;
 869              		.loc 1 410 7 view .LVU320
 870 003e C4F86710 		str	r1, [r4, #103]	@ unaligned
 871 0042 C4F86310 		str	r1, [r4, #99]	@ unaligned
 872 0046 C4F86B10 		str	r1, [r4, #107]	@ unaligned
 406:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.Flags = USB_EP_DIR_IN;
 873              		.loc 1 406 53 view .LVU321
 874 004a E665     		str	r6, [r4, #92]
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 875              		.loc 1 407 7 is_stmt 1 view .LVU322
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 876              		.loc 1 414 41 is_stmt 0 view .LVU323
 877 004c C2F30766 		ubfx	r6, r2, #24, #8
 421:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
 878              		.loc 1 421 41 view .LVU324
 879 0050 A4F86A00 		strh	r0, [r4, #106]	@ movhi
 415:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 880              		.loc 1 415 41 view .LVU325
 881 0054 C2F30740 		ubfx	r0, r2, #16, #8
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ10;
 882              		.loc 1 410 7 view .LVU326
 883 0058 C4F86F10 		str	r1, [r4, #111]	@ unaligned
 416:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
 884              		.loc 1 416 41 view .LVU327
 885 005c C2F30721 		ubfx	r1, r2, #8, #8
 415:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 886              		.loc 1 415 41 view .LVU328
 887 0060 84F86600 		strb	r0, [r4, #102]
 888              		.loc 1 440 1 view .LVU329
 889 0064 2846     		mov	r0, r5
 425:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 890              		.loc 1 425 30 view .LVU330
 891 0066 84F85050 		strb	r5, [r4, #80]
 417:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 892              		.loc 1 417 73 view .LVU331
ARM GAS  /tmp/ccq9Yqm5.s 			page 28


 893 006a 84F86820 		strb	r2, [r4, #104]
 407:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CBLength = CBW_LENGTH;
 894              		.loc 1 407 40 view .LVU332
 895 006e 84F860C0 		strb	ip, [r4, #96]
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 896              		.loc 1 408 7 is_stmt 1 view .LVU333
 410:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[0]  = OPCODE_READ10;
 897              		.loc 1 410 7 view .LVU334
 411:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 898              		.loc 1 411 7 view .LVU335
 408:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 899              		.loc 1 408 43 is_stmt 0 view .LVU336
 900 0072 A4F86270 		strh	r7, [r4, #98]	@ movhi
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 901              		.loc 1 414 7 is_stmt 1 view .LVU337
 414:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[3]  = (((uint8_t *)(void *)&address)[2]);
 902              		.loc 1 414 41 is_stmt 0 view .LVU338
 903 0076 84F86560 		strb	r6, [r4, #101]
 415:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[4]  = (((uint8_t *)(void *)&address)[1]);
 904              		.loc 1 415 7 is_stmt 1 view .LVU339
 416:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
 905              		.loc 1 416 7 view .LVU340
 416:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[5]  = (((uint8_t *)(void *)&address)[0]);
 906              		.loc 1 416 41 is_stmt 0 view .LVU341
 907 007a 84F86710 		strb	r1, [r4, #103]
 417:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 908              		.loc 1 417 7 is_stmt 1 view .LVU342
 421:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cbw.field.CB[8]  = (((uint8_t *)(void *)&length)[0]) ;
 909              		.loc 1 421 7 view .LVU343
 422:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 910              		.loc 1 422 7 view .LVU344
 425:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.cmd_state = BOT_CMD_WAIT;
 911              		.loc 1 425 7 view .LVU345
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 912              		.loc 1 426 7 view .LVU346
 426:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       MSC_Handle->hbot.pbuf = pbuf;
 913              		.loc 1 426 34 is_stmt 0 view .LVU347
 914 007e 84F85230 		strb	r3, [r4, #82]
 427:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       error = USBH_BUSY;
 915              		.loc 1 427 7 is_stmt 1 view .LVU348
 428:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c ****       break;
 916              		.loc 1 428 7 view .LVU349
 917              	.LVL73:
 429:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** 
 918              		.loc 1 429 7 view .LVU350
 439:./Libraries/STM32_USB_Host_Library/Class/MSC/Src/usbh_msc_scsi.c **** }
 919              		.loc 1 439 3 view .LVU351
 920              		.loc 1 440 1 is_stmt 0 view .LVU352
 921 0082 F0BC     		pop	{r4, r5, r6, r7}
 922              	.LCFI16:
 923              		.cfi_restore 7
 924              		.cfi_restore 6
 925              		.cfi_restore 5
 926              		.cfi_restore 4
 927              		.cfi_def_cfa_offset 0
 928              	.LVL74:
 929              		.loc 1 440 1 view .LVU353
ARM GAS  /tmp/ccq9Yqm5.s 			page 29


 930 0084 7047     		bx	lr
 931              		.cfi_endproc
 932              	.LFE343:
 934 0086 00BF     		.text
 935              	.Letext0:
 936              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 937              		.file 3 "./Libraries/CMSIS/Core/Include/core_cm7.h"
 938              		.file 4 "./Libraries/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 939              		.file 5 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 940              		.file 6 "/usr/include/newlib/sys/_types.h"
 941              		.file 7 "/usr/include/newlib/sys/reent.h"
 942              		.file 8 "/usr/include/newlib/sys/lock.h"
 943              		.file 9 "/usr/include/newlib/math.h"
 944              		.file 10 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 945              		.file 11 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 946              		.file 12 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 947              		.file 13 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 948              		.file 14 "/usr/include/newlib/stdlib.h"
 949              		.file 15 "./Libraries/FreeRTOS/Source/CMSIS_RTOS/cmsis_os2.h"
 950              		.file 16 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_def.h"
 951              		.file 17 "./Libraries/STM32_USB_Host_Library/Core/Inc/usbh_ctlreq.h"
 952              		.file 18 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_bot.h"
 953              		.file 19 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc_scsi.h"
 954              		.file 20 "./Libraries/STM32_USB_Host_Library/Class/MSC/Inc/usbh_msc.h"
 955              		.file 21 "<built-in>"
ARM GAS  /tmp/ccq9Yqm5.s 			page 30


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbh_msc_scsi.c
     /tmp/ccq9Yqm5.s:17     .text.USBH_MSC_SCSI_TestUnitReady:0000000000000000 $t
     /tmp/ccq9Yqm5.s:26     .text.USBH_MSC_SCSI_TestUnitReady:0000000000000000 USBH_MSC_SCSI_TestUnitReady
     /tmp/ccq9Yqm5.s:118    .text.USBH_MSC_SCSI_ReadCapacity:0000000000000000 $t
     /tmp/ccq9Yqm5.s:126    .text.USBH_MSC_SCSI_ReadCapacity:0000000000000000 USBH_MSC_SCSI_ReadCapacity
     /tmp/ccq9Yqm5.s:251    .text.USBH_MSC_SCSI_Inquiry:0000000000000000 $t
     /tmp/ccq9Yqm5.s:259    .text.USBH_MSC_SCSI_Inquiry:0000000000000000 USBH_MSC_SCSI_Inquiry
     /tmp/ccq9Yqm5.s:446    .text.USBH_MSC_SCSI_RequestSense:0000000000000000 $t
     /tmp/ccq9Yqm5.s:454    .text.USBH_MSC_SCSI_RequestSense:0000000000000000 USBH_MSC_SCSI_RequestSense
     /tmp/ccq9Yqm5.s:602    .text.USBH_MSC_SCSI_Write:0000000000000000 $t
     /tmp/ccq9Yqm5.s:610    .text.USBH_MSC_SCSI_Write:0000000000000000 USBH_MSC_SCSI_Write
     /tmp/ccq9Yqm5.s:768    .text.USBH_MSC_SCSI_Read:0000000000000000 $t
     /tmp/ccq9Yqm5.s:776    .text.USBH_MSC_SCSI_Read:0000000000000000 USBH_MSC_SCSI_Read

UNDEFINED SYMBOLS
USBH_MSC_BOT_Process
memset
